/*
Template Name: Color Admin - Responsive Admin Dashboard Template build with Twitter Bootstrap 5
Version: 5.1.3
Author: Sean Ngu
Website: http://www.seantheme.com/color-admin/
	----------------------------
	APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
	01. Handle Scrollbar
	02. Handle Sidebar Menu
	03. Handle Sidebar Toggle
	04. Handle Sidebar End
	05. Handle Sidebar Minified
	06. Handle Page Loader 
	07. Handle Panel Action
	08. Handle Panel Draggable
	09. Handle Tooltip Popover Activation
	10. Handle Scroll to Top Button
	11. Handle Theme Panel
	12. Handle Save Panel Position Function
	13. Handle Draggable Panel Local Storage Function
	14. Handle Reset Local Storage
	15. Handle Unlimited Nav Tabs
	16. Handle Top Menu - Unlimited Top Menu Render
	17. Handle Top Menu - Sub Menu Toggle
	18. Handle Top Menu - Mobile Sub Menu Toggle
	19. Handle Top Menu - Mobile Top Menu Toggle
	20. Handle Page Scroll Class
	21. Handle Toggle Navbar Profile
	22. Handle Sidebar Scroll Memory
	23. Handle Sidebar Minify Sub Menu
	24. Handle Ajax Mode
	25. Handle Float Navbar Search
	26. Handle Animation
	27. Handle Sidebar Search
	28. Handle Toggle Class
	29. Handle Dismiss Class

	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/
var app = {
	id: '#app',
	isMobile: ((/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) || window.innerWidth < 992),
	bootstrap: {
		tooltip: {
			attr: 'data-bs-toggle="tooltip"'
		},
		popover: {
			attr: 'data-bs-toggle="popover"'
		},
		modal: {
			attr: 'data-bs-toggle="modal"',
			dismissAttr: 'data-bs-dismiss="modal"',
			event: {
				hidden: 'hidden.bs.modal'
			}
		},
		nav: {
			class: 'nav',
			tabs: {
				class: 'nav-tabs',
				activeClass: 'active',
				itemClass: 'nav-item',
				itemLinkClass: 'nav-link'
			}
		}
	},
	ajax: {
		attr: 'data-toggle="ajax"',
		clearOption: '',
		clearElement: '.jvectormap-label, .jvector-label, .AutoFill_border ,#gritter-notice-wrapper, .ui-autocomplete, .colorpicker, .FixedHeader_Header, .FixedHeader_Cloned .lightboxOverlay, .lightbox, .introjs-hints, .nvtooltip, .sp-container, .dz-hidden-input, .lightboxOverlay',
		emptyElement: '[data-id="app-extra-elm"]',
		loader: {
			id: '#app-content-loader',
			html: '<div id="app-content-loader"><span class="spinner"></span></div>',
			class: 'app-content-loading'
		},
		error: {
			html: '<div class="px-3 text-center fs-20px"><i class="fa fa-warning fa-lg text-muted me-1"></i> <span class="fw-600 text-inverse">Error 404! Page not found.</span></div>'
		}
	},
	header: {
		id: '#header',
		class: 'app-header',
		hasScrollClass: 'has-scroll',
		brand: {
			class: 'navbar-brand'
		},
		floatingForm: {
			toggleAttr: 'data-toggle="app-header-floating-form"',
			dismissAttr: 'data-dismiss="app-header-floating-form"',
			toggledClass: 'app-header-floating-form-toggled'
		},
		inverse: {
			class: 'app-header-inverse'
		}
	},
	sidebar: {
		id: '#sidebar',
		class: 'app-sidebar',
		scrollBar: {
			localStorage: 'appSidebarScrollPosition',
			dom: ''
		},
		bg: {
			class: 'app-sidebar-bg'
		},
		menu: {
			class: 'menu',
			disableAnimationAttr: 'data-disable-slide-animation',
			disableAutoCollapseAttr: 'data-disable-auto-collapse',
			animationTime: 250,
			headerClass: 'menu-header',
			itemClass: 'menu-item',
			itemLinkClass: 'menu-link',
			hasSubClass: 'has-sub',
			activeClass: 'active',
			expandingClass: 'expanding',
			expandClass: 'expand',
			closingClass: 'closing',
			closedClass: 'closed',
			submenu: {
				class: 'menu-submenu',
			}
		},
		profile: {
			class: 'menu-profile',
			toggleAttr: 'data-toggle="app-sidebar-profile"',
			targetAttr: 'data-target'
		},
		mobile: {
			toggleAttr: 'data-toggle="app-sidebar-mobile"',
			dismissAttr: 'data-dismiss="app-sidebar-mobile"',
			toggledClass: 'app-sidebar-mobile-toggled',
			closedClass: 'app-sidebar-mobile-closed',
			backdrop: {
				class: 'app-sidebar-mobile-backdrop'
			}
		},
		minify: {
			toggleAttr: 'data-toggle="app-sidebar-minify"',
			toggledClass: 'app-sidebar-minified',
			cookieName: 'app-sidebar-minified'
		},
		floatSubmenu: {
			id: '#app-sidebar-float-submenu',
			dom: '',
			timeout: '',
			class: 'app-sidebar-float-submenu',
			container: {
				class: 'app-sidebar-float-submenu-container'
			},
			arrow: {
				id: '#app-sidebar-float-submenu-arrow',
				class: 'app-sidebar-float-submenu-arrow'
			},
			line: {
				id: '#app-sidebar-float-submenu-line',
				class: 'app-sidebar-float-submenu-line'
			},
			overflow: {
				class: 'overflow-scroll mh-100vh'
			}
		},
		search: {
			class: 'menu-search',
			toggleAttr: 'data-sidebar-search="true"',
			hideClass: 'd-none',
			foundClass: 'has-text'
		},
		transparent: {
			class: 'app-sidebar-transparent'
		}
	},
	sidebarEnd: {
		class: 'app-sidebar-end',
		toggleAttr: 'data-toggle="app-sidebar-end"',
		toggledClass: 'app-sidebar-end-toggled',
		collapsedClass: 'app-sidebar-end-collapsed',
		mobile: {
			toggleAttr: 'data-toggle="app-sidebar-end-mobile"',
			dismissAttr: 'data-dismiss="app-sidebar-end-mobile"',
			toggledClass: 'app-sidebar-end-mobile-toggled',
			collapsedClass: 'app-sidebar-end-mobile-collapsed',
			closedClass: 'app-sidebar-end-mobile-closed'
		}
	},
	topMenu: {
		id: '#top-menu',
		class: 'app-top-menu',
		mobile: {
			toggleAttr: 'data-toggle="app-top-menu-mobile"'
		},
		menu: {
			class: 'menu',
			itemClass: 'menu-item',
			linkClass: 'menu-link',
			activeClass: 'active',
			hasSubClass: 'has-sub',
			expandClass: 'expand',
			submenu: {
				class: 'menu-submenu'
			}
		},
		control: {
			class: 'menu-control',
			startClass: 'menu-control-start',
			endClass: 'menu-control-end',
			showClass: 'show',
			buttonPrev: {
				class: 'menu-control-start',
				toggleAttr: 'data-toggle="app-top-menu-prev"'
			},
			buttonNext: {
				class: 'menu-control-end',
				toggleAttr: 'data-toggle="app-top-menu-next"'
			}
		}
	},
	scrollBar: {
		attr: 'data-scrollbar="true"',
		skipMobileAttr: 'data-skip-mobile',
		initAttr: 'data-init',
		heightAttr: 'data-height',
		wheelPropagationAttr: 'data-wheel-propagation'
	},
	content: {
		id: '#content',
		class: 'app-content',
		fullHeight: {
			class: 'app-content-full-height'
		},
		fullWidth: {
			class: 'app-content-full-width'
		}
	},
	layout: {
		sidebarLight: {
			class: 'app-with-light-sidebar'
		},
		sidebarEnd: {
			class: 'app-with-end-sidebar'
		},
		sidebarWide: {
			class: 'app-with-wide-sidebar'
		},
		sidebarMinified: {
			class: 'app-sidebar-minified'
		},
		sidebarTwo: {
			class: 'app-with-two-sidebar'
		},
		withoutHeader: {
			class: 'app-without-header'
		},
		withoutSidebar: {
			class: 'app-without-sidebar'
		},
		topMenu: {
			class: 'app-with-top-menu'
		},
		boxedLayout: {
			class: 'boxed-layout'
		}
	},
	loader: {
		class: 'app-loader',
		fadingClass: 'fading',
		fadingTime: 200,
		loadedClass: 'loaded'
	},
	panel: {
		class: 'panel',
		headClass: 'panel-heading',
		titleClass: 'panel-title',
		bodyClass: 'panel-body',
		expandClass: 'panel-expand',
		loadingClass: 'panel-loading',
		loader: {
			class: 'panel-loader',
			html: '<span class="spinner spinner-sm"></span>'
		},
		toggle: {
			remove: {
				attr: 'data-toggle="panel-remove"',
				tooltipText: 'Remove'
			},
			collapse: {
				attr: 'data-toggle="panel-collapse"',
				tooltipText: 'Collapse / Expand'
			},
			reload: {
				attr: 'data-toggle="panel-reload"',
				tooltipText: 'Reload',
			},
			expand: {
				attr: 'data-toggle="panel-expand"',
				tooltipText: 'Expand / Compress'
			}
		},
		draggable: {
			disableAttr: 'data-sortable="false"',
			connectedTarget: '.row > [class*=col]',
			spinnerHtml: '<i class="fa fa-spinner fa-spin ms-2" data-id="title-spinner"></i>',
		},
		sortable: {
			class: 'ui-sortable',
			attr: 'data-sortable-id',
			spinnerAttr: 'data-id="title-spinner"',
			disableAttr: 'data-sortable="false"',
			parentAttr: 'class*="col-"'
		},
		localStorage: {
			notSupportMessage: 'Your browser is not supported with the local storage',
			loadedEvent: 'localstorage-position-loaded',
			reset: {
				attr: 'data-toggle="reset-local-storage"',
				modal: {
					id: '#modalResetLocalStorage',
					title: 'Reset Local Storage Confirmation',
					message: 'Would you like to RESET all your saved widgets and clear Local Storage?',
					alert: 'info',
					confirmResetAttr: 'data-toggle="confirm-reset-local-storage"'
				}
			}
		}
	},
	scrollToTopBtn: {
		showClass: 'show',
		heightShow: 200,
		toggleAttr: 'data-toggle="scroll-to-top"',
		scrollSpeed: 500
	},
	unlimitedTabs: {
		class: 'tab-overflow',
		overflowLeft: {
			class: 'overflow-left'
		},
		overflowRight: {
			class: 'overflow-right'
		},
		buttonNext: {
			class: 'next-button',
			toggleAttr: 'data-click="next-tab"'
		},
		buttonPrev: {
			class: 'prev-button',
			toggleAttr: 'data-click="prev-tab"'
		}
	},
	themePanel: {
		class: 'theme-panel',
		toggleAttr: 'data-toggle="theme-panel-expand"',
		cookieName: 'theme-panel-expand',
		activeClass: 'active',
		themeListCLass: 'theme-list',
		themeListItemCLass: 'theme-list-item',
		theme: {
			toggleAttr: 'data-toggle="theme-selector"',
			cookieName: 'app-theme',
			activeClass: 'active',
			classAttr: 'data-theme-class'
		},
		themeHeader: {
			class: 'app-header-inverse',
			toggleAttr: 'name="app-header-inverse"',
			cookieName: 'app-theme-header'
		},
		themeHeaderFixed: {
			class: 'app-header-fixed',
			toggleAttr: 'name="app-header-fixed"',
			cookieName: 'app-header-fixed',
			disabledClass: 'app-header-fixed-disabled',
			errorMessage: 'Default Header with Fixed Sidebar option is not supported. Proceed with Default Header with Default Sidebar.'
		},
		themeSidebarGrid: {
			class: 'app-sidebar-grid',
			toggleAttr: 'name="app-sidebar-grid"',
			cookieName: 'app-sidebar-grid',
		},
		themeGradientEnabled: {
			class: 'app-gradient-enabled',
			toggleAttr: 'name="app-gradient-enabled"',
			cookieName: 'app-gradient-enabled',
		},
		themeSidebarFixed: {
			class: 'app-sidebar-fixed',
			toggleAttr: 'name="app-sidebar-fixed"',
			cookieName: 'app-sidebar-fixed',
			disabledClass: 'app-sidebar-fixed-disabled',
			errorMessage: 'Default Header with Fixed Sidebar option is not supported. Proceed with Fixed Header with Fixed Sidebar.',
			mobileErrorMessage: 'Mobile view sidebar will always fixed'
		},
		themeDarkMode: {
			class: 'dark-mode',
			toggleAttr: 'name="app-theme-dark-mode"',
			cookieName: 'app-theme-dark-mode'
		},
	},
	animation: {
		attr: 'data-animation',
		valueAttr: 'data-value',
		speed: 1000,
		effect: 'swing'
	},
	dismissClass: {
		toggleAttr: 'data-dismiss-class',
		targetAttr: 'data-target'
	},
	toggleClass: {
		toggleAttr: 'data-toggle-class',
		targetAttr: 'data-target'
	},
	helper: {
		display: {
			none: 'd-none'
		},
		margin: {
			left: {
				0: 'ms-0'
			},
			right: {
				0: 'me-0'
			}
		}
	},
	font: {
	
	},
	color: {
	
	}
};


/* 1. Handle Scrollbar
------------------------------------------------ */
var handleScrollbar = function() {
	"use strict";
	
	var elms = document.querySelectorAll('['+ app.scrollBar.attr +']');
		
	for (var i = 0; i < elms.length; i++) {
		generateScrollbar(elms[i])
	}
};
var generateScrollbar = function(elm) {
  "use strict";
	
	if ($(elm).attr(app.scrollBar.initAttr) || (app.isMobile && $(elm).attr(app.scrollBar.skipMobileAttr))) {
		return;
	}
	var dataHeight = (!$(elm).attr(app.scrollBar.heightAttr)) ? $(elm).height() : $(elm).attr(app.scrollBar.heightAttr);
	
	$(elm).css('height', dataHeight);
	
	if(app.isMobile) {
		$(elm).css('overflow-x','scroll');
	} else {
		var dataWheelPropagation = ($(elm).attr(app.scrollBar.wheelPropagationAttr)) ? $(elm).attr(app.scrollBar.wheelPropagationAttr) : false;
		
		if ($(elm).closest('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +')').length !== 0) {
			app.sidebar.scrollBar.dom = new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		} else {
			new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		}
	}
	$(elm).attr(app.scrollBar.initAttr, true);
};


/* 2. Handle Sidebar Menu
------------------------------------------------ */
var handleSidebarMenu = function() {
  "use strict";
    
	var expandTime          = ($(app.sidebar.id).attr(app.sidebar.menu.disableAnimationAttr)) ? 0 : app.sidebar.menu.animationTime;
	var disableAutoCollapse = ($(app.sidebar.id).attr(app.sidebar.menu.disableAutoCollapseAttr)) ? 1 : 0;
	
	// 2.1 Menu - Toggle / Collapse
	$(document).on('click', '.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass, function() {
		var menu      = $(this).next('.'+ app.sidebar.menu.submenu.class);
		var menuOther = $('.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.submenu.class).not(menu);

		if ($('.'+ app.sidebar.minify.toggledClass).length === 0) {
			if (!disableAutoCollapse) {
				$(menuOther).closest('.'+ app.sidebar.menu.itemClass).addClass(app.sidebar.menu.closingClass);
				$(menuOther).slideUp(expandTime, function() {
					$(menuOther).closest('.'+ app.sidebar.menu.itemClass).addClass(app.sidebar.menu.closedClass).removeClass(app.sidebar.menu.expandClass + ' ' + app.sidebar.menu.closingClass);
				});
			}
			if ($(menu).is(':visible')) {
				$(menu).closest('.'+ app.sidebar.menu.itemClass).addClass(app.sidebar.menu.closingClass).removeClass(app.sidebar.menu.expandClass);
			} else {
				$(menu).closest('.'+ app.sidebar.menu.itemClass ).addClass(app.sidebar.menu.expandingClass).removeClass(app.sidebar.menu.closedClass);
			}
			
			$(menu).slideToggle(expandTime, function() {
				var menuItem = $(this).closest('.'+ app.sidebar.menu.itemClass);
				if (!$(menu).is(':visible')) {
					$(menuItem).addClass(app.sidebar.menu.closedClass);
					$(menuItem).removeClass(app.sidebar.menu.expandClass);
				} else {
					$(menuItem).addClass(app.sidebar.menu.expandClass);
					$(menuItem).removeClass(app.sidebar.menu.closedClass);
				}
				$(menuItem).removeClass(app.sidebar.menu.expandingClass + ' ' + app.sidebar.menu.closingClass);
			});
		}
	});
	
	// 2.2 Menu Submenu - Toggle / Collapse 
	$(document).on('click', '.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' .'+ app.sidebar.menu.submenu.class +' .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass, function() {
		if ($('.'+ app.sidebar.minify.toggledClass).length === 0) {
			var menu = $(this).next('.'+ app.sidebar.menu.submenu.class);
			if ($(menu).is(':visible')) {
				$(menu).closest('.'+ app.sidebar.menu.itemClass).addClass(app.sidebar.menu.closingClass).removeClass(app.sidebar.menu.expandClass);
			} else {
				$(menu).closest('.'+ app.sidebar.menu.itemClass).addClass(app.sidebar.menu.expandingClass).removeClass(app.sidebar.menu.closedClass);
			}
			$(menu).slideToggle(expandTime, function() {
				var menuItem = $(this).closest('.'+ app.sidebar.menu.itemClass);
				if (!$(menu).is(':visible')) {
					$(menuItem).addClass(app.sidebar.menu.closedClass);
					$(menuItem).removeClass(app.sidebar.menu.expandClass);
				} else {
					$(menuItem).addClass(app.sidebar.menu.expandClass);
					$(menuItem).removeClass(app.sidebar.menu.closedClass);
				}
				$(menuItem).removeClass(app.sidebar.menu.expandingClass + ' ' + app.sidebar.menu.closingClass);
			});
		}
	});
};


/* 3. Handle Sidebar Toggle
------------------------------------------------ */
var handleSidebarToggle = function() {
  "use strict";

	// 3.1 Mobile - Toggle
	$(document).on('click', '['+ app.sidebar.mobile.toggleAttr +']', function(e) {
		e.preventDefault();
		
		$(app.id).addClass(app.sidebar.mobile.toggledClass).removeClass(app.sidebar.mobile.closedClass);
	});
	
	// 3.2 Mobile - Dismiss 
	$(document).on('click', '['+ app.sidebar.mobile.dismissAttr +']', function(e) {
		e.preventDefault();
		
		$(app.id).removeClass(app.sidebar.mobile.toggledClass).addClass(app.sidebar.mobile.closedClass);
		setTimeout(function() {
			$(app.id).removeClass(app.sidebar.mobile.closedClass);
		}, 250);
	});
};


/* 4. Handle Sidebar End
------------------------------------------------ */
var handleSidebarEndToggle = function() {
  "use strict";

	// 4.1 Desktop - Toggle / Collapse
	$(document).on('click', '['+ app.sidebarEnd.toggleAttr +']', function(e) {
		e.preventDefault();
		
		if (!$(app.id).hasClass(app.sidebarEnd.toggledClass) && !$(app.id).hasClass(app.sidebarEnd.collapsedClass)) {
			$(app.id).addClass(app.sidebarEnd.collapsedClass);
		} else if ($(app.id).hasClass(app.sidebarEnd.toggledClass)) {
			$(app.id).removeClass(app.sidebarEnd.toggledClass).addClass(app.sidebarEnd.collapsedClass);
		} else {
			$(app.id).removeClass(app.sidebarEnd.collapsedClass).addClass(app.sidebarEnd.toggledClass);
		}
	});
	
	// 4.2 Mobile - Toggle
	$(document).on('click', '['+ app.sidebarEnd.mobile.toggleAttr +']', function(e) {
		e.preventDefault();
		
		$(app.id).addClass(app.sidebarEnd.mobile.toggledClass).removeClass(app.sidebarEnd.mobile.closedClass);
	});
	
	// 4.3 Mobile - Dismiss
	$(document).on('click', '['+ app.sidebarEnd.mobile.dismissAttr +']', function(e) {
		e.preventDefault();
		
		$(app.id).removeClass(app.sidebarEnd.mobile.toggledClass).addClass(app.sidebarEnd.mobile.closedClass);
		setTimeout(function() {
			$(app.id).removeClass(app.sidebarEnd.mobile.closedClass);
		}, 250);
	});
};


/* 5. Handle Sidebar Minified
------------------------------------------------ */
var handleSidebarMinify = function() {
  "use strict";
	
	// 5.1 Minify - Toggle / Dismiss
	$(document).on('click', '['+ app.sidebar.minify.toggleAttr +']', function(e) {
		e.preventDefault();
		var appSidebarMinified = false;

		if ($(app.id).hasClass(app.sidebar.minify.toggledClass)) {
			$(app.id).removeClass(app.sidebar.minify.toggledClass);
			$(app.sidebar.floatSubmenu.id).remove();
		} else {
			$(app.id).addClass(app.sidebar.minify.toggledClass);

			if(app.isMobile) {
				var scrollBarAttr = '.' + app.sidebar.class +' '+ app.scrollBar.attr;
				$(scrollBarAttr).css('margin-top','0');
				$(scrollBarAttr).css('overflow-x', 'scroll');
			}
			appSidebarMinified = true;
		}
		if (Cookies) {
			Cookies.set(app.sidebar.minify.cookieName, appSidebarMinified);
		}
	});
	
	// 5.2 Minify - Page Load Cookies 
	if (Cookies) {
		var appSidebarMinified = Cookies.get(app.sidebar.minify.cookieName);
		
		if (appSidebarMinified == 'true') {
			$(app.id).addClass(app.sidebar.minify.toggledClass);
		}
	}
};


/* 6. Handle Page Loader 
------------------------------------------------ */
var handlePageLoader = function() {
  "use strict";

	$(window).on('load', function() {
		var appLoaderClass = '.'+ app.loader.class;
		$(appLoaderClass).addClass(app.loader.fadingClass);
		
		setTimeout(function() {
			$(appLoaderClass).removeClass(app.loader.fadingClass).addClass(app.loader.loadedClass);
		}, app.loader.fadingTime);
	});
};


/* 7. Handle Panel Action
------------------------------------------------ */
var handlePanelAction = function() {
	"use strict";
	
	var panelTooltip;

	// 7.1 Panel Remove - Mouseover
	$(document).on('mouseover', '['+ app.panel.toggle.remove.attr + ']', function(e) {
		if (!$(this).attr('data-tooltip-init')) {
			var panelTooltip = new bootstrap.Tooltip(this, { 
				title: app.panel.toggle.remove.tooltipText, 
				placement: 'bottom' 
			});
			panelTooltip.show();
			$(this).attr('data-tooltip-init', true);
		}
	});
	
	// 7.2 Panel Remove - Click
	$(document).on('click', '['+ app.panel.toggle.remove.attr + ']', function(e) {
		e.preventDefault();
		
		if (panelTooltip) {
			panelTooltip.hide();
		}
		$(this).closest('.'+ app.panel.class).remove();
	});

	// 7.3 Panel Collapse - Mouseover
	$(document).on('mouseover', '['+ app.panel.toggle.collapse.attr + ']', function(e) {
		if (!$(this).attr('data-tooltip-init')) {
			panelTooltip = new bootstrap.Tooltip(this, { 
				title: app.panel.toggle.collapse.tooltipText, 
				placement: 'bottom' 
			});
			panelTooltip.show();
			$(this).attr('data-tooltip-init', true);
		}
	});
	
	// 7.4 Panel Collapse - Click
	$(document).on('click', '['+ app.panel.toggle.collapse.attr + ']', function(e) {
		e.preventDefault();
		
		if (panelTooltip) {
			panelTooltip.hide();
		}
		$(this).closest('.'+ app.panel.class).find('.'+ app.panel.bodyClass).slideToggle();
	});

	// 7.5 Panel Reload - Mouseover
	$(document).on('mouseover', '['+ app.panel.toggle.reload.attr + ']', function(e) {
		if (!$(this).attr('data-tooltip-init')) {
			panelTooltip = new bootstrap.Tooltip(this, { 
				title: app.panel.toggle.reload.tooltipText, 
				placement: 'bottom' 
			});
			panelTooltip.show();
			$(this).attr('data-tooltip-init', true);
		}
	});
	
	// 7.6 Panel Reload - Click
	$(document).on('click', '['+ app.panel.toggle.reload.attr + ']', function(e) {
		e.preventDefault();
		
		if (panelTooltip) {
			panelTooltip.hide();
		}
		var target = $(this).closest('.'+ app.panel.class);
		if (!$(target).hasClass(app.panel.loadingClass)) {
			var targetBody = $(target).find('.'+ app.panel.bodyClass);
			var spinnerHtml = '<div class="'+ app.panel.loader.class +'">'+ app.panel.loader.html +'</div>';
			$(target).addClass(app.panel.loadingClass);
			$(targetBody).prepend(spinnerHtml);
			setTimeout(function() {
				$(target).removeClass(app.panel.loadingClass);
				$(target).find('.'+ app.panel.loader.class).remove();
			}, 2000);
		}
	});

	// 7.7 Panel Expand - Mouseover
	$(document).on('mouseover', '['+ app.panel.toggle.expand.attr + ']', function(e) {
		if (!$(this).attr('data-tooltip-init')) {
			panelTooltip = new bootstrap.Tooltip(this, { 
				title: app.panel.toggle.expand.tooltipText, 
				placement: 'bottom' 
			});
			panelTooltip.show();
			$(this).attr('data-tooltip-init', true);
		}
	});

	// 7.8 Panel Expand - Click
	$(document).on('click', '['+ app.panel.toggle.expand.attr + ']', function(e) {
		e.preventDefault();
		
		if (panelTooltip) {
			panelTooltip.hide();
		}
		var target = $(this).closest('.'+ app.panel.class);
		var targetBody = $(target).find('.'+ app.panel.bodyClass);
		var targetTop = 40;
		if ($(targetBody).length !== 0) {
			var targetOffsetTop = $(target).offset().top;
			var targetBodyOffsetTop = $(targetBody).offset().top;
			targetTop = targetBodyOffsetTop - targetOffsetTop;
		}

		if ($('body').hasClass(app.panel.expandClass) && $(target).hasClass(app.panel.expandClass)) {
			$('body, .'+ app.panel.class).removeClass(app.panel.expandClass);
			$('.'+ app.panel.class).removeAttr('style');
			$(targetBody).removeAttr('style');
		} else {
			$('body').addClass(app.panel.expandClass);
			$(this).closest('.'+ app.panel.class).addClass(app.panel.expandClass);
		}
	});
};


/* 8. Handle Panel Draggable
------------------------------------------------ */
var handlePanelDraggable = function() {
	"use strict";
	
	var target = $('.'+ app.panel.class +':not(['+ app.panel.draggable.disableAttr +'])').parent('[class*=col]');
	var targetHandle = '.'+ app.panel.headClass;
	var connectedTarget = app.panel.draggable.connectedTarget;

	$(target).sortable({
		handle: targetHandle,
		connectWith: connectedTarget,
		stop: function(event, ui) {
			ui.item.find('.'+ app.panel.titleClass).append(app.panel.draggable.spinnerHtml);
			handleSavePanelPosition(ui.item);
		}
	});
};


/* 9. Handle Tooltip Popover Activation
------------------------------------------------ */
var handelTooltipPopoverActivation = function() {
	"use strict";
	
	if ($('['+ app.bootstrap.tooltip.attr +']').length !== 0) {
		var tooltipTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.tooltip.attr +']'))
		var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
			return new bootstrap.Tooltip(tooltipTriggerEl)
		})
	}
	if ($('['+ app.bootstrap.popover.attr +']').length !== 0) {
		var popoverTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.popover.attr +']'))
		var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
			return new bootstrap.Popover(popoverTriggerEl)
		})
	}
};


/* 10. Handle Scroll to Top Button
------------------------------------------------ */
var handleScrollToTopButton = function() {
	"use strict";
	
	$(document).scroll( function() {
		var totalScroll = $(document).scrollTop();

		if (totalScroll >= app.scrollToTopBtn.heightShow) {
			if (!$('['+ app.scrollToTopBtn.toggleAttr +']').hasClass(app.scrollToTopBtn.showClass)) {
				$('['+ app.scrollToTopBtn.toggleAttr +']').addClass(app.scrollToTopBtn.showClass);
			}
		} else {
			$('['+ app.scrollToTopBtn.toggleAttr +']').removeClass(app.scrollToTopBtn.showClass);
		}
	});

	$('['+ app.scrollToTopBtn.toggleAttr +']').click(function(e) {
		e.preventDefault();
		
		$('html, body').animate({
			scrollTop: $('body').offset().top
		}, app.scrollToTopBtn.scrollSpeed);
	});
};


/* 11. Handle Theme Panel
------------------------------------------------ */
var handleThemePanel = function() {
	"use strict";
	
	// 11.1 Theme Panel - Toggle / Dismiss
	$(document).on('click', '['+ app.themePanel.toggleAttr +']', function() {
		var targetContainer = '.'+ app.themePanel.class;
		var targetExpand = false;
		
		if ($(targetContainer).hasClass(app.themePanel.activeClass)) {
			$(targetContainer).removeClass(app.themePanel.activeClass);
		} else {
			$(targetContainer).addClass(app.themePanel.activeClass);
			targetExpand = true;
		}
		if (Cookies) {
			Cookies.set(app.themePanel.cookieName, targetExpand);
		}
	});
	
	// 11.2 Theme Panel - Page Load Cookies 
	if (Cookies) {
		var themePanelExpand = Cookies.get(app.themePanel.cookieName);
		
		if (themePanelExpand == 'true') {
			$('['+ app.themePanel.toggleAttr +']').trigger('click');
		}
	}
	
	// 11.3 Theme Panel - Theme Selector
	$(document).on('click', '.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']', function() {
		var targetThemeClass = $(this).attr(app.themePanel.theme.classAttr);
		
		for (var x = 0; x < document.body.classList.length; x++) {
			var targetClass = document.body.classList[x];
			if (targetClass.search('theme-') > -1) {
				$('body').removeClass(targetClass);
			}
		}
		
		$('body').addClass(targetThemeClass);
		$('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']').not(this).closest('.'+ app.themePanel.themeListItemCLass).removeClass(app.themePanel.theme.activeClass);
		$(this).closest('.'+ app.themePanel.themeListItemCLass).addClass(app.themePanel.theme.activeClass);
		
		if (Cookies) {
			Cookies.set(app.themePanel.theme.cookieName, targetThemeClass);
			$(document).trigger('theme-change');
		}
	});

	// 11.4 Theme Panel - Header Theme
	$(document).on('change', '.'+ app.themePanel.class +' ['+ app.themePanel.themeHeader.toggleAttr +']', function() {
		var targetCookie = '';
		
		if ($(this).is(':checked')) {
			$('.'+ app.header.class).addClass(app.themePanel.themeHeader.class);
			targetCookie = app.themePanel.themeHeader.class;
		} else {
			$('.'+ app.header.class).removeClass(app.themePanel.themeHeader.class);
		}
		
		if (Cookies) {
			Cookies.set(app.themePanel.themeHeader.cookieName, targetCookie);
		}
	});
    
	// 11.5 Theme Panel - Header Fixed
	$(document).on('change', '.'+ app.themePanel.class +' ['+ app.themePanel.themeHeaderFixed.toggleAttr +']', function() {
		var headerFixed = '';
		
		if ($(this).is(':checked')) {
			$(app.id).addClass(app.themePanel.themeHeaderFixed.class);
			headerFixed = app.themePanel.themeHeaderFixed.class;
		} else {
			if ($('['+ app.themePanel.themeSidebarFixed.toggleAttr +']').is(':checked') && !app.isMobile) {
				alert(app.themePanel.themeHeaderFixed.errorMessage);
				
				$('['+ app.themePanel.themeSidebarFixed.toggleAttr +']').prop('checked', false);
				$('['+ app.themePanel.themeSidebarFixed.toggleAttr +']').trigger('change');
			}
			$(app.id).removeClass(app.themePanel.themeHeaderFixed.class);
			headerFixed = app.themePanel.themeHeaderFixed.disabledClass;
		}
		if (Cookies) {
			Cookies.set(app.themePanel.themeHeaderFixed.cookieName, headerFixed);
		}
	});

	// 11.5 Theme Panel - Sidebar Grid
	$(document).on('change', '.'+ app.themePanel.class +' ['+ app.themePanel.themeSidebarGrid.toggleAttr +']', function() {
		var sidebarGrid = '';
		if ($(this).is(':checked')) {
			$(app.sidebar.id).addClass(app.themePanel.themeSidebarGrid.class);
			sidebarGrid = app.themePanel.themeSidebarGrid.class;
		} else {
			$(app.sidebar.id).removeClass(app.themePanel.themeSidebarGrid.class);
		}
		
		if (Cookies) {
			Cookies.set(app.themePanel.themeSidebarGrid.cookieName, sidebarGrid);
		}
	});
  
  // 11.6 Theme Panel - Sidebar Fixed
	$(document).on('change', '.'+ app.themePanel.class +' ['+ app.themePanel.themeSidebarFixed.toggleAttr +']', function() {
		var sidebarFixed = '';
		var targetSidebar = '.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') ['+ app.scrollBar.attr +']';
		
		if (!app.isMobile) {
			if ($(this).is(':checked')) {
				if (!$('.'+ app.themePanel.class +' ['+ app.themePanel.themeHeaderFixed.toggleAttr +']').is(':checked')) {
					alert(app.themePanel.themeSidebarFixed.errorMessage);
					$(app.themePanel.themeHeaderFixed.toggleAttr).prop('checked', true);
					$(app.themePanel.themeHeaderFixed.toggleAttr).trigger('change');
					$(app.id).addClass(app.themePanel.themeHeaderFixed.class);
				}
				$(app.id).addClass(app.themePanel.themeSidebarFixed.class);
				generateScrollbar(document.querySelector(targetSidebar));
				sidebarFixed = app.themePanel.themeSidebarFixed.class;
			} else {
				$(app.id).removeClass(app.themePanel.themeSidebarFixed.class);
				
				app.sidebar.scrollBar.dom.destroy();
				app.sidebar.scrollBar.dom = '';
				sidebarFixed = app.themePanel.themeSidebarFixed.disabledClass;
				$(targetSidebar).removeAttr(app.scrollBar.initAttr);
			}
		
			if (Cookies) {
				Cookies.set(app.themePanel.themeSidebarFixed.cookieName, sidebarFixed);
			}
		} else {
			$(this).prop('checked', true);
			alert(app.themePanel.themeSidebarFixed.mobileErrorMessage);
		}
	});

	// 11.7 Theme Panel - Gradient Enabled
	$(document).on('change', '.'+ app.themePanel.class +' ['+ app.themePanel.themeGradientEnabled.toggleAttr +']', function() {
		var gradientEnabled = '';
		if ($(this).is(':checked')) {
			$(app.id).addClass(app.themePanel.themeGradientEnabled.class);
			gradientEnabled = app.themePanel.themeGradientEnabled.class;
		} else {
			$(app.id).removeClass(app.themePanel.themeGradientEnabled.class);
		}
		
		if (Cookies) {
			Cookies.set(app.themePanel.themeGradientEnabled.cookieName, gradientEnabled);
		}
	});

	// 11.8 Theme Panel - Dark Mode
	$(document).on('change', '.'+ app.themePanel.class +' ['+ app.themePanel.themeDarkMode.toggleAttr +']', function() {
		var targetCookie = '';
		
		if ($(this).is(':checked')) {
			$('html').addClass(app.themePanel.themeDarkMode.class);
			targetCookie = app.themePanel.themeDarkMode.class;
		} else {
			$('html').removeClass(app.themePanel.themeDarkMode.class);
		}
		
		if (Cookies) {
			App.initVariable();
			Cookies.set(app.themePanel.themeDarkMode.cookieName, targetCookie);
			$(document).trigger('theme-change');
		}
	});
	
	// 11.9 Theme Panel - Page Load Settings Cookies  
	if (Cookies) {
		if (Cookies.get(app.themePanel.theme.cookieName)) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']' + '['+ app.themePanel.theme.classAttr +'="'+ Cookies.get(app.themePanel.theme.cookieName) +'"]').trigger('click');
		}
		if (Cookies.get(app.themePanel.themeHeader.cookieName)) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.themeHeader.toggleAttr +']').prop('checked', true).trigger('change');
		}
		if (Cookies.get(app.themePanel.themeSidebarGrid.cookieName)) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.themeSidebarGrid.toggleAttr +']').prop('checked', true).trigger('change');
		}
		if (Cookies.get(app.themePanel.themeGradientEnabled.cookieName)) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.themeGradientEnabled.toggleAttr +']').prop('checked', true).trigger('change');
		}
		if (Cookies.get(app.themePanel.themeSidebarFixed.cookieName) && Cookies.get(app.themePanel.themeSidebarFixed.cookieName) == app.themePanel.themeSidebarFixed.disabledClass) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.themeSidebarFixed.toggleAttr +']').prop('checked', false).trigger('change');
		}
		if (Cookies.get(app.themePanel.themeHeaderFixed.cookieName) && Cookies.get(app.themePanel.themeHeaderFixed.cookieName) == app.themePanel.themeHeaderFixed.disabledClass) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.themeHeaderFixed.toggleAttr +']').prop('checked', false).trigger('change');
		}
		if (Cookies.get(app.themePanel.themeDarkMode.cookieName)) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.themeDarkMode.toggleAttr +']').prop('checked', true).trigger('change');
		}
	}
};


/* 12. Handle Save Panel Position Function
------------------------------------------------ */
var handleSavePanelPosition = function(element) {
	"use strict";
	if ($('.' + app.panel.sortable.class).length !== 0) {
		var newValue = [];
		var index = 0;
		$.when($('.' + app.panel.sortable.class).each(function() {
			var panelSortableElement = $(this).find('['+ app.panel.sortable.attr +']');
			if (panelSortableElement.length !== 0) {
				var columnValue = [];
				$(panelSortableElement).each(function() {
					var targetSortId = $(this).attr(app.panel.sortable.attr);
					columnValue.push({id: targetSortId});
				});
				newValue.push(columnValue);
			} else {
				newValue.push([]);
			}
			index++;
		})).done(function() {
			var targetPage = window.location.href;
			    targetPage = targetPage.split('?');
			    targetPage = targetPage[0];
			localStorage.setItem(targetPage, JSON.stringify(newValue));
			$(element).find('['+ app.panel.sortable.spinnerAttr +']').delay(500).fadeOut(500, function() {
				$(this).remove();
			});
		});
	}
};


/* 13. Handle Draggable Panel Local Storage Function
------------------------------------------------ */
var handleLocalStorage = function() {
	"use strict";
	try {
		if (typeof(Storage) !== 'undefined' && typeof(localStorage) !== 'undefined') {
			var targetPage = window.location.href;
					targetPage = targetPage.split('?');
					targetPage = targetPage[0];
			var panelPositionData = localStorage.getItem(targetPage);

			if (panelPositionData) {
				panelPositionData = JSON.parse(panelPositionData);
				var i = 0;
				$.when($('.'+ app.panel.class +':not(['+ app.panel.sortable.disableAttr +'])').parent('['+ app.panel.sortable.parentAttr +']').each(function() {
					var storageData = panelPositionData[i]; 
					var targetColumn = $(this);
					if (storageData) {
						$.each(storageData, function(index, data) {
							var targetId = $('['+ app.panel.sortable.attr +'="'+ data.id +'"]').not('[data-init="true"]');
							if ($(targetId).length !== 0) {
								var targetHtml = $(targetId).clone();
								$(targetId).remove();
								$(targetColumn).append(targetHtml);
								$('['+ app.panel.sortable.attr +'="'+ data.id +'"]').attr('data-init','true');
							}
						});
					}
					i++;
				})).done(function() {
					window.dispatchEvent(new CustomEvent(app.panel.localStorage.loadedEvent));
				});
			}
		} else {
			alert(app.panel.localStorage.notSupportMessage); 
		}
	} catch (error) {
		console.log(error);
	}
};


/* 14. Handle Reset Local Storage
------------------------------------------------ */
var handleResetLocalStorage = function() {
	"use strict";
	$(document).on('click', '['+ app.panel.localStorage.reset.attr +']', function(e) {
		e.preventDefault();

		var targetModalHtml = ''+
		'<div class="modal fade" data-modal-id="'+ app.panel.localStorage.reset.modal.id +'">'+
		'    <div class="modal-dialog">'+
		'        <div class="modal-content">'+
		'            <div class="modal-header">'+
		'                <h4 class="modal-title"><i class="fa fa-redo me-1"></i> '+ app.panel.localStorage.reset.modal.title +'</h4>'+
		'                <button type="button" class="btn-close" '+ app.bootstrap.modal.dismissAttr +'></button>'+
		'            </div>'+
		'            <div class="modal-body">'+
		'                <div class="alert alert-'+ app.panel.localStorage.reset.modal.alert +' mb-0">'+ app.panel.localStorage.reset.modal.message +'</div>'+
		'            </div>'+
		'            <div class="modal-footer">'+
		'                <a href="javascript:;" class="btn btn-sm btn-default" '+ app.bootstrap.modal.dismissAttr +'><i class="fa fa-times me-1"></i> No</a>'+
		'                <a href="javascript:;" class="btn btn-sm btn-inverse" '+ app.panel.localStorage.reset.modal.confirmResetAttr +'><i class="fa fa-check me-1"></i> Yes</a>'+
		'            </div>'+
		'        </div>'+
		'    </div>'+
		'</div>';

		$('body').append(targetModalHtml);
		$('[data-modal-id="'+ app.panel.localStorage.reset.modal.id +'"]').modal('show');
	});
	$(document).on(app.bootstrap.modal.event.hidden, '[data-modal-id="'+ app.panel.localStorage.reset.modal.id +'"]', function(e) {
		$('[data-modal-id="'+ app.panel.localStorage.reset.modal.id +'"]').remove();
	});
	$(document).on('click', '['+ app.panel.localStorage.reset.modal.confirmResetAttr +']', function(e) {
		e.preventDefault();
		var localStorageName = window.location.href;
		localStorageName = localStorageName.split('?');
		localStorageName = localStorageName[0];
		localStorage.removeItem(localStorageName);

		location.reload();
	});
};


/* 15. Handle Unlimited Nav Tabs
------------------------------------------------ */
var handleUnlimitedTabsRender = function() {
    
	// function handle tab overflow scroll width 
	function handleTabOverflowScrollWidth(obj, animationSpeed) {
		var targetElm = '.'+ app.bootstrap.nav.tabs.itemClass + ' .'+ app.bootstrap.nav.tabs.activeClass;

		if ($(obj).find(' > .'+ app.bootstrap.nav.tabs.itemClass).first()) {
			targetElm = $(obj).find('.'+ app.bootstrap.nav.tabs.itemClass + ' .'+ app.bootstrap.nav.tabs.activeClass).closest('.'+ app.bootstrap.nav.tabs.itemClass);
		}
		var targetCss = ($('body').css('direction') == 'rtl') ? 'margin-right' : 'margin-left';
		var marginLeft = parseInt($(obj).css(targetCss));  
		var viewWidth = $(obj).width();
		var prevWidth = $(obj).find(targetElm).width();
		var speed = (animationSpeed > -1) ? animationSpeed : 150;
		var fullWidth = 0;

		$(obj).find(targetElm).prevAll().each(function() {
			prevWidth += $(this).width();
		});

		$(obj).find('.'+ app.bootstrap.nav.tabs.itemClass).each(function() {
			fullWidth += $(this).width();
		});

		if (prevWidth >= viewWidth) {
			var finalScrollWidth = prevWidth - viewWidth;
			if (fullWidth != prevWidth) {
				finalScrollWidth += 40;
			}
			if ($('body').css('direction') == 'rtl') {
				$(obj).find('.'+ app.bootstrap.nav.tabs.class).animate({ marginRight: '-' + finalScrollWidth + 'px'}, speed);
			} else {
				$(obj).find('.'+ app.bootstrap.nav.tabs.class).animate({ marginLeft: '-' + finalScrollWidth + 'px'}, speed);
			}
		}

		if (prevWidth != fullWidth && fullWidth >= viewWidth) {
			$(obj).addClass(app.unlimitedTabs.overflowRight.class);
		} else {
			$(obj).removeClass(app.unlimitedTabs.overflowRight.class);
		}

		if (prevWidth >= viewWidth && fullWidth >= viewWidth) {
			$(obj).addClass(app.unlimitedTabs.overflowLeft.class);
		} else {
			$(obj).removeClass(app.unlimitedTabs.overflowLeft.class);
		}
	}
    
	// function handle tab button action - next / prev
	function handleTabButtonAction(element, direction) {
		var obj = $(element).closest('.' + app.unlimitedTabs.class);
		var targetCss = ($('body').css('direction') == 'rtl') ? 'margin-right' : 'margin-left';
		var marginLeft = parseInt($(obj).find('.'+ app.bootstrap.nav.tabs.class).css(targetCss));  
		var containerWidth = $(obj).width();
		var totalWidth = 0;
		var finalScrollWidth = 0;

		$(obj).find('li').each(function() {
			if (!$(this).hasClass(app.unlimitedTabs.buttonNext.class) && !$(this).hasClass(app.unlimitedTabs.buttonPrev.class)) {
				totalWidth += $(this).width();
			}
		});

		switch (direction) {
			case 'next':
				var widthLeft = totalWidth + marginLeft - containerWidth;
				if (widthLeft <= containerWidth) {
					finalScrollWidth = widthLeft - marginLeft;
					setTimeout(function() {
						$(obj).removeClass(app.unlimitedTabs.overflowRight.class);
					}, 150);
				} else {
					finalScrollWidth = containerWidth - marginLeft - 80;
				}

				if (finalScrollWidth !== 0) {
					if ($('body').css('direction') != 'rtl') {
						$(obj).find('.'+ app.bootstrap.nav.tabs.class).animate({ marginLeft: '-' + finalScrollWidth + 'px'}, 150, function() {
							$(obj).addClass(app.unlimitedTabs.overflowLeft.class);
						});
					} else {
						$(obj).find('.'+ app.bootstrap.nav.tabs.class).animate({ marginRight: '-' + finalScrollWidth + 'px'}, 150, function() {
							$(obj).addClass(app.unlimitedTabs.overflowLeft.class);
						});
					}
				}
			break;
		case 'prev':
			var widthLeft = -marginLeft;

			if (widthLeft <= containerWidth) {
				$(obj).removeClass(app.unlimitedTabs.overflowLeft.class);
				finalScrollWidth = 0;
			} else {
				finalScrollWidth = widthLeft - containerWidth + 80;
			}
			if ($('body').css('direction') != 'rtl') {
				$(obj).find('.'+ app.bootstrap.nav.tabs.class).animate({ marginLeft: '-' + finalScrollWidth + 'px'}, 150, function() {
					$(obj).addClass(app.unlimitedTabs.overflowRight.class);
				});
			} else {
				$(obj).find('.'+ app.bootstrap.nav.tabs.class).animate({ marginRight: '-' + finalScrollWidth + 'px'}, 150, function() {
					$(obj).addClass(app.unlimitedTabs.overflowRight.class);
				});
			}
			break;
		}
	}

	// handle page load active tab focus
	function handlePageLoadTabFocus() {
		$('.' + app.unlimitedTabs.class).each(function() {
			handleTabOverflowScrollWidth(this, 0);
		});
	}

	// handle tab next button click action
	$('['+ app.unlimitedTabs.buttonNext.toggleAttr + ']').click(function(e) {
		e.preventDefault();
		handleTabButtonAction(this,'next');
	});

	// handle tab prev button click action
	$('['+ app.unlimitedTabs.buttonPrev.toggleAttr + ']').click(function(e) {
		e.preventDefault();
		handleTabButtonAction(this,'prev');
	});

	// handle unlimited tabs responsive setting
	$(window).resize(function() {
		$('.'+ app.unlimitedTabs.class +' .'+ app.bootstrap.nav.tabs.class).removeAttr('style');
		handlePageLoadTabFocus();
	});

	handlePageLoadTabFocus();
};


/* 16. Handle Top Menu - Unlimited Top Menu Render
------------------------------------------------ */
var handleUnlimitedTopMenuRender = function() {
	"use strict";
	// function handle menu button action - next / prev
	function handleMenuButtonAction(element, direction) {
		var obj = $(element).closest('.' + app.topMenu.menu.class);
		var targetCss = ($('body').css('direction') == 'rtl') ? 'margin-right' : 'margin-left';
		var marginLeft = parseInt($(obj).css(targetCss));  
		var containerWidth = $('.'+ app.topMenu.class).width() - 88;
		var totalWidth = 0;
		var finalScrollWidth = 0;

		$(obj).find('.' + app.topMenu.menu.itemClass).each(function() {
			if (!$(this).hasClass(app.topMenu.control.class)) {
				totalWidth += $(this).width();
			}
		});

		switch (direction) {
			case 'next':
				var widthLeft = totalWidth + marginLeft - containerWidth;
				if (widthLeft <= containerWidth) {
					finalScrollWidth = widthLeft - marginLeft + 128;
					setTimeout(function() {
						$(obj).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonNext.class).removeClass('show');
					}, 150);
				} else {
					finalScrollWidth = containerWidth - marginLeft - 128;
				}

				if (finalScrollWidth !== 0) {
					if ($('body').css('direction') != 'rtl') { 
						$(obj).animate({ marginLeft: '-' + finalScrollWidth + 'px'}, 150, function() {
							$(obj).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonPrev.class).addClass('show');
						});
					} else {
						$(obj).animate({ marginRight: '-' + finalScrollWidth + 'px'}, 150, function() {
							$(obj).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonPrev.class).addClass('show');
						});
					}
				}
				break;
			case 'prev':
				var widthLeft = -marginLeft;

				if (widthLeft <= containerWidth) {
					$(obj).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonPrev.class).removeClass('show');
					finalScrollWidth = 0;
				} else {
					finalScrollWidth = widthLeft - containerWidth + 88;
				}
				if ($('body').css('direction') != 'rtl') { 
					$(obj).animate({ marginLeft: '-' + finalScrollWidth + 'px'}, 150, function() {
						$(obj).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonNext.class).addClass('show');
					});
				} else {
					$(obj).animate({ marginRight: '-' + finalScrollWidth + 'px'}, 150, function() {
						$(obj).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonNext.class).addClass('show');
					});
				}
				break;
			}
	}

	// handle page load active menu focus
	function handlePageLoadMenuFocus() {
		var targetMenu = $('.'+ app.topMenu.class +' .'+ app.topMenu.menu.class);
		var targetList = $('.'+ app.topMenu.class +' .'+ app.topMenu.menu.class + ' > .' + app.topMenu.menu.itemClass);
		var targetActiveList = $('.'+ app.topMenu.class +' .'+ app.topMenu.menu.class + ' > .'+ app.topMenu.menu.itemClass +'.active');
		var targetContainer = $('.'+ app.topMenu.class +'');
		var targetCss = ($('body').css('direction') == 'rtl') ? 'margin-right' : 'margin-left';
		var marginLeft = parseInt($(targetMenu).css(targetCss));  
		var viewWidth = $(targetContainer).width() - 128;
		var prevWidth = $('.'+ app.topMenu.class +' .'+ app.topMenu.menu.class + ' > .'+ app.topMenu.menu.itemClass +'.active').width();
		var speed = 0;
		var fullWidth = 0;

		$(targetActiveList).prevAll().each(function() {
			prevWidth += $(this).width();
		});

		$(targetList).each(function() {
			if (!$(this).hasClass(app.topMenu.control.class)) {
				fullWidth += $(this).width();
			}
		});

		if (prevWidth >= viewWidth) {
			var finalScrollWidth = prevWidth - viewWidth + 128;
			if ($('body').css('direction') != 'rtl') { 
				$(targetMenu).animate({ marginLeft: '-' + finalScrollWidth + 'px'}, speed);
			} else {
				$(targetMenu).animate({ marginRight: '-' + finalScrollWidth + 'px'}, speed);
			}
		}

		if (prevWidth != fullWidth && fullWidth >= viewWidth) {
			$(targetMenu).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonNext.class).addClass(app.topMenu.control.showClass);
		} else {
			$(targetMenu).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonNext.class).removeClass(app.topMenu.control.showClass);
		}

		if (prevWidth >= viewWidth && fullWidth >= viewWidth) {
			$(targetMenu).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonPrev.class).addClass(app.topMenu.control.showClass);
		} else {
			$(targetMenu).find('.'+ app.topMenu.control.class +'.'+ app.topMenu.control.buttonPrev.class).removeClass(app.topMenu.control.showClass);
		}
	}

	// handle menu next button click action
	$('['+ app.topMenu.control.buttonNext.toggleAttr +']').click(function(e) {
		e.preventDefault();
		handleMenuButtonAction(this,'next');
	});

	// handle menu prev button click action
	$('['+ app.topMenu.control.buttonPrev.toggleAttr +']').click(function(e) {
		e.preventDefault();
		handleMenuButtonAction(this,'prev');
	});

	// handle unlimited menu responsive setting
	$(window).resize(function() {
		if ($(window).width() > 767) {
			$('.'+ app.topMenu.class +' .'+ app.topMenu.menu.class).removeAttr('style');
			handlePageLoadMenuFocus();
		} else {
			$('.'+ app.topMenu.class +' .'+ app.topMenu.menu.class).removeAttr('style');
		}
	});

	handlePageLoadMenuFocus();
};


/* 17. Handle Top Menu - Sub Menu Toggle
------------------------------------------------ */
var handleTopMenuSubMenu = function() {
	"use strict";
	
	$(document).on('click', '.'+ app.topMenu.class +' .'+ app.topMenu.menu.submenu.class +' .'+ app.topMenu.menu.hasSubClass +' > .'+ app.topMenu.menu.linkClass, function() {
		var target = $(this).closest('.' + app.topMenu.menu.itemClass).find('.' + app.topMenu.menu.submenu.class).first();
		var otherMenu = $(this).closest('.'+ app.topMenu.menu.itemClass).find('.'+ app.topMenu.menu.submenu.class).not(target);
		$(otherMenu).not(target).slideUp(250, function() {
			$(this).closest('.'+ app.topMenu.menu.itemClass).removeClass(app.topMenu.menu.expandClass);
		});
		$(target).slideToggle(250, function() {
			var targetMenu = $(this).closest('.'+ app.topMenu.menu.itemClass);
			if ($(targetMenu).hasClass(app.topMenu.menu.expandClass)) {
				$(targetMenu).removeClass(app.topMenu.menu.expandClass);
			} else {
				$(targetMenu).addClass(app.topMenu.menu.expandClass);
			}
		});
	});
};


/* 18. Handle Top Menu - Mobile Sub Menu Toggle
------------------------------------------------ */
var handleMobileTopMenuSubMenu = function() {
	"use strict";
	$(document).on('click', '.'+ app.topMenu.class +' .'+ app.topMenu.menu.class +' > .'+ app.topMenu.menu.itemClass +'.'+ app.topMenu.menu.hasSubClass +' > .'+ app.topMenu.menu.linkClass +'', function() {
		if ($(window).width() <= 767) {
			var target = $(this).closest('.' + app.topMenu.menu.itemClass).find('.' + app.topMenu.menu.submenu.class).first();
			var otherMenu = $(this).closest('.'+ app.topMenu.menu.class).find('.' + app.topMenu.menu.hasSubClass + ' .'+ app.topMenu.menu.submenu.class).not(target);
			$(otherMenu).not(target).slideUp(250, function() {
				$(this).closest('.' + app.topMenu.menu.itemClass).removeClass('expand');
			});
			$(target).slideToggle(250, function() {
				var targetItem = $(this).closest('.'+ app.topMenu.menu.itemClass);
				if ($(targetItem).hasClass(app.topMenu.menu.expandClass)) {
					$(targetItem).removeClass(app.topMenu.menu.expandClass);
				} else {
					$(targetItem).addClass(app.topMenu.menu.expandClass);
				}
			});
		}
	});
};


/* 19. Handle Top Menu - Mobile Top Menu Toggle
------------------------------------------------ */
var handleTopMenuMobileToggle = function() {
	"use strict";
	$(document).on('click', '['+ app.topMenu.mobile.toggleAttr +']', function() {
		$('.'+ app.topMenu.class).slideToggle(250);
	});
};


/* 20. Handle Page Scroll Class
------------------------------------------------ */
var handlePageScrollClass = function() {
	var checkScroll = function() {
		if ($(window).scrollTop() > 0) {
			$(app.id).addClass(app.header.hasScrollClass);
		} else {
			$(app.id).removeClass(app.header.hasScrollClass);
		}
	}
	
	$(window).on('scroll', function() {
		checkScroll();
	});
	
	checkScroll();
};


/* 21. Handle Toggle Navbar Profile
------------------------------------------------ */
var handleToggleNavProfile = function() {
	var expandTime = ($('.'+ app.sidebar.class).attr(app.sidebar.menu.disableAnimationAttr)) ? 0 : app.sidebar.menu.animationTime;

	$(document).on('click', '['+ app.sidebar.profile.toggleAttr +']', function(e) {
		e.preventDefault();

		var targetMenu = $(this).closest('.'+ app.sidebar.profile.class);
		var targetProfile = $(this).attr(app.sidebar.profile.targetAttr);

		if ($(targetProfile).is(':visible')) {
			$(targetMenu).removeClass(app.sidebar.menu.activeClass);
			$(targetProfile).removeClass(app.sidebar.menu.closingClass);
		} else {
			$(targetMenu).addClass(app.sidebar.menu.activeClass);
			$(targetProfile).addClass(app.sidebar.menu.expandingClass);
		}
		$(targetProfile).slideToggle(expandTime, function() {
			if (!$(targetProfile).is(':visible')) {
				$(targetProfile).addClass(app.sidebar.menu.closedClass);
				$(targetProfile).removeClass(app.sidebar.menu.expandClass);
			} else {
				$(targetProfile).addClass(app.sidebar.menu.expandClass);
				$(targetProfile).removeClass(app.sidebar.menu.closedClass);
			}
			$(targetProfile).removeClass(app.sidebar.menu.expandingClass + ' ' + app.sidebar.menu.closingClass);
		});
	});
};


/* 22. Handle Sidebar Scroll Memory
------------------------------------------------ */
var handleSidebarScrollMemory = function() {
	if (!app.isMobile) {
		try {
			if (typeof(Storage) !== 'undefined' && typeof(localStorage) !== 'undefined') {
				$('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') ['+ app.scrollBar.attr +']').on('scroll', function() {
					localStorage.setItem(app.sidebar.scrollBar.localStorage, $(this).scrollTop());
				});
	
				var defaultScroll = localStorage.getItem(app.sidebar.scrollBar.localStorage);
				if (defaultScroll) {
					$('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') ['+ app.scrollBar.attr +']').animate({ scrollTop: defaultScroll + 'px'}, 0);
				}
			}
		} catch (error) {
			console.log(error);
		}
	}
};


/* 23. Handle Sidebar Minify Sub Menu
------------------------------------------------ */
var handleMouseoverFloatSubMenu = function(elm) {
	clearTimeout(app.sidebar.floatSubmenu.timeout);
};
var handleMouseoutFloatSubMenu = function(elm) {
	app.sidebar.floatSubmenu.timeout = setTimeout(function() {
		$(app.sidebar.floatSubmenu.id).remove();
	}, 150);
};
var handleGetHiddenMenuHeight = function(elm) {
	var prevStyle = $(elm).attr('style');
	$(elm).attr('style', 'position: absolute; visibility: hidden; display: block !important');
	var targetHeight  = $(elm).height();
	$(elm).attr('style', '');
	
	return targetHeight;
}
var handleSidebarMinifyFloatMenu = function() {
	$(document).on('click', app.sidebar.floatSubmenu.id +' .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass +'', function(e) {
		var target = $(this).next('.' + app.sidebar.menu.submenu.class);
		var targetItem = $(target).closest('.' + app.sidebar.menu.itemClass);
		var close = false;
		var expand = false;
		if ($(target).is(':visible')) {
			$(targetItem).addClass('closing');
			close = true;
		} else {
			$(targetItem).addClass('expanding');
			expand = true;
		}
		$(target).slideToggle({
			duration: app.sidebar.menu.animationTime,
			progress: function() {
				var targetMenu = $(app.sidebar.floatSubmenu.id);
				var targetHeight = $(targetMenu).height();
				var targetOffset = $(targetMenu).offset();
				var targetOriTop = $(targetMenu).attr('data-offset-top');
				var targetMenuTop = $(targetMenu).attr('data-menu-offset-top');
				var targetTop 	 = targetOffset.top - $(window).scrollTop();
				var windowHeight = $(window).height();
				if (close) {
					if (targetTop > targetOriTop) {
						targetTop = (targetTop > targetOriTop) ? targetOriTop : targetTop;
						$(app.sidebar.floatSubmenu.id).css({ 'top': targetTop + 'px', 'bottom': 'auto' });
						$(app.sidebar.floatSubmenu.arrow.id).css({ 'top': '20px', 'bottom': 'auto' });
						$(app.sidebar.floatSubmenu.line.id).css({ 'top': '20px', 'bottom': 'auto' });
					}
				}
				if (expand) {
					if ((windowHeight - targetTop) < targetHeight) {
						var arrowBottom = (windowHeight - targetMenuTop) - 22;
						$(app.sidebar.floatSubmenu.id).css({ 'top': 'auto', 'bottom': 0 });
						$(app.sidebar.floatSubmenu.arrow.id).css({ 'top': 'auto', 'bottom': arrowBottom + 'px' });
						$(app.sidebar.floatSubmenu.line.id).css({ 'top': '20px', 'bottom': arrowBottom + 'px' });
					}
				}
			},
			complete: function() {
				if ($(target).is(':visible')) {
					$(targetItem).addClass('expand');
					$(targetItem).removeClass('closed');
				} else {
					$(targetItem).addClass('closed');
					$(targetItem).removeClass('expand');
				}
				$(targetItem).removeClass('closing expanding');
			}
		});
	});
	$(document).on({
		mouseenter: function() {
			if ($(app.id).hasClass(app.sidebar.minify.toggledClass)) {
				clearTimeout(app.sidebar.floatSubmenu.timeout);

				var targetMenu = $(this).closest('.'+ app.sidebar.menu.itemClass).find('.' + app.sidebar.menu.submenu.class).first();
				if (app.sidebar.floatSubmenu.dom == this && $(app.sidebar.floatSubmenu.id).length !== 0) {
					return;
				} else {
					app.sidebar.floatSubmenu.dom = this;
				}
				var targetMenuHtml = $(targetMenu).html();
				if (targetMenuHtml) {
					var sidebarOffset = $(app.sidebar.id).offset();
					var sidebarWidth  = parseInt($(app.sidebar.id).width());
					var sidebarX      = (!$(app.id).hasClass(app.sidebarEnd.class) && $('body').css('direction') != 'rtl') ? (sidebarOffset.left + sidebarWidth) : ($(window).width() - sidebarOffset.left);
					var targetHeight  = handleGetHiddenMenuHeight(targetMenu);
					var targetOffset  = $(this).offset();
					var targetTop     = targetOffset.top - $(window).scrollTop();
					var targetLeft    = (!$(app.id).hasClass(app.sidebarEnd.class) && $('body').css('direction') != 'rtl') ? sidebarX : 'auto';
					var targetRight   = (!$(app.id).hasClass(app.sidebarEnd.class) && $('body').css('direction') != 'rtl') ? 'auto' : sidebarX;
					var windowHeight  = $(window).height();
				
					if ($(app.sidebar.floatSubmenu.id).length === 0) {
						var overflowClass = '';
						if (targetHeight > windowHeight) {
							overflowClass = app.sidebar.floatSubmenu.overflow.class;
						}
						targetMenuHtml = ''+
						'<div class="'+ app.sidebar.floatSubmenu.container.class +'" id="'+ app.sidebar.floatSubmenu.id.replace('#','') +'" data-offset-top="'+ targetTop +'" data-menu-offset-top="'+ targetTop +'" onmouseover="handleMouseoverFloatSubMenu(this)" onmouseout="handleMouseoutFloatSubMenu(this)">'+
						'	<div class="'+ app.sidebar.floatSubmenu.arrow.class +'" id="'+ app.sidebar.floatSubmenu.arrow.id.replace('#', '') +'"></div>'+
						'	<div class="'+ app.sidebar.floatSubmenu.line.class +'" id="'+ app.sidebar.floatSubmenu.line.id.replace('#', '') +'"></div>'+
						'	<div class="'+ app.sidebar.floatSubmenu.class +' '+ overflowClass +'">'+ targetMenuHtml + '</div>'+
						'</div>';
						$(app.id).append(targetMenuHtml);
					} else {
						if (targetHeight > windowHeight) {
							$(app.sidebar.floatSubmenu.id + ' .'+ app.sidebar.floatSubmenu.class).addClass(app.sidebar.floatSubmenu.overflow.class);
						} else {
							$(app.sidebar.floatSubmenu.id + app.sidebar.floatSubmenu.class).removeClass(app.sidebar.floatSubmenu.overflow.class);
						}
						$(app.sidebar.floatSubmenu.id).attr('data-offset-top', targetTop);
						$(app.sidebar.floatSubmenu.id).attr('data-menu-offset-top', targetTop);
						$(app.sidebar.floatSubmenu.id + ' .' + app.sidebar.floatSubmenu.class).html(targetMenuHtml);
					}
				
					var targetHeight = $(app.sidebar.floatSubmenu.id).height();
					if ((windowHeight - targetTop) > targetHeight) {
						$(app.sidebar.floatSubmenu.id).css({
							'top': targetTop,
							'left': targetLeft,
							'bottom': 'auto',
							'right': targetRight
						});
						$(app.sidebar.floatSubmenu.arrow.id).css({ 'top': '20px', 'bottom': 'auto' });
						$(app.sidebar.floatSubmenu.line.id).css({ 'top': '20px', 'bottom': 'auto' });
					} else {
						$(app.sidebar.floatSubmenu.id).css({
							'bottom': 0,
							'top': 'auto',
							'left': targetLeft,
							'right': targetRight
						});
						var arrowBottom = (windowHeight - targetTop) - 21;
						$(app.sidebar.floatSubmenu.arrow.id).css({ 'top': 'auto', 'bottom': arrowBottom + 'px' });
						$(app.sidebar.floatSubmenu.line.id).css({ 'top': '20px', 'bottom': arrowBottom + 'px' });
					}
				} else {
					$(app.sidebar.floatSubmenu.line.id).remove();
					app.sidebar.floatSubmenu.dom = '';
				}
			}
		},
		mouseleave: function() {
			if ($(app.id).hasClass(app.sidebar.minify.toggledClass)) {
				app.sidebar.floatSubmenu.timeout = setTimeout(function() {
					$(app.sidebar.floatSubmenu.line.id).remove();
					app.sidebar.floatSubmenu.dom = '';
				}, 250);
			}
		}
	}, '.' + app.sidebar.class + ' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass +'');
};


/* 24. Handle Ajax Mode
------------------------------------------------ */
var handleAjaxMode = function(setting) {
	var emptyHtml = (setting.emptyHtml) ?  setting.emptyHtml : app.ajax.error.html;
	var defaultUrl = (setting.ajaxDefaultUrl) ? setting.ajaxDefaultUrl : '';
	    defaultUrl = (window.location.hash) ? window.location.hash : defaultUrl;
	
	if (defaultUrl === '') {
		$(app.content.id).html(emptyHtml);
	} else {
		renderAjax(defaultUrl, '', true);
	}
    
	function emptyElement() {
		$(app.ajax.emptyElement).empty();
	}
    
	function clearElement() {
		$(app.ajax.clearElement).remove();
		$(app.sidebar.floatSubmenu.id).remove();
		if ($.fn.DataTable) {
			try {
				$('.dataTable').DataTable().destroy();
			} catch(err) {
			
			}
		}
		if ($(app.id).hasClass(app.sidebar.mobile.toggledClass)) {
			$(app.id).removeClass(app.sidebar.mobile.toggledClass);
		}
	}
	
	function checkSidebarActive(url) {
		var targetElm = app.sidebar.id +' ['+ app.ajax.attr +'][href="'+ url +'"]';
		if ($(targetElm).length !== 0) {
			$(app.sidebar.id + ' .' + app.sidebar.menu.itemClass).removeClass(app.sidebar.menu.activeClass);
			$(targetElm).closest('.' + app.sidebar.menu.itemClass).addClass(app.sidebar.menu.activeClass);
			$(targetElm).parents('.' + app.sidebar.menu.itemClass).addClass(app.sidebar.menu.activeClass);
		}
	}
	
	function checkPushState(url) {
		var targetUrl = url.replace('#','');
		var targetUserAgent = window.navigator.userAgent;
		var isIE = targetUserAgent.indexOf('MSIE ');
	
		if (isIE && (isIE > 0 && isIE < 9)) {
			window.location.href = targetUrl;
		} else {
			history.pushState('', '', '#' + targetUrl);
		}
	}
	
	function checkClearOption() {
		if (app.ajax.clearOption) {
			App.clearPageOption(app.ajax.clearOption);
			app.ajax.clearOption = '';
		}
	}
	
	function checkLoading(load) {
		if (!load) {
			if ($(app.ajax.loader.id).length === 0) {
				$('body').addClass(app.ajax.loader.class);
				$(content.id).append();
			}
		} else {
			$(app.ajax.loader.id).remove();
			$('body').removeClass(app.ajax.loader.class);
		}
	}
	
	function renderAjax(url, elm, disablePushState) {
		Pace.restart();
		
		checkLoading(false);
		clearElement();
		emptyElement();
		checkSidebarActive(url);
		checkClearOption();
		if (!disablePushState) {
			checkPushState(url);
		}
    
		var targetContainer= app.content.id;
		var targetUrl 	   = url.replace('#','');
		var targetType 	   = (setting.ajaxType) ? setting.ajaxType : 'GET';
		var targetDataType = (setting.ajaxDataType) ? setting.ajaxDataType : 'html';
		if (elm) {
			targetDataType = ($(elm).attr('data-type')) ? $(elm).attr('data-type') : targetDataType;
			targetDataDataType = ($(elm).attr('data-data-type')) ? $(elm).attr('data-data-type') : targetDataType;
		}
		
		$.ajax({
			url: targetUrl,
			type: targetType,
			dataType: targetDataType,
			success: function(data) {
				$(targetContainer).html(data);
			},
			error: function(jqXHR, textStatus, errorThrown) {
				$(targetContainer).html(emptyHtml);
			}
		}).done(function() {
			checkLoading(true);
			$('html, body').animate({ scrollTop: 0 }, 0);
			App.initComponent();
		});
	}
	
	$(window).on('hashchange', function() {
		if (window.location.hash) {
			renderAjax(window.location.hash, '', true);
		} else {
			renderAjax(defaultUrl, '', true);
		}
	});
	
	$(document).on('click', '['+ app.ajax.attr +']', function(e) {
		e.preventDefault();
		renderAjax($(this).attr('href'), this);
	});
};
var handleSetPageOption = function(option) {
	if (option.appContentFullHeight) {
		$(app.id).addClass(app.content.fullHeight.class);
	}
	if (option.appSidebarLight) {
		$(app.id).addClass(app.layout.sidebarLight.class);
	}
	if (option.appSidebarEnd) {
		$(app.id).addClass(app.layout.sidebarEnd.class);
	}
	if (option.appSidebarWide) {
		$(app.id).addClass(app.layout.sidebarWide.class);
	}
	if (option.appSidebarMinified) {
		$(app.id).addClass(app.layout.sidebarMinified.class);
	}
	if (option.appSidebarTwo) {
		$(app.header.id + ' ['+ app.sidebarEnd.mobile.toggleAttr +']').removeClass(app.helper.display.none);
		$(app.header.id + ' .'+ app.header.brand.class).removeClass(app.helper.margin.left[0]);
		$(app.id).addClass(app.layout.sidebarTwo.class);
		$(app.id).addClass(app.sidebarEnd.toggledClass);
	}
	if (option.appSidebarTransparent) {
		$(app.sidebar.id).addClass(app.sidebar.transparent.class);
	}
	if (option.appSidebarSearch) {
		$(app.sidebar.id + ' .'+ app.sidebar.search.class).removeClass(app.sidebar.search.hideClass);
	}
	if (option.appTopMenu) {
		$(app.header.id + ' ['+ app.topMenu.mobile.toggleAttr +']').removeClass(app.helper.display.none);
		$(app.id).addClass(app.layout.topMenu.class);
	}
	if (option.appWithoutHeader) {
		$(app.id).addClass(app.layout.withoutHeader.class);
		$(app.header.id).css('display', 'none');
	}
	if (option.appWithoutSidebar) {
		$(app.id).addClass(app.layout.withoutSidebar.class);
		$(app.header.id + ' ['+ app.sidebar.mobile.toggleAttr +']').addClass(app.helper.display.none);
		$(app.sidebar.id + ', .' + app.sidebar.bg.class + ', .'+ app.sidebar.mobile.backdrop.class).css('display', 'none');
	}
	if (option.appHeaderInverse) {
		$(app.header.id).addClass(app.header.inverse.class);
	}
	if (option.pageContentFullWidth) {
		$(app.content.id).addClass(app.content.fullWidth.class);
	}
	if (option.appClass) {
		$(app.id).addClass(option.appClass);
	}
	if (option.appContentClass) {
		$(app.content.id).addClass(option.appContentClass);
	}
	if (option.bodyClass) {
		$('body').addClass(option.bodyClass);
	}
	if (option.appBoxedLayout) {
		$('body').addClass(app.layout.boxedLayout.class);
	}
	if (option.clearOptionOnLeave) {
		app.ajax.clearOption = option;
	}
};
var handleClearPageOption = function(option) {
	if (option.appContentFullHeight) {
		$(app.id).removeClass(app.content.fullHeight.class);
	}
	if (option.appSidebarLight) {
		$(app.id).removeClass(app.layout.sidebarLight.class);
	}
	if (option.appSidebarEnd) {
		$(app.id).removeClass(app.layout.sidebarEnd.class);
	}
	if (option.appSidebarWide) {
		$(app.id).removeClass(app.layout.sidebarWide.class);
	}
	if (option.appSidebarMinified) {
		$(app.id).removeClass(app.layout.sidebarMinified.class);
	}
	if (option.appSidebarTwo) {
		$(app.header.id + ' ['+ app.sidebarEnd.mobile.toggleAttr +']').addClass(app.helper.display.none);
		$(app.header.id + ' .'+ app.header.brand.class).addClass(app.helper.margin.left[0]);
		$(app.id).removeClass(app.layout.sidebarTwo.class);
		$(app.id).removeClass(app.sidebarEnd.toggledClass);
	}
	if (option.appSidebarTransparent) {
		$(app.sidebar.id).removeClass(app.sidebar.transparent.class);
	}
	if (option.appSidebarSearch) {
		$(app.sidebar.id + ' .'+ app.sidebar.search.class).addClass(app.sidebar.search.hideClass);
	}
	if (option.appTopMenu) {
		$(app.header.id + ' ['+ app.topMenu.mobile.toggleAttr +']').addClass(app.helper.display.none);
		$(app.id).removeClass(app.layout.topMenu.class);
	}
	if (option.appHeaderInverse) {
		$(app.header.id).removeClass(app.header.inverse.class);
	}
	if (option.appWithoutSidebar) {
		$(app.id).removeClass(app.layout.withoutSidebar.class);
		$(app.header.id + ' ['+ app.sidebar.mobile.toggleAttr +']').removeClass(app.helper.display.none);
		$(app.sidebar.id + ', .' + app.sidebar.bg.class + ', .'+ app.sidebar.mobile.backdrop.class).removeAttr('style');
	}
	if (option.appWithoutHeader) {
		$(app.id).removeClass(app.layout.withoutHeader.class);
		$(app.header.id).removeAttr('style');
	}
	if (option.appContentFullWidth) {
		$(app.content.id).removeClass(app.content.fullWidth.class);
	}
	if (option.appContentClass) {
		$(app.content.id).removeClass(option.appContentClass);
	}
	if (option.appClass) {
		$(app.id).removeClass(option.appClass);
	}
	if (option.bodyClass) {
		$('body').removeClass(option.bodyClass);
	}
	if (option.appBoxedLayout) {
		$('body').removeClass(app.layout.boxedLayout.class);
	}
};


/* 25. Handle Float Navbar Search
------------------------------------------------ */
var handleToggleNavbarSearch = function() {
	$('['+ app.header.floatingForm.toggleAttr +']').click(function(e) {
		e.preventDefault();
		$('.'+ app.header.class).addClass(app.header.floatingForm.toggledClass);
	});

	$('['+ app.header.floatingForm.dismissAttr +']').click(function(e) {
		e.preventDefault();
		$('.'+ app.header.class).removeClass(app.header.floatingForm.toggledClass);
	});
};


/* 26. Handle Animation
------------------------------------------------ */
var convertNumberWithCommas = function(x) {
	return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
};
var checkIsFloat = function(x){
	return Number(x) === x && x % 1 !== 0;
};
var checkIsInt = function(x){
	return Number(x) === x && x % 1 === 0;
};
var countDecimals = function(x) {
	var split = x.toString().split('.');
	 
  return (split[1]) ? split[1].length : 0; 
};
var handleAnimation = function() {
	$('['+ app.animation.attr +']').each(function() {
		var targetAnimate = $(this).attr(app.animation.attr);
		var targetValue = $(this).attr(app.animation.valueAttr);
		
		switch (targetAnimate) {
			case 'width':
				$(this).css('width', targetValue);
				break;
			case 'height':
				$(this).css('height', targetValue);
				break;
			case 'number':
				var targetElm = this;
				var decimal = countDecimals(targetValue);
				var divide = 1;
				var x = decimal;
				while (x > 0) {
					divide *= 10;
					x--;
				}
				
				$({animateNumber: 0}).animate({animateNumber: targetValue}, {
					duration: app.animation.speed,
					easing: app.animation.effect,
					step: function() {
						var number = (Math.ceil(this.animateNumber * divide) / divide).toFixed(decimal);
						var number = convertNumberWithCommas(number);
						$(targetElm).text(number);
					},
					done: function() {
						$(targetElm).text(convertNumberWithCommas(targetValue));
					}
				});
				break;
			case 'class':
				$(this).addClass(targetValue);
				break;
			default:
				break;
		}
	});
};


/* 27. Handle Sidebar Search
------------------------------------------------ */
var handleSidebarSearch = function() {
	$(document).on('keyup', '['+ app.sidebar.search.toggleAttr + ']', function() {
		var targetValue = $(this).val();
				targetValue = targetValue.toLowerCase();
		
		if (targetValue) {
			$('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +':not(.'+ app.sidebar.profile.class +'):not(.'+ app.sidebar.menu.headerClass +'):not(.'+ app.sidebar.search.class +'), .'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') .'+ app.sidebar.menu.submenu.class +' > .'+ app.sidebar.menu.itemClass).addClass(app.sidebar.search.hideClass);
			$('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') .'+ app.sidebar.search.foundClass).removeClass(app.sidebar.search.foundClass);
			$('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') .'+ app.sidebar.menu.expandClass).removeClass(app.sidebar.menu.expandClass);
			$('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +':not(.'+ app.sidebar.profile.class +'):not(.'+ app.sidebar.menu.headerClass +'):not(.'+ app.sidebar.search.class +') > .'+ app.sidebar.menu.itemLinkClass +', .'+ app.sidebar.class +' .'+ app.sidebar.menu.submenu.class +' > .'+ app.sidebar.menu.itemClass +' > .'+ app.sidebar.menu.itemLinkClass +'').each(function() {
				var targetText = $(this).text();
						targetText = targetText.toLowerCase();
				if (targetText.search(targetValue) > -1) {
					$(this).closest('.' + app.sidebar.menu.itemClass).removeClass(app.sidebar.search.hideClass);
					$(this).closest('.' + app.sidebar.menu.itemClass).addClass(app.sidebar.search.foundClass);
					
					if ($(this).closest('.' + app.sidebar.menu.itemClass + '.'+ app.sidebar.menu.hasSubClass).length != 0) {
						$(this).closest('.' + app.sidebar.menu.itemClass + '.'+ app.sidebar.menu.hasSubClass).find('.'+ app.sidebar.menu.submenu.class +' .'+ app.sidebar.menu.itemClass + '.'+ app.sidebar.search.hideClass).removeClass(app.sidebar.search.hideClass);
					}
					if ($(this).closest('.'+ app.sidebar.menu.submenu.class).length != 0) {
						$(this).closest('.'+ app.sidebar.menu.submenu.class).css('display', 'block');
						$(this).closest('.'+ app.sidebar.menu.hasSubClass).removeClass(app.sidebar.search.hideClass).addClass(app.sidebar.menu.expandClass);
						$(this).closest('.'+ app.sidebar.menu.submenu.class).find('.'+ app.sidebar.menu.itemClass +':not(.'+ app.sidebar.search.foundClass +')').addClass(app.sidebar.search.hideClass);
					}
				}
			})
		} else {
			$('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +':not(.'+ app.sidebar.profile.class +'):not(.'+ app.sidebar.menu.headerClass +'):not(.'+ app.sidebar.search.class +').'+ app.sidebar.menu.hasSubClass +' .'+ app.sidebar.menu.submenu.class +'').removeAttr('style');
			$('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +':not(.'+ app.sidebar.profile.class +'):not(.'+ app.sidebar.menu.headerClass +'):not(.'+ app.sidebar.search.class +'), .'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') .'+ app.sidebar.menu.submenu.class +' > .'+ app.sidebar.menu.itemClass +'').removeClass(app.sidebar.search.hideClass);
			$('.'+ app.sidebar.class +':not(.'+ app.sidebarEnd.class +') .'+ app.sidebar.menu.expandClass).removeClass(app.sidebar.menu.expandClass);
		}
	})
};


/* 28. Handle Toggle Class
------------------------------------------------ */
var handleToggleClass = function() {
	$(document).on('click', '['+ app.toggleClass.toggleAttr + ']', function(e) {
		e.preventDefault();
		
		var target = ($(this).attr(app.toggleClass.targetAttr)) ? $(this).attr(app.toggleClass.targetAttr) : '';
		var targetClass = $(this).attr(app.toggleClass.toggleAttr);
		
		if (target) {
			$(target).toggleClass(targetClass);
		}
	});
};


/* 29. Handle Dismiss Class
------------------------------------------------ */
var handleDismissClass = function() {
	$(document).on('click', '['+ app.dismissClass.toggleAttr +']', function(e) {
		e.preventDefault();
		
		var target = ($(this).attr(app.dismissClass.targetAttr)) ? $(this).attr(app.dismissClass.targetAttr) : '';
		var targetClass = $(this).attr(app.dismissClass.toggleAttr);
		
		if (target) {
			$(target).removeClass(targetClass);
		}
	});
};


/* 30. Handle Hex To Rgba
------------------------------------------------ */
var stringToColor = function(str) {
  var hash = 0;
  for (var i = 0; i < str.length; i++) {
    hash = str.charCodeAt(i) + ((hash << 5) - hash);
  }
  var color = '#';
  for (var i = 0; i < 3; i++) {
    var value = (hash >> (i * 8)) & 0xFF;
    color += ('00' + value.toString(16)).substr(-2);
  }
  return color;
};
var hexToRgba = function(hex, transparent = 1, repeat = false) {
	var c;
	if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
			c= hex.substring(1).split('');
			if(c.length== 3){
					c= [c[0], c[0], c[1], c[1], c[2], c[2]];
			}
			c= '0x'+c.join('');
			return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+ transparent +')';
	}
	if (!repeat) {
		hex = stringToColor(hex);
		return hexToRgba(hex, transparent, true);
	}
  throw new Error('Bad Hex');
};


/* 31. Handle Get Css Variable
------------------------------------------------ */
var getCssVariable = function(variable) {
	return window.getComputedStyle(document.body).getPropertyValue(variable).trim();
};


/* Application Controller
------------------------------------------------ */
var App = function () {
	"use strict";
	
	var setting;
	
	return {
		//main function
		init: function (option) {
			if (option) {
				setting = option;
			}
			this.initLocalStorage();
			this.initTopMenu();
			this.initComponent();
			this.initPageLoad();
			this.initSidebar();
			this.initThemePanel();
			this.initVariable();
			this.initDatePicker();
			this.initToolTip();
			$(window).trigger('load');

			if (setting && setting.ajaxMode) {
				this.initAjax();
			}
		},
		settings: function (option) {
			if (option) {
				setting = option;
			}
		},
		initSidebar: function() {
			handleSidebarMenu();
			handleSidebarToggle();
			handleSidebarEndToggle();
			handleSidebarMinify();
			handleSidebarMinifyFloatMenu();
			handleToggleNavProfile();
			handleToggleNavbarSearch();
			handleSidebarSearch();
			
			if (!setting || (setting && !setting.disableSidebarScrollMemory)) {
				handleSidebarScrollMemory();
			}
		},
		initTopMenu: function() {
			handleUnlimitedTopMenuRender();
			handleTopMenuSubMenu();
			handleMobileTopMenuSubMenu();
			handleTopMenuMobileToggle();
		},
		initPageLoad: function() {
			handlePageLoader();
		},
		initComponent: function() {
			if (!setting || (setting && !setting.disableDraggablePanel)) {
				handlePanelDraggable();
			}
			handleScrollbar();
			handleUnlimitedTabsRender();
			handlePanelAction();
			handleScrollToTopButton();
			handlePageScrollClass();
			handleAnimation();
			handleToggleClass();
			handleDismissClass();
			
			if ($(window).width() > 767) {
				handelTooltipPopoverActivation();
			}
		},
		initLocalStorage: function() {
			if (!setting || (setting && !setting.disableLocalStorage)) {
				handleLocalStorage();
			}
		},
		initThemePanel: function() {
			handleThemePanel();
			handleResetLocalStorage();
		},
		initAjax: function() {
			handleAjaxMode(setting);
			$.ajaxSetup({
				cache: true
			});
		},
		initVariable: function() {
			app.color.theme          = getCssVariable('--app-theme');
			app.font.family          = getCssVariable('--bs-body-font-family');
			app.font.size            = getCssVariable('--bs-body-font-size');
			app.font.weight          = getCssVariable('--bs-body-font-weight');
			app.color.componentColor = getCssVariable('--app-component-color');
			app.color.componentBg    = getCssVariable('--app-component-bg');
			app.color.dark           = getCssVariable('--bs-dark');
			app.color.light          = getCssVariable('--bs-light');
			app.color.blue           = getCssVariable('--bs-blue');
			app.color.indigo         = getCssVariable('--bs-indigo');
			app.color.purple         = getCssVariable('--bs-purple');
			app.color.pink           = getCssVariable('--bs-pink');
			app.color.red            = getCssVariable('--bs-red');
			app.color.orange         = getCssVariable('--bs-orange');
			app.color.yellow         = getCssVariable('--bs-yellow');
			app.color.green          = getCssVariable('--bs-green');
			app.color.success        = getCssVariable('--bs-success');
			app.color.teal           = getCssVariable('--bs-teal');
			app.color.cyan           = getCssVariable('--bs-cyan');
			app.color.white          = getCssVariable('--bs-white');
			app.color.gray           = getCssVariable('--bs-gray');
			app.color.lime           = getCssVariable('--bs-lime');
			app.color.gray100        = getCssVariable('--bs-gray-100');
			app.color.gray200        = getCssVariable('--bs-gray-200');
			app.color.gray300        = getCssVariable('--bs-gray-300');
			app.color.gray400        = getCssVariable('--bs-gray-400');
			app.color.gray500        = getCssVariable('--bs-gray-500');
			app.color.gray600        = getCssVariable('--bs-gray-600');
			app.color.gray700        = getCssVariable('--bs-gray-700');
			app.color.gray800        = getCssVariable('--bs-gray-800');
			app.color.gray900        = getCssVariable('--bs-gray-900');
			app.color.black          = getCssVariable('--bs-black');
			
			app.color.themeRgb          = getCssVariable('--app-theme-rgb');
			app.font.familyRgb          = getCssVariable('--bs-body-font-family-rgb');
			app.font.sizeRgb            = getCssVariable('--bs-body-font-size-rgb');
			app.font.weightRgb          = getCssVariable('--bs-body-font-weight-rgb');
			app.color.componentColorRgb = getCssVariable('--app-component-color-rgb');
			app.color.componentBgRgb    = getCssVariable('--app-component-bg-rgb');
			app.color.darkRgb           = getCssVariable('--bs-dark-rgb');
			app.color.lightRgb          = getCssVariable('--bs-light-rgb');
			app.color.blueRgb           = getCssVariable('--bs-blue-rgb');
			app.color.indigoRgb         = getCssVariable('--bs-indigo-rgb');
			app.color.purpleRgb         = getCssVariable('--bs-purple-rgb');
			app.color.pinkRgb           = getCssVariable('--bs-pink-rgb');
			app.color.redRgb            = getCssVariable('--bs-red-rgb');
			app.color.orangeRgb         = getCssVariable('--bs-orange-rgb');
			app.color.yellowRgb         = getCssVariable('--bs-yellow-rgb');
			app.color.greenRgb          = getCssVariable('--bs-green-rgb');
			app.color.successRgb        = getCssVariable('--bs-success-rgb');
			app.color.tealRgb           = getCssVariable('--bs-teal-rgb');
			app.color.cyanRgb           = getCssVariable('--bs-cyan-rgb');
			app.color.whiteRgb          = getCssVariable('--bs-white-rgb');
			app.color.grayRgb           = getCssVariable('--bs-gray-rgb');
			app.color.limeRgb           = getCssVariable('--bs-lime-rgb');
			app.color.gray100Rgb        = getCssVariable('--bs-gray-100-rgb');
			app.color.gray200Rgb        = getCssVariable('--bs-gray-200-rgb');
			app.color.gray300Rgb        = getCssVariable('--bs-gray-300-rgb');
			app.color.gray400Rgb        = getCssVariable('--bs-gray-400-rgb');
			app.color.gray500Rgb        = getCssVariable('--bs-gray-500-rgb');
			app.color.gray600Rgb        = getCssVariable('--bs-gray-600-rgb');
			app.color.gray700Rgb        = getCssVariable('--bs-gray-700-rgb');
			app.color.gray800Rgb        = getCssVariable('--bs-gray-800-rgb');
			app.color.gray900Rgb        = getCssVariable('--bs-gray-900-rgb');
			app.color.blackRgb          = getCssVariable('--bs-black-rgb');
		},
		setPageTitle: function(pageTitle) {
			document.title = pageTitle;
		},
		setPageOption: function(option) {
			handleSetPageOption(option);
		},
		clearPageOption: function(option) {
			handleClearPageOption(option);
		},
		restartGlobalFunction: function() {
			$('.jvectormap-tip, .daterangepicker').remove();
			this.initLocalStorage();
			this.initComponent();
		},
		scrollTop: function() {
			$('html, body').animate({
				scrollTop: $('body').offset().top
			}, 0);
		},
		initDatePicker : function (){
			if ($.fn.datepicker) {
				$('.datepicker').each(function() {
					var $this = $(this);
					var dataDateFormat = $this.attr('data-dateformat') || 'yyyy.mm.dd';

					$this.datepicker({
						todayHighlight: true,
						format : dataDateFormat,
						autoclose: true,
						prevText : '<i class="fa fa-chevron-left"></i>',
						nextText : '<i class="fa fa-chevron-right"></i>',
					});
				})
			}
		},
		initToolTip : function (){
			$('[data-toggle="tooltip"]').tooltip()
		}
  };
}();


function pageSetUp() {
	//App.init();
	/*App.initLocalStorage();
	App.initTopMenu();
	App.initPageLoad();
	App.initSidebar();
	App.initThemePanel();
	App.initVariable();
	App.initComponent();
	 */
	App.initPageLoad();
	App.initDatePicker();
	App.initToolTip();

	$(window).trigger('load');
}

$(document).ready(function() {
	App.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5UZW1wbGF0ZSBOYW1lOiBDb2xvciBBZG1pbiAtIFJlc3BvbnNpdmUgQWRtaW4gRGFzaGJvYXJkIFRlbXBsYXRlIGJ1aWxkIHdpdGggVHdpdHRlciBCb290c3RyYXAgNVxyXG5WZXJzaW9uOiA1LjEuM1xyXG5BdXRob3I6IFNlYW4gTmd1XHJcbldlYnNpdGU6IGh0dHA6Ly93d3cuc2VhbnRoZW1lLmNvbS9jb2xvci1hZG1pbi9cclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0QVBQUyBDT05URU5UIFRBQkxFXHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHQ8IS0tID09PT09PT09IEdMT0JBTCBTQ1JJUFQgU0VUVElORyA9PT09PT09PSAtLT5cclxuXHQwMS4gSGFuZGxlIFNjcm9sbGJhclxyXG5cdDAyLiBIYW5kbGUgU2lkZWJhciBNZW51XHJcblx0MDMuIEhhbmRsZSBTaWRlYmFyIFRvZ2dsZVxyXG5cdDA0LiBIYW5kbGUgU2lkZWJhciBFbmRcclxuXHQwNS4gSGFuZGxlIFNpZGViYXIgTWluaWZpZWRcclxuXHQwNi4gSGFuZGxlIFBhZ2UgTG9hZGVyIFxyXG5cdDA3LiBIYW5kbGUgUGFuZWwgQWN0aW9uXHJcblx0MDguIEhhbmRsZSBQYW5lbCBEcmFnZ2FibGVcclxuXHQwOS4gSGFuZGxlIFRvb2x0aXAgUG9wb3ZlciBBY3RpdmF0aW9uXHJcblx0MTAuIEhhbmRsZSBTY3JvbGwgdG8gVG9wIEJ1dHRvblxyXG5cdDExLiBIYW5kbGUgVGhlbWUgUGFuZWxcclxuXHQxMi4gSGFuZGxlIFNhdmUgUGFuZWwgUG9zaXRpb24gRnVuY3Rpb25cclxuXHQxMy4gSGFuZGxlIERyYWdnYWJsZSBQYW5lbCBMb2NhbCBTdG9yYWdlIEZ1bmN0aW9uXHJcblx0MTQuIEhhbmRsZSBSZXNldCBMb2NhbCBTdG9yYWdlXHJcblx0MTUuIEhhbmRsZSBVbmxpbWl0ZWQgTmF2IFRhYnNcclxuXHQxNi4gSGFuZGxlIFRvcCBNZW51IC0gVW5saW1pdGVkIFRvcCBNZW51IFJlbmRlclxyXG5cdDE3LiBIYW5kbGUgVG9wIE1lbnUgLSBTdWIgTWVudSBUb2dnbGVcclxuXHQxOC4gSGFuZGxlIFRvcCBNZW51IC0gTW9iaWxlIFN1YiBNZW51IFRvZ2dsZVxyXG5cdDE5LiBIYW5kbGUgVG9wIE1lbnUgLSBNb2JpbGUgVG9wIE1lbnUgVG9nZ2xlXHJcblx0MjAuIEhhbmRsZSBQYWdlIFNjcm9sbCBDbGFzc1xyXG5cdDIxLiBIYW5kbGUgVG9nZ2xlIE5hdmJhciBQcm9maWxlXHJcblx0MjIuIEhhbmRsZSBTaWRlYmFyIFNjcm9sbCBNZW1vcnlcclxuXHQyMy4gSGFuZGxlIFNpZGViYXIgTWluaWZ5IFN1YiBNZW51XHJcblx0MjQuIEhhbmRsZSBBamF4IE1vZGVcclxuXHQyNS4gSGFuZGxlIEZsb2F0IE5hdmJhciBTZWFyY2hcclxuXHQyNi4gSGFuZGxlIEFuaW1hdGlvblxyXG5cdDI3LiBIYW5kbGUgU2lkZWJhciBTZWFyY2hcclxuXHQyOC4gSGFuZGxlIFRvZ2dsZSBDbGFzc1xyXG5cdDI5LiBIYW5kbGUgRGlzbWlzcyBDbGFzc1xyXG5cclxuXHQ8IS0tID09PT09PT09IEFQUExJQ0FUSU9OIFNFVFRJTkcgPT09PT09PT0gLS0+XHJcblx0QXBwbGljYXRpb24gQ29udHJvbGxlclxyXG4qL1xyXG52YXIgYXBwID0ge1xyXG5cdGlkOiAnI2FwcCcsXHJcblx0aXNNb2JpbGU6ICgoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB8fCB3aW5kb3cuaW5uZXJXaWR0aCA8IDk5MiksXHJcblx0Ym9vdHN0cmFwOiB7XHJcblx0XHR0b29sdGlwOiB7XHJcblx0XHRcdGF0dHI6ICdkYXRhLWJzLXRvZ2dsZT1cInRvb2x0aXBcIidcclxuXHRcdH0sXHJcblx0XHRwb3BvdmVyOiB7XHJcblx0XHRcdGF0dHI6ICdkYXRhLWJzLXRvZ2dsZT1cInBvcG92ZXJcIidcclxuXHRcdH0sXHJcblx0XHRtb2RhbDoge1xyXG5cdFx0XHRhdHRyOiAnZGF0YS1icy10b2dnbGU9XCJtb2RhbFwiJyxcclxuXHRcdFx0ZGlzbWlzc0F0dHI6ICdkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiJyxcclxuXHRcdFx0ZXZlbnQ6IHtcclxuXHRcdFx0XHRoaWRkZW46ICdoaWRkZW4uYnMubW9kYWwnXHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRuYXY6IHtcclxuXHRcdFx0Y2xhc3M6ICduYXYnLFxyXG5cdFx0XHR0YWJzOiB7XHJcblx0XHRcdFx0Y2xhc3M6ICduYXYtdGFicycsXHJcblx0XHRcdFx0YWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxyXG5cdFx0XHRcdGl0ZW1DbGFzczogJ25hdi1pdGVtJyxcclxuXHRcdFx0XHRpdGVtTGlua0NsYXNzOiAnbmF2LWxpbmsnXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cdGFqYXg6IHtcclxuXHRcdGF0dHI6ICdkYXRhLXRvZ2dsZT1cImFqYXhcIicsXHJcblx0XHRjbGVhck9wdGlvbjogJycsXHJcblx0XHRjbGVhckVsZW1lbnQ6ICcuanZlY3Rvcm1hcC1sYWJlbCwgLmp2ZWN0b3ItbGFiZWwsIC5BdXRvRmlsbF9ib3JkZXIgLCNncml0dGVyLW5vdGljZS13cmFwcGVyLCAudWktYXV0b2NvbXBsZXRlLCAuY29sb3JwaWNrZXIsIC5GaXhlZEhlYWRlcl9IZWFkZXIsIC5GaXhlZEhlYWRlcl9DbG9uZWQgLmxpZ2h0Ym94T3ZlcmxheSwgLmxpZ2h0Ym94LCAuaW50cm9qcy1oaW50cywgLm52dG9vbHRpcCwgLnNwLWNvbnRhaW5lciwgLmR6LWhpZGRlbi1pbnB1dCwgLmxpZ2h0Ym94T3ZlcmxheScsXHJcblx0XHRlbXB0eUVsZW1lbnQ6ICdbZGF0YS1pZD1cImFwcC1leHRyYS1lbG1cIl0nLFxyXG5cdFx0bG9hZGVyOiB7XHJcblx0XHRcdGlkOiAnI2FwcC1jb250ZW50LWxvYWRlcicsXHJcblx0XHRcdGh0bWw6ICc8ZGl2IGlkPVwiYXBwLWNvbnRlbnQtbG9hZGVyXCI+PHNwYW4gY2xhc3M9XCJzcGlubmVyXCI+PC9zcGFuPjwvZGl2PicsXHJcblx0XHRcdGNsYXNzOiAnYXBwLWNvbnRlbnQtbG9hZGluZydcclxuXHRcdH0sXHJcblx0XHRlcnJvcjoge1xyXG5cdFx0XHRodG1sOiAnPGRpdiBjbGFzcz1cInB4LTMgdGV4dC1jZW50ZXIgZnMtMjBweFwiPjxpIGNsYXNzPVwiZmEgZmEtd2FybmluZyBmYS1sZyB0ZXh0LW11dGVkIG1lLTFcIj48L2k+IDxzcGFuIGNsYXNzPVwiZnctNjAwIHRleHQtaW52ZXJzZVwiPkVycm9yIDQwNCEgUGFnZSBub3QgZm91bmQuPC9zcGFuPjwvZGl2PidcclxuXHRcdH1cclxuXHR9LFxyXG5cdGhlYWRlcjoge1xyXG5cdFx0aWQ6ICcjaGVhZGVyJyxcclxuXHRcdGNsYXNzOiAnYXBwLWhlYWRlcicsXHJcblx0XHRoYXNTY3JvbGxDbGFzczogJ2hhcy1zY3JvbGwnLFxyXG5cdFx0YnJhbmQ6IHtcclxuXHRcdFx0Y2xhc3M6ICduYXZiYXItYnJhbmQnXHJcblx0XHR9LFxyXG5cdFx0ZmxvYXRpbmdGb3JtOiB7XHJcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC1oZWFkZXItZmxvYXRpbmctZm9ybVwiJyxcclxuXHRcdFx0ZGlzbWlzc0F0dHI6ICdkYXRhLWRpc21pc3M9XCJhcHAtaGVhZGVyLWZsb2F0aW5nLWZvcm1cIicsXHJcblx0XHRcdHRvZ2dsZWRDbGFzczogJ2FwcC1oZWFkZXItZmxvYXRpbmctZm9ybS10b2dnbGVkJ1xyXG5cdFx0fSxcclxuXHRcdGludmVyc2U6IHtcclxuXHRcdFx0Y2xhc3M6ICdhcHAtaGVhZGVyLWludmVyc2UnXHJcblx0XHR9XHJcblx0fSxcclxuXHRzaWRlYmFyOiB7XHJcblx0XHRpZDogJyNzaWRlYmFyJyxcclxuXHRcdGNsYXNzOiAnYXBwLXNpZGViYXInLFxyXG5cdFx0c2Nyb2xsQmFyOiB7XHJcblx0XHRcdGxvY2FsU3RvcmFnZTogJ2FwcFNpZGViYXJTY3JvbGxQb3NpdGlvbicsXHJcblx0XHRcdGRvbTogJydcclxuXHRcdH0sXHJcblx0XHRiZzoge1xyXG5cdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWJnJ1xyXG5cdFx0fSxcclxuXHRcdG1lbnU6IHtcclxuXHRcdFx0Y2xhc3M6ICdtZW51JyxcclxuXHRcdFx0ZGlzYWJsZUFuaW1hdGlvbkF0dHI6ICdkYXRhLWRpc2FibGUtc2xpZGUtYW5pbWF0aW9uJyxcclxuXHRcdFx0ZGlzYWJsZUF1dG9Db2xsYXBzZUF0dHI6ICdkYXRhLWRpc2FibGUtYXV0by1jb2xsYXBzZScsXHJcblx0XHRcdGFuaW1hdGlvblRpbWU6IDI1MCxcclxuXHRcdFx0aGVhZGVyQ2xhc3M6ICdtZW51LWhlYWRlcicsXHJcblx0XHRcdGl0ZW1DbGFzczogJ21lbnUtaXRlbScsXHJcblx0XHRcdGl0ZW1MaW5rQ2xhc3M6ICdtZW51LWxpbmsnLFxyXG5cdFx0XHRoYXNTdWJDbGFzczogJ2hhcy1zdWInLFxyXG5cdFx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZScsXHJcblx0XHRcdGV4cGFuZGluZ0NsYXNzOiAnZXhwYW5kaW5nJyxcclxuXHRcdFx0ZXhwYW5kQ2xhc3M6ICdleHBhbmQnLFxyXG5cdFx0XHRjbG9zaW5nQ2xhc3M6ICdjbG9zaW5nJyxcclxuXHRcdFx0Y2xvc2VkQ2xhc3M6ICdjbG9zZWQnLFxyXG5cdFx0XHRzdWJtZW51OiB7XHJcblx0XHRcdFx0Y2xhc3M6ICdtZW51LXN1Ym1lbnUnLFxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0cHJvZmlsZToge1xyXG5cdFx0XHRjbGFzczogJ21lbnUtcHJvZmlsZScsXHJcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC1zaWRlYmFyLXByb2ZpbGVcIicsXHJcblx0XHRcdHRhcmdldEF0dHI6ICdkYXRhLXRhcmdldCdcclxuXHRcdH0sXHJcblx0XHRtb2JpbGU6IHtcclxuXHRcdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwiYXBwLXNpZGViYXItbW9iaWxlXCInLFxyXG5cdFx0XHRkaXNtaXNzQXR0cjogJ2RhdGEtZGlzbWlzcz1cImFwcC1zaWRlYmFyLW1vYmlsZVwiJyxcclxuXHRcdFx0dG9nZ2xlZENsYXNzOiAnYXBwLXNpZGViYXItbW9iaWxlLXRvZ2dsZWQnLFxyXG5cdFx0XHRjbG9zZWRDbGFzczogJ2FwcC1zaWRlYmFyLW1vYmlsZS1jbG9zZWQnLFxyXG5cdFx0XHRiYWNrZHJvcDoge1xyXG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItbW9iaWxlLWJhY2tkcm9wJ1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0bWluaWZ5OiB7XHJcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC1zaWRlYmFyLW1pbmlmeVwiJyxcclxuXHRcdFx0dG9nZ2xlZENsYXNzOiAnYXBwLXNpZGViYXItbWluaWZpZWQnLFxyXG5cdFx0XHRjb29raWVOYW1lOiAnYXBwLXNpZGViYXItbWluaWZpZWQnXHJcblx0XHR9LFxyXG5cdFx0ZmxvYXRTdWJtZW51OiB7XHJcblx0XHRcdGlkOiAnI2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUnLFxyXG5cdFx0XHRkb206ICcnLFxyXG5cdFx0XHR0aW1lb3V0OiAnJyxcclxuXHRcdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51JyxcclxuXHRcdFx0Y29udGFpbmVyOiB7XHJcblx0XHRcdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51LWNvbnRhaW5lcidcclxuXHRcdFx0fSxcclxuXHRcdFx0YXJyb3c6IHtcclxuXHRcdFx0XHRpZDogJyNhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51LWFycm93JyxcclxuXHRcdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtYXJyb3cnXHJcblx0XHRcdH0sXHJcblx0XHRcdGxpbmU6IHtcclxuXHRcdFx0XHRpZDogJyNhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51LWxpbmUnLFxyXG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1saW5lJ1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRvdmVyZmxvdzoge1xyXG5cdFx0XHRcdGNsYXNzOiAnb3ZlcmZsb3ctc2Nyb2xsIG1oLTEwMHZoJ1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0c2VhcmNoOiB7XHJcblx0XHRcdGNsYXNzOiAnbWVudS1zZWFyY2gnLFxyXG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS1zaWRlYmFyLXNlYXJjaD1cInRydWVcIicsXHJcblx0XHRcdGhpZGVDbGFzczogJ2Qtbm9uZScsXHJcblx0XHRcdGZvdW5kQ2xhc3M6ICdoYXMtdGV4dCdcclxuXHRcdH0sXHJcblx0XHR0cmFuc3BhcmVudDoge1xyXG5cdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLXRyYW5zcGFyZW50J1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0c2lkZWJhckVuZDoge1xyXG5cdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci1lbmQnLFxyXG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwiYXBwLXNpZGViYXItZW5kXCInLFxyXG5cdFx0dG9nZ2xlZENsYXNzOiAnYXBwLXNpZGViYXItZW5kLXRvZ2dsZWQnLFxyXG5cdFx0Y29sbGFwc2VkQ2xhc3M6ICdhcHAtc2lkZWJhci1lbmQtY29sbGFwc2VkJyxcclxuXHRcdG1vYmlsZToge1xyXG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJhcHAtc2lkZWJhci1lbmQtbW9iaWxlXCInLFxyXG5cdFx0XHRkaXNtaXNzQXR0cjogJ2RhdGEtZGlzbWlzcz1cImFwcC1zaWRlYmFyLWVuZC1tb2JpbGVcIicsXHJcblx0XHRcdHRvZ2dsZWRDbGFzczogJ2FwcC1zaWRlYmFyLWVuZC1tb2JpbGUtdG9nZ2xlZCcsXHJcblx0XHRcdGNvbGxhcHNlZENsYXNzOiAnYXBwLXNpZGViYXItZW5kLW1vYmlsZS1jb2xsYXBzZWQnLFxyXG5cdFx0XHRjbG9zZWRDbGFzczogJ2FwcC1zaWRlYmFyLWVuZC1tb2JpbGUtY2xvc2VkJ1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0dG9wTWVudToge1xyXG5cdFx0aWQ6ICcjdG9wLW1lbnUnLFxyXG5cdFx0Y2xhc3M6ICdhcHAtdG9wLW1lbnUnLFxyXG5cdFx0bW9iaWxlOiB7XHJcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC10b3AtbWVudS1tb2JpbGVcIidcclxuXHRcdH0sXHJcblx0XHRtZW51OiB7XHJcblx0XHRcdGNsYXNzOiAnbWVudScsXHJcblx0XHRcdGl0ZW1DbGFzczogJ21lbnUtaXRlbScsXHJcblx0XHRcdGxpbmtDbGFzczogJ21lbnUtbGluaycsXHJcblx0XHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcclxuXHRcdFx0aGFzU3ViQ2xhc3M6ICdoYXMtc3ViJyxcclxuXHRcdFx0ZXhwYW5kQ2xhc3M6ICdleHBhbmQnLFxyXG5cdFx0XHRzdWJtZW51OiB7XHJcblx0XHRcdFx0Y2xhc3M6ICdtZW51LXN1Ym1lbnUnXHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRjb250cm9sOiB7XHJcblx0XHRcdGNsYXNzOiAnbWVudS1jb250cm9sJyxcclxuXHRcdFx0c3RhcnRDbGFzczogJ21lbnUtY29udHJvbC1zdGFydCcsXHJcblx0XHRcdGVuZENsYXNzOiAnbWVudS1jb250cm9sLWVuZCcsXHJcblx0XHRcdHNob3dDbGFzczogJ3Nob3cnLFxyXG5cdFx0XHRidXR0b25QcmV2OiB7XHJcblx0XHRcdFx0Y2xhc3M6ICdtZW51LWNvbnRyb2wtc3RhcnQnLFxyXG5cdFx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC10b3AtbWVudS1wcmV2XCInXHJcblx0XHRcdH0sXHJcblx0XHRcdGJ1dHRvbk5leHQ6IHtcclxuXHRcdFx0XHRjbGFzczogJ21lbnUtY29udHJvbC1lbmQnLFxyXG5cdFx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC10b3AtbWVudS1uZXh0XCInXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cdHNjcm9sbEJhcjoge1xyXG5cdFx0YXR0cjogJ2RhdGEtc2Nyb2xsYmFyPVwidHJ1ZVwiJyxcclxuXHRcdHNraXBNb2JpbGVBdHRyOiAnZGF0YS1za2lwLW1vYmlsZScsXHJcblx0XHRpbml0QXR0cjogJ2RhdGEtaW5pdCcsXHJcblx0XHRoZWlnaHRBdHRyOiAnZGF0YS1oZWlnaHQnLFxyXG5cdFx0d2hlZWxQcm9wYWdhdGlvbkF0dHI6ICdkYXRhLXdoZWVsLXByb3BhZ2F0aW9uJ1xyXG5cdH0sXHJcblx0Y29udGVudDoge1xyXG5cdFx0aWQ6ICcjY29udGVudCcsXHJcblx0XHRjbGFzczogJ2FwcC1jb250ZW50JyxcclxuXHRcdGZ1bGxIZWlnaHQ6IHtcclxuXHRcdFx0Y2xhc3M6ICdhcHAtY29udGVudC1mdWxsLWhlaWdodCdcclxuXHRcdH0sXHJcblx0XHRmdWxsV2lkdGg6IHtcclxuXHRcdFx0Y2xhc3M6ICdhcHAtY29udGVudC1mdWxsLXdpZHRoJ1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0bGF5b3V0OiB7XHJcblx0XHRzaWRlYmFyTGlnaHQ6IHtcclxuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aC1saWdodC1zaWRlYmFyJ1xyXG5cdFx0fSxcclxuXHRcdHNpZGViYXJFbmQ6IHtcclxuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aC1lbmQtc2lkZWJhcidcclxuXHRcdH0sXHJcblx0XHRzaWRlYmFyV2lkZToge1xyXG5cdFx0XHRjbGFzczogJ2FwcC13aXRoLXdpZGUtc2lkZWJhcidcclxuXHRcdH0sXHJcblx0XHRzaWRlYmFyTWluaWZpZWQ6IHtcclxuXHRcdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci1taW5pZmllZCdcclxuXHRcdH0sXHJcblx0XHRzaWRlYmFyVHdvOiB7XHJcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGgtdHdvLXNpZGViYXInXHJcblx0XHR9LFxyXG5cdFx0d2l0aG91dEhlYWRlcjoge1xyXG5cdFx0XHRjbGFzczogJ2FwcC13aXRob3V0LWhlYWRlcidcclxuXHRcdH0sXHJcblx0XHR3aXRob3V0U2lkZWJhcjoge1xyXG5cdFx0XHRjbGFzczogJ2FwcC13aXRob3V0LXNpZGViYXInXHJcblx0XHR9LFxyXG5cdFx0dG9wTWVudToge1xyXG5cdFx0XHRjbGFzczogJ2FwcC13aXRoLXRvcC1tZW51J1xyXG5cdFx0fSxcclxuXHRcdGJveGVkTGF5b3V0OiB7XHJcblx0XHRcdGNsYXNzOiAnYm94ZWQtbGF5b3V0J1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0bG9hZGVyOiB7XHJcblx0XHRjbGFzczogJ2FwcC1sb2FkZXInLFxyXG5cdFx0ZmFkaW5nQ2xhc3M6ICdmYWRpbmcnLFxyXG5cdFx0ZmFkaW5nVGltZTogMjAwLFxyXG5cdFx0bG9hZGVkQ2xhc3M6ICdsb2FkZWQnXHJcblx0fSxcclxuXHRwYW5lbDoge1xyXG5cdFx0Y2xhc3M6ICdwYW5lbCcsXHJcblx0XHRoZWFkQ2xhc3M6ICdwYW5lbC1oZWFkaW5nJyxcclxuXHRcdHRpdGxlQ2xhc3M6ICdwYW5lbC10aXRsZScsXHJcblx0XHRib2R5Q2xhc3M6ICdwYW5lbC1ib2R5JyxcclxuXHRcdGV4cGFuZENsYXNzOiAncGFuZWwtZXhwYW5kJyxcclxuXHRcdGxvYWRpbmdDbGFzczogJ3BhbmVsLWxvYWRpbmcnLFxyXG5cdFx0bG9hZGVyOiB7XHJcblx0XHRcdGNsYXNzOiAncGFuZWwtbG9hZGVyJyxcclxuXHRcdFx0aHRtbDogJzxzcGFuIGNsYXNzPVwic3Bpbm5lciBzcGlubmVyLXNtXCI+PC9zcGFuPidcclxuXHRcdH0sXHJcblx0XHR0b2dnbGU6IHtcclxuXHRcdFx0cmVtb3ZlOiB7XHJcblx0XHRcdFx0YXR0cjogJ2RhdGEtdG9nZ2xlPVwicGFuZWwtcmVtb3ZlXCInLFxyXG5cdFx0XHRcdHRvb2x0aXBUZXh0OiAnUmVtb3ZlJ1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb2xsYXBzZToge1xyXG5cdFx0XHRcdGF0dHI6ICdkYXRhLXRvZ2dsZT1cInBhbmVsLWNvbGxhcHNlXCInLFxyXG5cdFx0XHRcdHRvb2x0aXBUZXh0OiAnQ29sbGFwc2UgLyBFeHBhbmQnXHJcblx0XHRcdH0sXHJcblx0XHRcdHJlbG9hZDoge1xyXG5cdFx0XHRcdGF0dHI6ICdkYXRhLXRvZ2dsZT1cInBhbmVsLXJlbG9hZFwiJyxcclxuXHRcdFx0XHR0b29sdGlwVGV4dDogJ1JlbG9hZCcsXHJcblx0XHRcdH0sXHJcblx0XHRcdGV4cGFuZDoge1xyXG5cdFx0XHRcdGF0dHI6ICdkYXRhLXRvZ2dsZT1cInBhbmVsLWV4cGFuZFwiJyxcclxuXHRcdFx0XHR0b29sdGlwVGV4dDogJ0V4cGFuZCAvIENvbXByZXNzJ1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0ZHJhZ2dhYmxlOiB7XHJcblx0XHRcdGRpc2FibGVBdHRyOiAnZGF0YS1zb3J0YWJsZT1cImZhbHNlXCInLFxyXG5cdFx0XHRjb25uZWN0ZWRUYXJnZXQ6ICcucm93ID4gW2NsYXNzKj1jb2xdJyxcclxuXHRcdFx0c3Bpbm5lckh0bWw6ICc8aSBjbGFzcz1cImZhIGZhLXNwaW5uZXIgZmEtc3BpbiBtcy0yXCIgZGF0YS1pZD1cInRpdGxlLXNwaW5uZXJcIj48L2k+JyxcclxuXHRcdH0sXHJcblx0XHRzb3J0YWJsZToge1xyXG5cdFx0XHRjbGFzczogJ3VpLXNvcnRhYmxlJyxcclxuXHRcdFx0YXR0cjogJ2RhdGEtc29ydGFibGUtaWQnLFxyXG5cdFx0XHRzcGlubmVyQXR0cjogJ2RhdGEtaWQ9XCJ0aXRsZS1zcGlubmVyXCInLFxyXG5cdFx0XHRkaXNhYmxlQXR0cjogJ2RhdGEtc29ydGFibGU9XCJmYWxzZVwiJyxcclxuXHRcdFx0cGFyZW50QXR0cjogJ2NsYXNzKj1cImNvbC1cIidcclxuXHRcdH0sXHJcblx0XHRsb2NhbFN0b3JhZ2U6IHtcclxuXHRcdFx0bm90U3VwcG9ydE1lc3NhZ2U6ICdZb3VyIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZCB3aXRoIHRoZSBsb2NhbCBzdG9yYWdlJyxcclxuXHRcdFx0bG9hZGVkRXZlbnQ6ICdsb2NhbHN0b3JhZ2UtcG9zaXRpb24tbG9hZGVkJyxcclxuXHRcdFx0cmVzZXQ6IHtcclxuXHRcdFx0XHRhdHRyOiAnZGF0YS10b2dnbGU9XCJyZXNldC1sb2NhbC1zdG9yYWdlXCInLFxyXG5cdFx0XHRcdG1vZGFsOiB7XHJcblx0XHRcdFx0XHRpZDogJyNtb2RhbFJlc2V0TG9jYWxTdG9yYWdlJyxcclxuXHRcdFx0XHRcdHRpdGxlOiAnUmVzZXQgTG9jYWwgU3RvcmFnZSBDb25maXJtYXRpb24nLFxyXG5cdFx0XHRcdFx0bWVzc2FnZTogJ1dvdWxkIHlvdSBsaWtlIHRvIFJFU0VUIGFsbCB5b3VyIHNhdmVkIHdpZGdldHMgYW5kIGNsZWFyIExvY2FsIFN0b3JhZ2U/JyxcclxuXHRcdFx0XHRcdGFsZXJ0OiAnaW5mbycsXHJcblx0XHRcdFx0XHRjb25maXJtUmVzZXRBdHRyOiAnZGF0YS10b2dnbGU9XCJjb25maXJtLXJlc2V0LWxvY2FsLXN0b3JhZ2VcIidcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cdHNjcm9sbFRvVG9wQnRuOiB7XHJcblx0XHRzaG93Q2xhc3M6ICdzaG93JyxcclxuXHRcdGhlaWdodFNob3c6IDIwMCxcclxuXHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInNjcm9sbC10by10b3BcIicsXHJcblx0XHRzY3JvbGxTcGVlZDogNTAwXHJcblx0fSxcclxuXHR1bmxpbWl0ZWRUYWJzOiB7XHJcblx0XHRjbGFzczogJ3RhYi1vdmVyZmxvdycsXHJcblx0XHRvdmVyZmxvd0xlZnQ6IHtcclxuXHRcdFx0Y2xhc3M6ICdvdmVyZmxvdy1sZWZ0J1xyXG5cdFx0fSxcclxuXHRcdG92ZXJmbG93UmlnaHQ6IHtcclxuXHRcdFx0Y2xhc3M6ICdvdmVyZmxvdy1yaWdodCdcclxuXHRcdH0sXHJcblx0XHRidXR0b25OZXh0OiB7XHJcblx0XHRcdGNsYXNzOiAnbmV4dC1idXR0b24nLFxyXG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS1jbGljaz1cIm5leHQtdGFiXCInXHJcblx0XHR9LFxyXG5cdFx0YnV0dG9uUHJldjoge1xyXG5cdFx0XHRjbGFzczogJ3ByZXYtYnV0dG9uJyxcclxuXHRcdFx0dG9nZ2xlQXR0cjogJ2RhdGEtY2xpY2s9XCJwcmV2LXRhYlwiJ1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0dGhlbWVQYW5lbDoge1xyXG5cdFx0Y2xhc3M6ICd0aGVtZS1wYW5lbCcsXHJcblx0XHR0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJ0aGVtZS1wYW5lbC1leHBhbmRcIicsXHJcblx0XHRjb29raWVOYW1lOiAndGhlbWUtcGFuZWwtZXhwYW5kJyxcclxuXHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcclxuXHRcdHRoZW1lTGlzdENMYXNzOiAndGhlbWUtbGlzdCcsXHJcblx0XHR0aGVtZUxpc3RJdGVtQ0xhc3M6ICd0aGVtZS1saXN0LWl0ZW0nLFxyXG5cdFx0dGhlbWU6IHtcclxuXHRcdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwidGhlbWUtc2VsZWN0b3JcIicsXHJcblx0XHRcdGNvb2tpZU5hbWU6ICdhcHAtdGhlbWUnLFxyXG5cdFx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZScsXHJcblx0XHRcdGNsYXNzQXR0cjogJ2RhdGEtdGhlbWUtY2xhc3MnXHJcblx0XHR9LFxyXG5cdFx0dGhlbWVIZWFkZXI6IHtcclxuXHRcdFx0Y2xhc3M6ICdhcHAtaGVhZGVyLWludmVyc2UnLFxyXG5cdFx0XHR0b2dnbGVBdHRyOiAnbmFtZT1cImFwcC1oZWFkZXItaW52ZXJzZVwiJyxcclxuXHRcdFx0Y29va2llTmFtZTogJ2FwcC10aGVtZS1oZWFkZXInXHJcblx0XHR9LFxyXG5cdFx0dGhlbWVIZWFkZXJGaXhlZDoge1xyXG5cdFx0XHRjbGFzczogJ2FwcC1oZWFkZXItZml4ZWQnLFxyXG5cdFx0XHR0b2dnbGVBdHRyOiAnbmFtZT1cImFwcC1oZWFkZXItZml4ZWRcIicsXHJcblx0XHRcdGNvb2tpZU5hbWU6ICdhcHAtaGVhZGVyLWZpeGVkJyxcclxuXHRcdFx0ZGlzYWJsZWRDbGFzczogJ2FwcC1oZWFkZXItZml4ZWQtZGlzYWJsZWQnLFxyXG5cdFx0XHRlcnJvck1lc3NhZ2U6ICdEZWZhdWx0IEhlYWRlciB3aXRoIEZpeGVkIFNpZGViYXIgb3B0aW9uIGlzIG5vdCBzdXBwb3J0ZWQuIFByb2NlZWQgd2l0aCBEZWZhdWx0IEhlYWRlciB3aXRoIERlZmF1bHQgU2lkZWJhci4nXHJcblx0XHR9LFxyXG5cdFx0dGhlbWVTaWRlYmFyR3JpZDoge1xyXG5cdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWdyaWQnLFxyXG5cdFx0XHR0b2dnbGVBdHRyOiAnbmFtZT1cImFwcC1zaWRlYmFyLWdyaWRcIicsXHJcblx0XHRcdGNvb2tpZU5hbWU6ICdhcHAtc2lkZWJhci1ncmlkJyxcclxuXHRcdH0sXHJcblx0XHR0aGVtZUdyYWRpZW50RW5hYmxlZDoge1xyXG5cdFx0XHRjbGFzczogJ2FwcC1ncmFkaWVudC1lbmFibGVkJyxcclxuXHRcdFx0dG9nZ2xlQXR0cjogJ25hbWU9XCJhcHAtZ3JhZGllbnQtZW5hYmxlZFwiJyxcclxuXHRcdFx0Y29va2llTmFtZTogJ2FwcC1ncmFkaWVudC1lbmFibGVkJyxcclxuXHRcdH0sXHJcblx0XHR0aGVtZVNpZGViYXJGaXhlZDoge1xyXG5cdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZpeGVkJyxcclxuXHRcdFx0dG9nZ2xlQXR0cjogJ25hbWU9XCJhcHAtc2lkZWJhci1maXhlZFwiJyxcclxuXHRcdFx0Y29va2llTmFtZTogJ2FwcC1zaWRlYmFyLWZpeGVkJyxcclxuXHRcdFx0ZGlzYWJsZWRDbGFzczogJ2FwcC1zaWRlYmFyLWZpeGVkLWRpc2FibGVkJyxcclxuXHRcdFx0ZXJyb3JNZXNzYWdlOiAnRGVmYXVsdCBIZWFkZXIgd2l0aCBGaXhlZCBTaWRlYmFyIG9wdGlvbiBpcyBub3Qgc3VwcG9ydGVkLiBQcm9jZWVkIHdpdGggRml4ZWQgSGVhZGVyIHdpdGggRml4ZWQgU2lkZWJhci4nLFxyXG5cdFx0XHRtb2JpbGVFcnJvck1lc3NhZ2U6ICdNb2JpbGUgdmlldyBzaWRlYmFyIHdpbGwgYWx3YXlzIGZpeGVkJ1xyXG5cdFx0fSxcclxuXHRcdHRoZW1lRGFya01vZGU6IHtcclxuXHRcdFx0Y2xhc3M6ICdkYXJrLW1vZGUnLFxyXG5cdFx0XHR0b2dnbGVBdHRyOiAnbmFtZT1cImFwcC10aGVtZS1kYXJrLW1vZGVcIicsXHJcblx0XHRcdGNvb2tpZU5hbWU6ICdhcHAtdGhlbWUtZGFyay1tb2RlJ1xyXG5cdFx0fSxcclxuXHR9LFxyXG5cdGFuaW1hdGlvbjoge1xyXG5cdFx0YXR0cjogJ2RhdGEtYW5pbWF0aW9uJyxcclxuXHRcdHZhbHVlQXR0cjogJ2RhdGEtdmFsdWUnLFxyXG5cdFx0c3BlZWQ6IDEwMDAsXHJcblx0XHRlZmZlY3Q6ICdzd2luZydcclxuXHR9LFxyXG5cdGRpc21pc3NDbGFzczoge1xyXG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtZGlzbWlzcy1jbGFzcycsXHJcblx0XHR0YXJnZXRBdHRyOiAnZGF0YS10YXJnZXQnXHJcblx0fSxcclxuXHR0b2dnbGVDbGFzczoge1xyXG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlLWNsYXNzJyxcclxuXHRcdHRhcmdldEF0dHI6ICdkYXRhLXRhcmdldCdcclxuXHR9LFxyXG5cdGhlbHBlcjoge1xyXG5cdFx0ZGlzcGxheToge1xyXG5cdFx0XHRub25lOiAnZC1ub25lJ1xyXG5cdFx0fSxcclxuXHRcdG1hcmdpbjoge1xyXG5cdFx0XHRsZWZ0OiB7XHJcblx0XHRcdFx0MDogJ21zLTAnXHJcblx0XHRcdH0sXHJcblx0XHRcdHJpZ2h0OiB7XHJcblx0XHRcdFx0MDogJ21lLTAnXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cdGZvbnQ6IHtcclxuXHRcclxuXHR9LFxyXG5cdGNvbG9yOiB7XHJcblx0XHJcblx0fVxyXG59O1xyXG5cclxuXHJcbi8qIDEuIEhhbmRsZSBTY3JvbGxiYXJcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTY3JvbGxiYXIgPSBmdW5jdGlvbigpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRcclxuXHR2YXIgZWxtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1snKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyddJyk7XHJcblx0XHRcclxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGVsbXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdGdlbmVyYXRlU2Nyb2xsYmFyKGVsbXNbaV0pXHJcblx0fVxyXG59O1xyXG52YXIgZ2VuZXJhdGVTY3JvbGxiYXIgPSBmdW5jdGlvbihlbG0pIHtcclxuICBcInVzZSBzdHJpY3RcIjtcclxuXHRcclxuXHRpZiAoJChlbG0pLmF0dHIoYXBwLnNjcm9sbEJhci5pbml0QXR0cikgfHwgKGFwcC5pc01vYmlsZSAmJiAkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLnNraXBNb2JpbGVBdHRyKSkpIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0dmFyIGRhdGFIZWlnaHQgPSAoISQoZWxtKS5hdHRyKGFwcC5zY3JvbGxCYXIuaGVpZ2h0QXR0cikpID8gJChlbG0pLmhlaWdodCgpIDogJChlbG0pLmF0dHIoYXBwLnNjcm9sbEJhci5oZWlnaHRBdHRyKTtcclxuXHRcclxuXHQkKGVsbSkuY3NzKCdoZWlnaHQnLCBkYXRhSGVpZ2h0KTtcclxuXHRcclxuXHRpZihhcHAuaXNNb2JpbGUpIHtcclxuXHRcdCQoZWxtKS5jc3MoJ292ZXJmbG93LXgnLCdzY3JvbGwnKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0dmFyIGRhdGFXaGVlbFByb3BhZ2F0aW9uID0gKCQoZWxtKS5hdHRyKGFwcC5zY3JvbGxCYXIud2hlZWxQcm9wYWdhdGlvbkF0dHIpKSA/ICQoZWxtKS5hdHRyKGFwcC5zY3JvbGxCYXIud2hlZWxQcm9wYWdhdGlvbkF0dHIpIDogZmFsc2U7XHJcblx0XHRcclxuXHRcdGlmICgkKGVsbSkuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnOm5vdCguJysgYXBwLnNpZGViYXJFbmQuY2xhc3MgKycpJykubGVuZ3RoICE9PSAwKSB7XHJcblx0XHRcdGFwcC5zaWRlYmFyLnNjcm9sbEJhci5kb20gPSBuZXcgUGVyZmVjdFNjcm9sbGJhcihlbG0sIHtcclxuXHRcdFx0XHR3aGVlbFByb3BhZ2F0aW9uOiBkYXRhV2hlZWxQcm9wYWdhdGlvblxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG5ldyBQZXJmZWN0U2Nyb2xsYmFyKGVsbSwge1xyXG5cdFx0XHRcdHdoZWVsUHJvcGFnYXRpb246IGRhdGFXaGVlbFByb3BhZ2F0aW9uXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHQkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLmluaXRBdHRyLCB0cnVlKTtcclxufTtcclxuXHJcblxyXG4vKiAyLiBIYW5kbGUgU2lkZWJhciBNZW51XHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgaGFuZGxlU2lkZWJhck1lbnUgPSBmdW5jdGlvbigpIHtcclxuICBcInVzZSBzdHJpY3RcIjtcclxuICAgIFxyXG5cdHZhciBleHBhbmRUaW1lICAgICAgICAgID0gKCQoYXBwLnNpZGViYXIuaWQpLmF0dHIoYXBwLnNpZGViYXIubWVudS5kaXNhYmxlQW5pbWF0aW9uQXR0cikpID8gMCA6IGFwcC5zaWRlYmFyLm1lbnUuYW5pbWF0aW9uVGltZTtcclxuXHR2YXIgZGlzYWJsZUF1dG9Db2xsYXBzZSA9ICgkKGFwcC5zaWRlYmFyLmlkKS5hdHRyKGFwcC5zaWRlYmFyLm1lbnUuZGlzYWJsZUF1dG9Db2xsYXBzZUF0dHIpKSA/IDEgOiAwO1xyXG5cdFxyXG5cdC8vIDIuMSBNZW51IC0gVG9nZ2xlIC8gQ29sbGFwc2VcclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51LmNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzICsnLicrIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtTGlua0NsYXNzLCBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBtZW51ICAgICAgPSAkKHRoaXMpLm5leHQoJy4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MpO1xyXG5cdFx0dmFyIG1lbnVPdGhlciA9ICQoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJyAuJysgYXBwLnNpZGViYXIubWVudS5jbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJy4nKyBhcHAuc2lkZWJhci5tZW51Lmhhc1N1YkNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcykubm90KG1lbnUpO1xyXG5cclxuXHRcdGlmICgkKCcuJysgYXBwLnNpZGViYXIubWluaWZ5LnRvZ2dsZWRDbGFzcykubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdGlmICghZGlzYWJsZUF1dG9Db2xsYXBzZSkge1xyXG5cdFx0XHRcdCQobWVudU90aGVyKS5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MpLmFkZENsYXNzKGFwcC5zaWRlYmFyLm1lbnUuY2xvc2luZ0NsYXNzKTtcclxuXHRcdFx0XHQkKG1lbnVPdGhlcikuc2xpZGVVcChleHBhbmRUaW1lLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCQobWVudU90aGVyKS5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MpLmFkZENsYXNzKGFwcC5zaWRlYmFyLm1lbnUuY2xvc2VkQ2xhc3MpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MgKyAnICcgKyBhcHAuc2lkZWJhci5tZW51LmNsb3NpbmdDbGFzcyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCQobWVudSkuaXMoJzp2aXNpYmxlJykpIHtcclxuXHRcdFx0XHQkKG1lbnUpLmNsb3Nlc3QoJy4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcykuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWVudS5jbG9zaW5nQ2xhc3MpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQobWVudSkuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzICkuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRpbmdDbGFzcykucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXIubWVudS5jbG9zZWRDbGFzcyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdCQobWVudSkuc2xpZGVUb2dnbGUoZXhwYW5kVGltZSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIG1lbnVJdGVtID0gJCh0aGlzKS5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MpO1xyXG5cdFx0XHRcdGlmICghJChtZW51KS5pcygnOnZpc2libGUnKSkge1xyXG5cdFx0XHRcdFx0JChtZW51SXRlbSkuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWVudS5jbG9zZWRDbGFzcyk7XHJcblx0XHRcdFx0XHQkKG1lbnVJdGVtKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JChtZW51SXRlbSkuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcyk7XHJcblx0XHRcdFx0XHQkKG1lbnVJdGVtKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmNsb3NlZENsYXNzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JChtZW51SXRlbSkucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRpbmdDbGFzcyArICcgJyArIGFwcC5zaWRlYmFyLm1lbnUuY2xvc2luZ0NsYXNzKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0XHJcblx0Ly8gMi4yIE1lbnUgU3VibWVudSAtIFRvZ2dsZSAvIENvbGxhcHNlIFxyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuJysgYXBwLnNpZGViYXIuY2xhc3MgKycgLicrIGFwcC5zaWRlYmFyLm1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKycuJysgYXBwLnNpZGViYXIubWVudS5oYXNTdWJDbGFzcyArJyAuJysgYXBwLnNpZGViYXIubWVudS5zdWJtZW51LmNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJy4nKyBhcHAuc2lkZWJhci5tZW51Lmhhc1N1YkNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUxpbmtDbGFzcywgZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoJCgnLicrIGFwcC5zaWRlYmFyLm1pbmlmeS50b2dnbGVkQ2xhc3MpLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHR2YXIgbWVudSA9ICQodGhpcykubmV4dCgnLicrIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcyk7XHJcblx0XHRcdGlmICgkKG1lbnUpLmlzKCc6dmlzaWJsZScpKSB7XHJcblx0XHRcdFx0JChtZW51KS5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MpLmFkZENsYXNzKGFwcC5zaWRlYmFyLm1lbnUuY2xvc2luZ0NsYXNzKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKG1lbnUpLmNsb3Nlc3QoJy4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcykuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRpbmdDbGFzcykucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXIubWVudS5jbG9zZWRDbGFzcyk7XHJcblx0XHRcdH1cclxuXHRcdFx0JChtZW51KS5zbGlkZVRvZ2dsZShleHBhbmRUaW1lLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgbWVudUl0ZW0gPSAkKHRoaXMpLmNsb3Nlc3QoJy4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyk7XHJcblx0XHRcdFx0aWYgKCEkKG1lbnUpLmlzKCc6dmlzaWJsZScpKSB7XHJcblx0XHRcdFx0XHQkKG1lbnVJdGVtKS5hZGRDbGFzcyhhcHAuc2lkZWJhci5tZW51LmNsb3NlZENsYXNzKTtcclxuXHRcdFx0XHRcdCQobWVudUl0ZW0pLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKG1lbnVJdGVtKS5hZGRDbGFzcyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcclxuXHRcdFx0XHRcdCQobWVudUl0ZW0pLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1lbnUuY2xvc2VkQ2xhc3MpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKG1lbnVJdGVtKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZGluZ0NsYXNzICsgJyAnICsgYXBwLnNpZGViYXIubWVudS5jbG9zaW5nQ2xhc3MpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiAzLiBIYW5kbGUgU2lkZWJhciBUb2dnbGVcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTaWRlYmFyVG9nZ2xlID0gZnVuY3Rpb24oKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdC8vIDMuMSBNb2JpbGUgLSBUb2dnbGVcclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnWycrIGFwcC5zaWRlYmFyLm1vYmlsZS50b2dnbGVBdHRyICsnXScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFxyXG5cdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5zaWRlYmFyLm1vYmlsZS50b2dnbGVkQ2xhc3MpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1vYmlsZS5jbG9zZWRDbGFzcyk7XHJcblx0fSk7XHJcblx0XHJcblx0Ly8gMy4yIE1vYmlsZSAtIERpc21pc3MgXHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAuc2lkZWJhci5tb2JpbGUuZGlzbWlzc0F0dHIgKyddJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHJcblx0XHQkKGFwcC5pZCkucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXIubW9iaWxlLnRvZ2dsZWRDbGFzcykuYWRkQ2xhc3MoYXBwLnNpZGViYXIubW9iaWxlLmNsb3NlZENsYXNzKTtcclxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tb2JpbGUuY2xvc2VkQ2xhc3MpO1xyXG5cdFx0fSwgMjUwKTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiA0LiBIYW5kbGUgU2lkZWJhciBFbmRcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTaWRlYmFyRW5kVG9nZ2xlID0gZnVuY3Rpb24oKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdC8vIDQuMSBEZXNrdG9wIC0gVG9nZ2xlIC8gQ29sbGFwc2VcclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnWycrIGFwcC5zaWRlYmFyRW5kLnRvZ2dsZUF0dHIgKyddJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHJcblx0XHRpZiAoISQoYXBwLmlkKS5oYXNDbGFzcyhhcHAuc2lkZWJhckVuZC50b2dnbGVkQ2xhc3MpICYmICEkKGFwcC5pZCkuaGFzQ2xhc3MoYXBwLnNpZGViYXJFbmQuY29sbGFwc2VkQ2xhc3MpKSB7XHJcblx0XHRcdCQoYXBwLmlkKS5hZGRDbGFzcyhhcHAuc2lkZWJhckVuZC5jb2xsYXBzZWRDbGFzcyk7XHJcblx0XHR9IGVsc2UgaWYgKCQoYXBwLmlkKS5oYXNDbGFzcyhhcHAuc2lkZWJhckVuZC50b2dnbGVkQ2xhc3MpKSB7XHJcblx0XHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhckVuZC50b2dnbGVkQ2xhc3MpLmFkZENsYXNzKGFwcC5zaWRlYmFyRW5kLmNvbGxhcHNlZENsYXNzKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhckVuZC5jb2xsYXBzZWRDbGFzcykuYWRkQ2xhc3MoYXBwLnNpZGViYXJFbmQudG9nZ2xlZENsYXNzKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHQvLyA0LjIgTW9iaWxlIC0gVG9nZ2xlXHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAuc2lkZWJhckVuZC5tb2JpbGUudG9nZ2xlQXR0ciArJ10nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcclxuXHRcdCQoYXBwLmlkKS5hZGRDbGFzcyhhcHAuc2lkZWJhckVuZC5tb2JpbGUudG9nZ2xlZENsYXNzKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhckVuZC5tb2JpbGUuY2xvc2VkQ2xhc3MpO1xyXG5cdH0pO1xyXG5cdFxyXG5cdC8vIDQuMyBNb2JpbGUgLSBEaXNtaXNzXHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAuc2lkZWJhckVuZC5tb2JpbGUuZGlzbWlzc0F0dHIgKyddJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHJcblx0XHQkKGFwcC5pZCkucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXJFbmQubW9iaWxlLnRvZ2dsZWRDbGFzcykuYWRkQ2xhc3MoYXBwLnNpZGViYXJFbmQubW9iaWxlLmNsb3NlZENsYXNzKTtcclxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhckVuZC5tb2JpbGUuY2xvc2VkQ2xhc3MpO1xyXG5cdFx0fSwgMjUwKTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiA1LiBIYW5kbGUgU2lkZWJhciBNaW5pZmllZFxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVNpZGViYXJNaW5pZnkgPSBmdW5jdGlvbigpIHtcclxuICBcInVzZSBzdHJpY3RcIjtcclxuXHRcclxuXHQvLyA1LjEgTWluaWZ5IC0gVG9nZ2xlIC8gRGlzbWlzc1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnNpZGViYXIubWluaWZ5LnRvZ2dsZUF0dHIgKyddJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0dmFyIGFwcFNpZGViYXJNaW5pZmllZCA9IGZhbHNlO1xyXG5cclxuXHRcdGlmICgkKGFwcC5pZCkuaGFzQ2xhc3MoYXBwLnNpZGViYXIubWluaWZ5LnRvZ2dsZWRDbGFzcykpIHtcclxuXHRcdFx0JChhcHAuaWQpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1pbmlmeS50b2dnbGVkQ2xhc3MpO1xyXG5cdFx0XHQkKGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5pZCkucmVtb3ZlKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKGFwcC5pZCkuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWluaWZ5LnRvZ2dsZWRDbGFzcyk7XHJcblxyXG5cdFx0XHRpZihhcHAuaXNNb2JpbGUpIHtcclxuXHRcdFx0XHR2YXIgc2Nyb2xsQmFyQXR0ciA9ICcuJyArIGFwcC5zaWRlYmFyLmNsYXNzICsnICcrIGFwcC5zY3JvbGxCYXIuYXR0cjtcclxuXHRcdFx0XHQkKHNjcm9sbEJhckF0dHIpLmNzcygnbWFyZ2luLXRvcCcsJzAnKTtcclxuXHRcdFx0XHQkKHNjcm9sbEJhckF0dHIpLmNzcygnb3ZlcmZsb3cteCcsICdzY3JvbGwnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRhcHBTaWRlYmFyTWluaWZpZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKENvb2tpZXMpIHtcclxuXHRcdFx0Q29va2llcy5zZXQoYXBwLnNpZGViYXIubWluaWZ5LmNvb2tpZU5hbWUsIGFwcFNpZGViYXJNaW5pZmllZCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0XHJcblx0Ly8gNS4yIE1pbmlmeSAtIFBhZ2UgTG9hZCBDb29raWVzIFxyXG5cdGlmIChDb29raWVzKSB7XHJcblx0XHR2YXIgYXBwU2lkZWJhck1pbmlmaWVkID0gQ29va2llcy5nZXQoYXBwLnNpZGViYXIubWluaWZ5LmNvb2tpZU5hbWUpO1xyXG5cdFx0XHJcblx0XHRpZiAoYXBwU2lkZWJhck1pbmlmaWVkID09ICd0cnVlJykge1xyXG5cdFx0XHQkKGFwcC5pZCkuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWluaWZ5LnRvZ2dsZWRDbGFzcyk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuXHJcbi8qIDYuIEhhbmRsZSBQYWdlIExvYWRlciBcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVQYWdlTG9hZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdCQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFwcExvYWRlckNsYXNzID0gJy4nKyBhcHAubG9hZGVyLmNsYXNzO1xyXG5cdFx0JChhcHBMb2FkZXJDbGFzcykuYWRkQ2xhc3MoYXBwLmxvYWRlci5mYWRpbmdDbGFzcyk7XHJcblx0XHRcclxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoYXBwTG9hZGVyQ2xhc3MpLnJlbW92ZUNsYXNzKGFwcC5sb2FkZXIuZmFkaW5nQ2xhc3MpLmFkZENsYXNzKGFwcC5sb2FkZXIubG9hZGVkQ2xhc3MpO1xyXG5cdFx0fSwgYXBwLmxvYWRlci5mYWRpbmdUaW1lKTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiA3LiBIYW5kbGUgUGFuZWwgQWN0aW9uXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgaGFuZGxlUGFuZWxBY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRcclxuXHR2YXIgcGFuZWxUb29sdGlwO1xyXG5cclxuXHQvLyA3LjEgUGFuZWwgUmVtb3ZlIC0gTW91c2VvdmVyXHJcblx0JChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICdbJysgYXBwLnBhbmVsLnRvZ2dsZS5yZW1vdmUuYXR0ciArICddJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0aWYgKCEkKHRoaXMpLmF0dHIoJ2RhdGEtdG9vbHRpcC1pbml0JykpIHtcclxuXHRcdFx0dmFyIHBhbmVsVG9vbHRpcCA9IG5ldyBib290c3RyYXAuVG9vbHRpcCh0aGlzLCB7IFxyXG5cdFx0XHRcdHRpdGxlOiBhcHAucGFuZWwudG9nZ2xlLnJlbW92ZS50b29sdGlwVGV4dCwgXHJcblx0XHRcdFx0cGxhY2VtZW50OiAnYm90dG9tJyBcclxuXHRcdFx0fSk7XHJcblx0XHRcdHBhbmVsVG9vbHRpcC5zaG93KCk7XHJcblx0XHRcdCQodGhpcykuYXR0cignZGF0YS10b29sdGlwLWluaXQnLCB0cnVlKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHQvLyA3LjIgUGFuZWwgUmVtb3ZlIC0gQ2xpY2tcclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnWycrIGFwcC5wYW5lbC50b2dnbGUucmVtb3ZlLmF0dHIgKyAnXScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFxyXG5cdFx0aWYgKHBhbmVsVG9vbHRpcCkge1xyXG5cdFx0XHRwYW5lbFRvb2x0aXAuaGlkZSgpO1xyXG5cdFx0fVxyXG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuJysgYXBwLnBhbmVsLmNsYXNzKS5yZW1vdmUoKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gNy4zIFBhbmVsIENvbGxhcHNlIC0gTW91c2VvdmVyXHJcblx0JChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICdbJysgYXBwLnBhbmVsLnRvZ2dsZS5jb2xsYXBzZS5hdHRyICsgJ10nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRpZiAoISQodGhpcykuYXR0cignZGF0YS10b29sdGlwLWluaXQnKSkge1xyXG5cdFx0XHRwYW5lbFRvb2x0aXAgPSBuZXcgYm9vdHN0cmFwLlRvb2x0aXAodGhpcywgeyBcclxuXHRcdFx0XHR0aXRsZTogYXBwLnBhbmVsLnRvZ2dsZS5jb2xsYXBzZS50b29sdGlwVGV4dCwgXHJcblx0XHRcdFx0cGxhY2VtZW50OiAnYm90dG9tJyBcclxuXHRcdFx0fSk7XHJcblx0XHRcdHBhbmVsVG9vbHRpcC5zaG93KCk7XHJcblx0XHRcdCQodGhpcykuYXR0cignZGF0YS10b29sdGlwLWluaXQnLCB0cnVlKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHQvLyA3LjQgUGFuZWwgQ29sbGFwc2UgLSBDbGlja1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnBhbmVsLnRvZ2dsZS5jb2xsYXBzZS5hdHRyICsgJ10nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcclxuXHRcdGlmIChwYW5lbFRvb2x0aXApIHtcclxuXHRcdFx0cGFuZWxUb29sdGlwLmhpZGUoKTtcclxuXHRcdH1cclxuXHRcdCQodGhpcykuY2xvc2VzdCgnLicrIGFwcC5wYW5lbC5jbGFzcykuZmluZCgnLicrIGFwcC5wYW5lbC5ib2R5Q2xhc3MpLnNsaWRlVG9nZ2xlKCk7XHJcblx0fSk7XHJcblxyXG5cdC8vIDcuNSBQYW5lbCBSZWxvYWQgLSBNb3VzZW92ZXJcclxuXHQkKGRvY3VtZW50KS5vbignbW91c2VvdmVyJywgJ1snKyBhcHAucGFuZWwudG9nZ2xlLnJlbG9hZC5hdHRyICsgJ10nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRpZiAoISQodGhpcykuYXR0cignZGF0YS10b29sdGlwLWluaXQnKSkge1xyXG5cdFx0XHRwYW5lbFRvb2x0aXAgPSBuZXcgYm9vdHN0cmFwLlRvb2x0aXAodGhpcywgeyBcclxuXHRcdFx0XHR0aXRsZTogYXBwLnBhbmVsLnRvZ2dsZS5yZWxvYWQudG9vbHRpcFRleHQsIFxyXG5cdFx0XHRcdHBsYWNlbWVudDogJ2JvdHRvbScgXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRwYW5lbFRvb2x0aXAuc2hvdygpO1xyXG5cdFx0XHQkKHRoaXMpLmF0dHIoJ2RhdGEtdG9vbHRpcC1pbml0JywgdHJ1ZSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0XHJcblx0Ly8gNy42IFBhbmVsIFJlbG9hZCAtIENsaWNrXHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAucGFuZWwudG9nZ2xlLnJlbG9hZC5hdHRyICsgJ10nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcclxuXHRcdGlmIChwYW5lbFRvb2x0aXApIHtcclxuXHRcdFx0cGFuZWxUb29sdGlwLmhpZGUoKTtcclxuXHRcdH1cclxuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLmNsb3Nlc3QoJy4nKyBhcHAucGFuZWwuY2xhc3MpO1xyXG5cdFx0aWYgKCEkKHRhcmdldCkuaGFzQ2xhc3MoYXBwLnBhbmVsLmxvYWRpbmdDbGFzcykpIHtcclxuXHRcdFx0dmFyIHRhcmdldEJvZHkgPSAkKHRhcmdldCkuZmluZCgnLicrIGFwcC5wYW5lbC5ib2R5Q2xhc3MpO1xyXG5cdFx0XHR2YXIgc3Bpbm5lckh0bWwgPSAnPGRpdiBjbGFzcz1cIicrIGFwcC5wYW5lbC5sb2FkZXIuY2xhc3MgKydcIj4nKyBhcHAucGFuZWwubG9hZGVyLmh0bWwgKyc8L2Rpdj4nO1xyXG5cdFx0XHQkKHRhcmdldCkuYWRkQ2xhc3MoYXBwLnBhbmVsLmxvYWRpbmdDbGFzcyk7XHJcblx0XHRcdCQodGFyZ2V0Qm9keSkucHJlcGVuZChzcGlubmVySHRtbCk7XHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCh0YXJnZXQpLnJlbW92ZUNsYXNzKGFwcC5wYW5lbC5sb2FkaW5nQ2xhc3MpO1xyXG5cdFx0XHRcdCQodGFyZ2V0KS5maW5kKCcuJysgYXBwLnBhbmVsLmxvYWRlci5jbGFzcykucmVtb3ZlKCk7XHJcblx0XHRcdH0sIDIwMDApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyA3LjcgUGFuZWwgRXhwYW5kIC0gTW91c2VvdmVyXHJcblx0JChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICdbJysgYXBwLnBhbmVsLnRvZ2dsZS5leHBhbmQuYXR0ciArICddJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0aWYgKCEkKHRoaXMpLmF0dHIoJ2RhdGEtdG9vbHRpcC1pbml0JykpIHtcclxuXHRcdFx0cGFuZWxUb29sdGlwID0gbmV3IGJvb3RzdHJhcC5Ub29sdGlwKHRoaXMsIHsgXHJcblx0XHRcdFx0dGl0bGU6IGFwcC5wYW5lbC50b2dnbGUuZXhwYW5kLnRvb2x0aXBUZXh0LCBcclxuXHRcdFx0XHRwbGFjZW1lbnQ6ICdib3R0b20nIFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0cGFuZWxUb29sdGlwLnNob3coKTtcclxuXHRcdFx0JCh0aGlzKS5hdHRyKCdkYXRhLXRvb2x0aXAtaW5pdCcsIHRydWUpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyA3LjggUGFuZWwgRXhwYW5kIC0gQ2xpY2tcclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnWycrIGFwcC5wYW5lbC50b2dnbGUuZXhwYW5kLmF0dHIgKyAnXScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFxyXG5cdFx0aWYgKHBhbmVsVG9vbHRpcCkge1xyXG5cdFx0XHRwYW5lbFRvb2x0aXAuaGlkZSgpO1xyXG5cdFx0fVxyXG5cdFx0dmFyIHRhcmdldCA9ICQodGhpcykuY2xvc2VzdCgnLicrIGFwcC5wYW5lbC5jbGFzcyk7XHJcblx0XHR2YXIgdGFyZ2V0Qm9keSA9ICQodGFyZ2V0KS5maW5kKCcuJysgYXBwLnBhbmVsLmJvZHlDbGFzcyk7XHJcblx0XHR2YXIgdGFyZ2V0VG9wID0gNDA7XHJcblx0XHRpZiAoJCh0YXJnZXRCb2R5KS5sZW5ndGggIT09IDApIHtcclxuXHRcdFx0dmFyIHRhcmdldE9mZnNldFRvcCA9ICQodGFyZ2V0KS5vZmZzZXQoKS50b3A7XHJcblx0XHRcdHZhciB0YXJnZXRCb2R5T2Zmc2V0VG9wID0gJCh0YXJnZXRCb2R5KS5vZmZzZXQoKS50b3A7XHJcblx0XHRcdHRhcmdldFRvcCA9IHRhcmdldEJvZHlPZmZzZXRUb3AgLSB0YXJnZXRPZmZzZXRUb3A7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCQoJ2JvZHknKS5oYXNDbGFzcyhhcHAucGFuZWwuZXhwYW5kQ2xhc3MpICYmICQodGFyZ2V0KS5oYXNDbGFzcyhhcHAucGFuZWwuZXhwYW5kQ2xhc3MpKSB7XHJcblx0XHRcdCQoJ2JvZHksIC4nKyBhcHAucGFuZWwuY2xhc3MpLnJlbW92ZUNsYXNzKGFwcC5wYW5lbC5leHBhbmRDbGFzcyk7XHJcblx0XHRcdCQoJy4nKyBhcHAucGFuZWwuY2xhc3MpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcblx0XHRcdCQodGFyZ2V0Qm9keSkucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcyhhcHAucGFuZWwuZXhwYW5kQ2xhc3MpO1xyXG5cdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy4nKyBhcHAucGFuZWwuY2xhc3MpLmFkZENsYXNzKGFwcC5wYW5lbC5leHBhbmRDbGFzcyk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuLyogOC4gSGFuZGxlIFBhbmVsIERyYWdnYWJsZVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVBhbmVsRHJhZ2dhYmxlID0gZnVuY3Rpb24oKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0XHJcblx0dmFyIHRhcmdldCA9ICQoJy4nKyBhcHAucGFuZWwuY2xhc3MgKyc6bm90KFsnKyBhcHAucGFuZWwuZHJhZ2dhYmxlLmRpc2FibGVBdHRyICsnXSknKS5wYXJlbnQoJ1tjbGFzcyo9Y29sXScpO1xyXG5cdHZhciB0YXJnZXRIYW5kbGUgPSAnLicrIGFwcC5wYW5lbC5oZWFkQ2xhc3M7XHJcblx0dmFyIGNvbm5lY3RlZFRhcmdldCA9IGFwcC5wYW5lbC5kcmFnZ2FibGUuY29ubmVjdGVkVGFyZ2V0O1xyXG5cclxuXHQkKHRhcmdldCkuc29ydGFibGUoe1xyXG5cdFx0aGFuZGxlOiB0YXJnZXRIYW5kbGUsXHJcblx0XHRjb25uZWN0V2l0aDogY29ubmVjdGVkVGFyZ2V0LFxyXG5cdFx0c3RvcDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XHJcblx0XHRcdHVpLml0ZW0uZmluZCgnLicrIGFwcC5wYW5lbC50aXRsZUNsYXNzKS5hcHBlbmQoYXBwLnBhbmVsLmRyYWdnYWJsZS5zcGlubmVySHRtbCk7XHJcblx0XHRcdGhhbmRsZVNhdmVQYW5lbFBvc2l0aW9uKHVpLml0ZW0pO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuXHJcbi8qIDkuIEhhbmRsZSBUb29sdGlwIFBvcG92ZXIgQWN0aXZhdGlvblxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRlbFRvb2x0aXBQb3BvdmVyQWN0aXZhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdFxyXG5cdGlmICgkKCdbJysgYXBwLmJvb3RzdHJhcC50b29sdGlwLmF0dHIgKyddJykubGVuZ3RoICE9PSAwKSB7XHJcblx0XHR2YXIgdG9vbHRpcFRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLmJvb3RzdHJhcC50b29sdGlwLmF0dHIgKyddJykpXHJcblx0XHR2YXIgdG9vbHRpcExpc3QgPSB0b29sdGlwVHJpZ2dlckxpc3QubWFwKGZ1bmN0aW9uICh0b29sdGlwVHJpZ2dlckVsKSB7XHJcblx0XHRcdHJldHVybiBuZXcgYm9vdHN0cmFwLlRvb2x0aXAodG9vbHRpcFRyaWdnZXJFbClcclxuXHRcdH0pXHJcblx0fVxyXG5cdGlmICgkKCdbJysgYXBwLmJvb3RzdHJhcC5wb3BvdmVyLmF0dHIgKyddJykubGVuZ3RoICE9PSAwKSB7XHJcblx0XHR2YXIgcG9wb3ZlclRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLmJvb3RzdHJhcC5wb3BvdmVyLmF0dHIgKyddJykpXHJcblx0XHR2YXIgcG9wb3Zlckxpc3QgPSBwb3BvdmVyVHJpZ2dlckxpc3QubWFwKGZ1bmN0aW9uIChwb3BvdmVyVHJpZ2dlckVsKSB7XHJcblx0XHRcdHJldHVybiBuZXcgYm9vdHN0cmFwLlBvcG92ZXIocG9wb3ZlclRyaWdnZXJFbClcclxuXHRcdH0pXHJcblx0fVxyXG59O1xyXG5cclxuXHJcbi8qIDEwLiBIYW5kbGUgU2Nyb2xsIHRvIFRvcCBCdXR0b25cclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdFxyXG5cdCQoZG9jdW1lbnQpLnNjcm9sbCggZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdG90YWxTY3JvbGwgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcclxuXHJcblx0XHRpZiAodG90YWxTY3JvbGwgPj0gYXBwLnNjcm9sbFRvVG9wQnRuLmhlaWdodFNob3cpIHtcclxuXHRcdFx0aWYgKCEkKCdbJysgYXBwLnNjcm9sbFRvVG9wQnRuLnRvZ2dsZUF0dHIgKyddJykuaGFzQ2xhc3MoYXBwLnNjcm9sbFRvVG9wQnRuLnNob3dDbGFzcykpIHtcclxuXHRcdFx0XHQkKCdbJysgYXBwLnNjcm9sbFRvVG9wQnRuLnRvZ2dsZUF0dHIgKyddJykuYWRkQ2xhc3MoYXBwLnNjcm9sbFRvVG9wQnRuLnNob3dDbGFzcyk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJ1snKyBhcHAuc2Nyb2xsVG9Ub3BCdG4udG9nZ2xlQXR0ciArJ10nKS5yZW1vdmVDbGFzcyhhcHAuc2Nyb2xsVG9Ub3BCdG4uc2hvd0NsYXNzKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0JCgnWycrIGFwcC5zY3JvbGxUb1RvcEJ0bi50b2dnbGVBdHRyICsnXScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFxyXG5cdFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG5cdFx0XHRzY3JvbGxUb3A6ICQoJ2JvZHknKS5vZmZzZXQoKS50b3BcclxuXHRcdH0sIGFwcC5zY3JvbGxUb1RvcEJ0bi5zY3JvbGxTcGVlZCk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuLyogMTEuIEhhbmRsZSBUaGVtZSBQYW5lbFxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVRoZW1lUGFuZWwgPSBmdW5jdGlvbigpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRcclxuXHQvLyAxMS4xIFRoZW1lIFBhbmVsIC0gVG9nZ2xlIC8gRGlzbWlzc1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnRoZW1lUGFuZWwudG9nZ2xlQXR0ciArJ10nLCBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0YXJnZXRDb250YWluZXIgPSAnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzO1xyXG5cdFx0dmFyIHRhcmdldEV4cGFuZCA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHRpZiAoJCh0YXJnZXRDb250YWluZXIpLmhhc0NsYXNzKGFwcC50aGVtZVBhbmVsLmFjdGl2ZUNsYXNzKSkge1xyXG5cdFx0XHQkKHRhcmdldENvbnRhaW5lcikucmVtb3ZlQ2xhc3MoYXBwLnRoZW1lUGFuZWwuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCh0YXJnZXRDb250YWluZXIpLmFkZENsYXNzKGFwcC50aGVtZVBhbmVsLmFjdGl2ZUNsYXNzKTtcclxuXHRcdFx0dGFyZ2V0RXhwYW5kID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGlmIChDb29raWVzKSB7XHJcblx0XHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLmNvb2tpZU5hbWUsIHRhcmdldEV4cGFuZCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0XHJcblx0Ly8gMTEuMiBUaGVtZSBQYW5lbCAtIFBhZ2UgTG9hZCBDb29raWVzIFxyXG5cdGlmIChDb29raWVzKSB7XHJcblx0XHR2YXIgdGhlbWVQYW5lbEV4cGFuZCA9IENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLmNvb2tpZU5hbWUpO1xyXG5cdFx0XHJcblx0XHRpZiAodGhlbWVQYW5lbEV4cGFuZCA9PSAndHJ1ZScpIHtcclxuXHRcdFx0JCgnWycrIGFwcC50aGVtZVBhbmVsLnRvZ2dsZUF0dHIgKyddJykudHJpZ2dlcignY2xpY2snKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gMTEuMyBUaGVtZSBQYW5lbCAtIFRoZW1lIFNlbGVjdG9yXHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWUudG9nZ2xlQXR0ciArJ10nLCBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0YXJnZXRUaGVtZUNsYXNzID0gJCh0aGlzKS5hdHRyKGFwcC50aGVtZVBhbmVsLnRoZW1lLmNsYXNzQXR0cik7XHJcblx0XHRcclxuXHRcdGZvciAodmFyIHggPSAwOyB4IDwgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QubGVuZ3RoOyB4KyspIHtcclxuXHRcdFx0dmFyIHRhcmdldENsYXNzID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3RbeF07XHJcblx0XHRcdGlmICh0YXJnZXRDbGFzcy5zZWFyY2goJ3RoZW1lLScpID4gLTEpIHtcclxuXHRcdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3ModGFyZ2V0Q2xhc3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdCQoJ2JvZHknKS5hZGRDbGFzcyh0YXJnZXRUaGVtZUNsYXNzKTtcclxuXHRcdCQoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWUudG9nZ2xlQXR0ciArJ10nKS5ub3QodGhpcykuY2xvc2VzdCgnLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lTGlzdEl0ZW1DTGFzcykucmVtb3ZlQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWUuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuJysgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0SXRlbUNMYXNzKS5hZGRDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZS5hY3RpdmVDbGFzcyk7XHJcblx0XHRcclxuXHRcdGlmIChDb29raWVzKSB7XHJcblx0XHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUsIHRhcmdldFRoZW1lQ2xhc3MpO1xyXG5cdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VyKCd0aGVtZS1jaGFuZ2UnKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gMTEuNCBUaGVtZSBQYW5lbCAtIEhlYWRlciBUaGVtZVxyXG5cdCQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZUhlYWRlci50b2dnbGVBdHRyICsnXScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRhcmdldENvb2tpZSA9ICcnO1xyXG5cdFx0XHJcblx0XHRpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xyXG5cdFx0XHQkKCcuJysgYXBwLmhlYWRlci5jbGFzcykuYWRkQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWVIZWFkZXIuY2xhc3MpO1xyXG5cdFx0XHR0YXJnZXRDb29raWUgPSBhcHAudGhlbWVQYW5lbC50aGVtZUhlYWRlci5jbGFzcztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJy4nKyBhcHAuaGVhZGVyLmNsYXNzKS5yZW1vdmVDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZUhlYWRlci5jbGFzcyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChDb29raWVzKSB7XHJcblx0XHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lSGVhZGVyLmNvb2tpZU5hbWUsIHRhcmdldENvb2tpZSk7XHJcblx0XHR9XHJcblx0fSk7XHJcbiAgICBcclxuXHQvLyAxMS41IFRoZW1lIFBhbmVsIC0gSGVhZGVyIEZpeGVkXHJcblx0JChkb2N1bWVudCkub24oJ2NoYW5nZScsICcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lSGVhZGVyRml4ZWQudG9nZ2xlQXR0ciArJ10nLCBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoZWFkZXJGaXhlZCA9ICcnO1xyXG5cdFx0XHJcblx0XHRpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xyXG5cdFx0XHQkKGFwcC5pZCkuYWRkQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWVIZWFkZXJGaXhlZC5jbGFzcyk7XHJcblx0XHRcdGhlYWRlckZpeGVkID0gYXBwLnRoZW1lUGFuZWwudGhlbWVIZWFkZXJGaXhlZC5jbGFzcztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmICgkKCdbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVTaWRlYmFyRml4ZWQudG9nZ2xlQXR0ciArJ10nKS5pcygnOmNoZWNrZWQnKSAmJiAhYXBwLmlzTW9iaWxlKSB7XHJcblx0XHRcdFx0YWxlcnQoYXBwLnRoZW1lUGFuZWwudGhlbWVIZWFkZXJGaXhlZC5lcnJvck1lc3NhZ2UpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdCQoJ1snKyBhcHAudGhlbWVQYW5lbC50aGVtZVNpZGViYXJGaXhlZC50b2dnbGVBdHRyICsnXScpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcblx0XHRcdFx0JCgnWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lU2lkZWJhckZpeGVkLnRvZ2dsZUF0dHIgKyddJykudHJpZ2dlcignY2hhbmdlJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0JChhcHAuaWQpLnJlbW92ZUNsYXNzKGFwcC50aGVtZVBhbmVsLnRoZW1lSGVhZGVyRml4ZWQuY2xhc3MpO1xyXG5cdFx0XHRoZWFkZXJGaXhlZCA9IGFwcC50aGVtZVBhbmVsLnRoZW1lSGVhZGVyRml4ZWQuZGlzYWJsZWRDbGFzcztcclxuXHRcdH1cclxuXHRcdGlmIChDb29raWVzKSB7XHJcblx0XHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lSGVhZGVyRml4ZWQuY29va2llTmFtZSwgaGVhZGVyRml4ZWQpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyAxMS41IFRoZW1lIFBhbmVsIC0gU2lkZWJhciBHcmlkXHJcblx0JChkb2N1bWVudCkub24oJ2NoYW5nZScsICcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lU2lkZWJhckdyaWQudG9nZ2xlQXR0ciArJ10nLCBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzaWRlYmFyR3JpZCA9ICcnO1xyXG5cdFx0aWYgKCQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcclxuXHRcdFx0JChhcHAuc2lkZWJhci5pZCkuYWRkQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWVTaWRlYmFyR3JpZC5jbGFzcyk7XHJcblx0XHRcdHNpZGViYXJHcmlkID0gYXBwLnRoZW1lUGFuZWwudGhlbWVTaWRlYmFyR3JpZC5jbGFzcztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoYXBwLnNpZGViYXIuaWQpLnJlbW92ZUNsYXNzKGFwcC50aGVtZVBhbmVsLnRoZW1lU2lkZWJhckdyaWQuY2xhc3MpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoQ29va2llcykge1xyXG5cdFx0XHRDb29raWVzLnNldChhcHAudGhlbWVQYW5lbC50aGVtZVNpZGViYXJHcmlkLmNvb2tpZU5hbWUsIHNpZGViYXJHcmlkKTtcclxuXHRcdH1cclxuXHR9KTtcclxuICBcclxuICAvLyAxMS42IFRoZW1lIFBhbmVsIC0gU2lkZWJhciBGaXhlZFxyXG5cdCQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZVNpZGViYXJGaXhlZC50b2dnbGVBdHRyICsnXScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNpZGViYXJGaXhlZCA9ICcnO1xyXG5cdFx0dmFyIHRhcmdldFNpZGViYXIgPSAnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnOm5vdCguJysgYXBwLnNpZGViYXJFbmQuY2xhc3MgKycpIFsnKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyddJztcclxuXHRcdFxyXG5cdFx0aWYgKCFhcHAuaXNNb2JpbGUpIHtcclxuXHRcdFx0aWYgKCQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcclxuXHRcdFx0XHRpZiAoISQoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVIZWFkZXJGaXhlZC50b2dnbGVBdHRyICsnXScpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcblx0XHRcdFx0XHRhbGVydChhcHAudGhlbWVQYW5lbC50aGVtZVNpZGViYXJGaXhlZC5lcnJvck1lc3NhZ2UpO1xyXG5cdFx0XHRcdFx0JChhcHAudGhlbWVQYW5lbC50aGVtZUhlYWRlckZpeGVkLnRvZ2dsZUF0dHIpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuXHRcdFx0XHRcdCQoYXBwLnRoZW1lUGFuZWwudGhlbWVIZWFkZXJGaXhlZC50b2dnbGVBdHRyKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuXHRcdFx0XHRcdCQoYXBwLmlkKS5hZGRDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZUhlYWRlckZpeGVkLmNsYXNzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC50aGVtZVBhbmVsLnRoZW1lU2lkZWJhckZpeGVkLmNsYXNzKTtcclxuXHRcdFx0XHRnZW5lcmF0ZVNjcm9sbGJhcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNpZGViYXIpKTtcclxuXHRcdFx0XHRzaWRlYmFyRml4ZWQgPSBhcHAudGhlbWVQYW5lbC50aGVtZVNpZGViYXJGaXhlZC5jbGFzcztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKGFwcC5pZCkucmVtb3ZlQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWVTaWRlYmFyRml4ZWQuY2xhc3MpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGFwcC5zaWRlYmFyLnNjcm9sbEJhci5kb20uZGVzdHJveSgpO1xyXG5cdFx0XHRcdGFwcC5zaWRlYmFyLnNjcm9sbEJhci5kb20gPSAnJztcclxuXHRcdFx0XHRzaWRlYmFyRml4ZWQgPSBhcHAudGhlbWVQYW5lbC50aGVtZVNpZGViYXJGaXhlZC5kaXNhYmxlZENsYXNzO1xyXG5cdFx0XHRcdCQodGFyZ2V0U2lkZWJhcikucmVtb3ZlQXR0cihhcHAuc2Nyb2xsQmFyLmluaXRBdHRyKTtcclxuXHRcdFx0fVxyXG5cdFx0XHJcblx0XHRcdGlmIChDb29raWVzKSB7XHJcblx0XHRcdFx0Q29va2llcy5zZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVTaWRlYmFyRml4ZWQuY29va2llTmFtZSwgc2lkZWJhckZpeGVkKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCh0aGlzKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcblx0XHRcdGFsZXJ0KGFwcC50aGVtZVBhbmVsLnRoZW1lU2lkZWJhckZpeGVkLm1vYmlsZUVycm9yTWVzc2FnZSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIDExLjcgVGhlbWUgUGFuZWwgLSBHcmFkaWVudCBFbmFibGVkXHJcblx0JChkb2N1bWVudCkub24oJ2NoYW5nZScsICcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lR3JhZGllbnRFbmFibGVkLnRvZ2dsZUF0dHIgKyddJywgZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZ3JhZGllbnRFbmFibGVkID0gJyc7XHJcblx0XHRpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xyXG5cdFx0XHQkKGFwcC5pZCkuYWRkQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWVHcmFkaWVudEVuYWJsZWQuY2xhc3MpO1xyXG5cdFx0XHRncmFkaWVudEVuYWJsZWQgPSBhcHAudGhlbWVQYW5lbC50aGVtZUdyYWRpZW50RW5hYmxlZC5jbGFzcztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZUdyYWRpZW50RW5hYmxlZC5jbGFzcyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChDb29raWVzKSB7XHJcblx0XHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lR3JhZGllbnRFbmFibGVkLmNvb2tpZU5hbWUsIGdyYWRpZW50RW5hYmxlZCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIDExLjggVGhlbWUgUGFuZWwgLSBEYXJrIE1vZGVcclxuXHQkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVEYXJrTW9kZS50b2dnbGVBdHRyICsnXScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRhcmdldENvb2tpZSA9ICcnO1xyXG5cdFx0XHJcblx0XHRpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xyXG5cdFx0XHQkKCdodG1sJykuYWRkQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWVEYXJrTW9kZS5jbGFzcyk7XHJcblx0XHRcdHRhcmdldENvb2tpZSA9IGFwcC50aGVtZVBhbmVsLnRoZW1lRGFya01vZGUuY2xhc3M7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKCdodG1sJykucmVtb3ZlQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWVEYXJrTW9kZS5jbGFzcyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChDb29raWVzKSB7XHJcblx0XHRcdEFwcC5pbml0VmFyaWFibGUoKTtcclxuXHRcdFx0Q29va2llcy5zZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVEYXJrTW9kZS5jb29raWVOYW1lLCB0YXJnZXRDb29raWUpO1xyXG5cdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VyKCd0aGVtZS1jaGFuZ2UnKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHQvLyAxMS45IFRoZW1lIFBhbmVsIC0gUGFnZSBMb2FkIFNldHRpbmdzIENvb2tpZXMgIFxyXG5cdGlmIChDb29raWVzKSB7XHJcblx0XHRpZiAoQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWUuY29va2llTmFtZSkpIHtcclxuXHRcdFx0JCgnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZS50b2dnbGVBdHRyICsnXScgKyAnWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lLmNsYXNzQXR0ciArJz1cIicrIENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUpICsnXCJdJykudHJpZ2dlcignY2xpY2snKTtcclxuXHRcdH1cclxuXHRcdGlmIChDb29raWVzLmdldChhcHAudGhlbWVQYW5lbC50aGVtZUhlYWRlci5jb29raWVOYW1lKSkge1xyXG5cdFx0XHQkKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lSGVhZGVyLnRvZ2dsZUF0dHIgKyddJykucHJvcCgnY2hlY2tlZCcsIHRydWUpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lU2lkZWJhckdyaWQuY29va2llTmFtZSkpIHtcclxuXHRcdFx0JCgnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZVNpZGViYXJHcmlkLnRvZ2dsZUF0dHIgKyddJykucHJvcCgnY2hlY2tlZCcsIHRydWUpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lR3JhZGllbnRFbmFibGVkLmNvb2tpZU5hbWUpKSB7XHJcblx0XHRcdCQoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVHcmFkaWVudEVuYWJsZWQudG9nZ2xlQXR0ciArJ10nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkudHJpZ2dlcignY2hhbmdlJyk7XHJcblx0XHR9XHJcblx0XHRpZiAoQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVTaWRlYmFyRml4ZWQuY29va2llTmFtZSkgJiYgQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVTaWRlYmFyRml4ZWQuY29va2llTmFtZSkgPT0gYXBwLnRoZW1lUGFuZWwudGhlbWVTaWRlYmFyRml4ZWQuZGlzYWJsZWRDbGFzcykge1xyXG5cdFx0XHQkKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lU2lkZWJhckZpeGVkLnRvZ2dsZUF0dHIgKyddJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuXHRcdH1cclxuXHRcdGlmIChDb29raWVzLmdldChhcHAudGhlbWVQYW5lbC50aGVtZUhlYWRlckZpeGVkLmNvb2tpZU5hbWUpICYmIENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lSGVhZGVyRml4ZWQuY29va2llTmFtZSkgPT0gYXBwLnRoZW1lUGFuZWwudGhlbWVIZWFkZXJGaXhlZC5kaXNhYmxlZENsYXNzKSB7XHJcblx0XHRcdCQoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVIZWFkZXJGaXhlZC50b2dnbGVBdHRyICsnXScpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSkudHJpZ2dlcignY2hhbmdlJyk7XHJcblx0XHR9XHJcblx0XHRpZiAoQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVEYXJrTW9kZS5jb29raWVOYW1lKSkge1xyXG5cdFx0XHQkKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lRGFya01vZGUudG9nZ2xlQXR0ciArJ10nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkudHJpZ2dlcignY2hhbmdlJyk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuXHJcbi8qIDEyLiBIYW5kbGUgU2F2ZSBQYW5lbCBQb3NpdGlvbiBGdW5jdGlvblxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVNhdmVQYW5lbFBvc2l0aW9uID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdGlmICgkKCcuJyArIGFwcC5wYW5lbC5zb3J0YWJsZS5jbGFzcykubGVuZ3RoICE9PSAwKSB7XHJcblx0XHR2YXIgbmV3VmFsdWUgPSBbXTtcclxuXHRcdHZhciBpbmRleCA9IDA7XHJcblx0XHQkLndoZW4oJCgnLicgKyBhcHAucGFuZWwuc29ydGFibGUuY2xhc3MpLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYW5lbFNvcnRhYmxlRWxlbWVudCA9ICQodGhpcykuZmluZCgnWycrIGFwcC5wYW5lbC5zb3J0YWJsZS5hdHRyICsnXScpO1xyXG5cdFx0XHRpZiAocGFuZWxTb3J0YWJsZUVsZW1lbnQubGVuZ3RoICE9PSAwKSB7XHJcblx0XHRcdFx0dmFyIGNvbHVtblZhbHVlID0gW107XHJcblx0XHRcdFx0JChwYW5lbFNvcnRhYmxlRWxlbWVudCkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciB0YXJnZXRTb3J0SWQgPSAkKHRoaXMpLmF0dHIoYXBwLnBhbmVsLnNvcnRhYmxlLmF0dHIpO1xyXG5cdFx0XHRcdFx0Y29sdW1uVmFsdWUucHVzaCh7aWQ6IHRhcmdldFNvcnRJZH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdG5ld1ZhbHVlLnB1c2goY29sdW1uVmFsdWUpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG5ld1ZhbHVlLnB1c2goW10pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGluZGV4Kys7XHJcblx0XHR9KSkuZG9uZShmdW5jdGlvbigpIHtcclxuXHRcdFx0Y29uc29sZS5sb2cobmV3VmFsdWUpO1xyXG5cdFx0XHR2YXIgdGFyZ2V0UGFnZSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG5cdFx0XHQgICAgdGFyZ2V0UGFnZSA9IHRhcmdldFBhZ2Uuc3BsaXQoJz8nKTtcclxuXHRcdFx0ICAgIHRhcmdldFBhZ2UgPSB0YXJnZXRQYWdlWzBdO1xyXG5cdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0YXJnZXRQYWdlLCBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSkpO1xyXG5cdFx0XHQkKGVsZW1lbnQpLmZpbmQoJ1snKyBhcHAucGFuZWwuc29ydGFibGUuc3Bpbm5lckF0dHIgKyddJykuZGVsYXkoNTAwKS5mYWRlT3V0KDUwMCwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmUoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG5cclxuLyogMTMuIEhhbmRsZSBEcmFnZ2FibGUgUGFuZWwgTG9jYWwgU3RvcmFnZSBGdW5jdGlvblxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZUxvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHRyeSB7XHJcblx0XHRpZiAodHlwZW9mKFN0b3JhZ2UpICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YobG9jYWxTdG9yYWdlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0dmFyIHRhcmdldFBhZ2UgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuXHRcdFx0XHRcdHRhcmdldFBhZ2UgPSB0YXJnZXRQYWdlLnNwbGl0KCc/Jyk7XHJcblx0XHRcdFx0XHR0YXJnZXRQYWdlID0gdGFyZ2V0UGFnZVswXTtcclxuXHRcdFx0dmFyIHBhbmVsUG9zaXRpb25EYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGFyZ2V0UGFnZSk7XHJcblxyXG5cdFx0XHRpZiAocGFuZWxQb3NpdGlvbkRhdGEpIHtcclxuXHRcdFx0XHRwYW5lbFBvc2l0aW9uRGF0YSA9IEpTT04ucGFyc2UocGFuZWxQb3NpdGlvbkRhdGEpO1xyXG5cdFx0XHRcdHZhciBpID0gMDtcclxuXHRcdFx0XHQkLndoZW4oJCgnLicrIGFwcC5wYW5lbC5jbGFzcyArJzpub3QoWycrIGFwcC5wYW5lbC5zb3J0YWJsZS5kaXNhYmxlQXR0ciArJ10pJykucGFyZW50KCdbJysgYXBwLnBhbmVsLnNvcnRhYmxlLnBhcmVudEF0dHIgKyddJykuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciBzdG9yYWdlRGF0YSA9IHBhbmVsUG9zaXRpb25EYXRhW2ldOyBcclxuXHRcdFx0XHRcdHZhciB0YXJnZXRDb2x1bW4gPSAkKHRoaXMpO1xyXG5cdFx0XHRcdFx0aWYgKHN0b3JhZ2VEYXRhKSB7XHJcblx0XHRcdFx0XHRcdCQuZWFjaChzdG9yYWdlRGF0YSwgZnVuY3Rpb24oaW5kZXgsIGRhdGEpIHtcclxuXHRcdFx0XHRcdFx0XHR2YXIgdGFyZ2V0SWQgPSAkKCdbJysgYXBwLnBhbmVsLnNvcnRhYmxlLmF0dHIgKyc9XCInKyBkYXRhLmlkICsnXCJdJykubm90KCdbZGF0YS1pbml0PVwidHJ1ZVwiXScpO1xyXG5cdFx0XHRcdFx0XHRcdGlmICgkKHRhcmdldElkKS5sZW5ndGggIT09IDApIHtcclxuXHRcdFx0XHRcdFx0XHRcdHZhciB0YXJnZXRIdG1sID0gJCh0YXJnZXRJZCkuY2xvbmUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdCQodGFyZ2V0SWQpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0JCh0YXJnZXRDb2x1bW4pLmFwcGVuZCh0YXJnZXRIdG1sKTtcclxuXHRcdFx0XHRcdFx0XHRcdCQoJ1snKyBhcHAucGFuZWwuc29ydGFibGUuYXR0ciArJz1cIicrIGRhdGEuaWQgKydcIl0nKS5hdHRyKCdkYXRhLWluaXQnLCd0cnVlJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGkrKztcclxuXHRcdFx0XHR9KSkuZG9uZShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChhcHAucGFuZWwubG9jYWxTdG9yYWdlLmxvYWRlZEV2ZW50KSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGFsZXJ0KGFwcC5wYW5lbC5sb2NhbFN0b3JhZ2Uubm90U3VwcG9ydE1lc3NhZ2UpOyBcclxuXHRcdH1cclxuXHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG5cdH1cclxufTtcclxuXHJcblxyXG4vKiAxNC4gSGFuZGxlIFJlc2V0IExvY2FsIFN0b3JhZ2VcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVSZXNldExvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnBhbmVsLmxvY2FsU3RvcmFnZS5yZXNldC5hdHRyICsnXScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHR2YXIgdGFyZ2V0TW9kYWxIdG1sID0gJycrXHJcblx0XHQnPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiBkYXRhLW1vZGFsLWlkPVwiJysgYXBwLnBhbmVsLmxvY2FsU3RvcmFnZS5yZXNldC5tb2RhbC5pZCArJ1wiPicrXHJcblx0XHQnICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj4nK1xyXG5cdFx0JyAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj4nK1xyXG5cdFx0JyAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj4nK1xyXG5cdFx0JyAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPjxpIGNsYXNzPVwiZmEgZmEtcmVkbyBtZS0xXCI+PC9pPiAnKyBhcHAucGFuZWwubG9jYWxTdG9yYWdlLnJlc2V0Lm1vZGFsLnRpdGxlICsnPC9oND4nK1xyXG5cdFx0JyAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiICcrIGFwcC5ib290c3RyYXAubW9kYWwuZGlzbWlzc0F0dHIgKyc+PC9idXR0b24+JytcclxuXHRcdCcgICAgICAgICAgICA8L2Rpdj4nK1xyXG5cdFx0JyAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+JytcclxuXHRcdCcgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LScrIGFwcC5wYW5lbC5sb2NhbFN0b3JhZ2UucmVzZXQubW9kYWwuYWxlcnQgKycgbWItMFwiPicrIGFwcC5wYW5lbC5sb2NhbFN0b3JhZ2UucmVzZXQubW9kYWwubWVzc2FnZSArJzwvZGl2PicrXHJcblx0XHQnICAgICAgICAgICAgPC9kaXY+JytcclxuXHRcdCcgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+JytcclxuXHRcdCcgICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwiICcrIGFwcC5ib290c3RyYXAubW9kYWwuZGlzbWlzc0F0dHIgKyc+PGkgY2xhc3M9XCJmYSBmYS10aW1lcyBtZS0xXCI+PC9pPiBObzwvYT4nK1xyXG5cdFx0JyAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi1pbnZlcnNlXCIgJysgYXBwLnBhbmVsLmxvY2FsU3RvcmFnZS5yZXNldC5tb2RhbC5jb25maXJtUmVzZXRBdHRyICsnPjxpIGNsYXNzPVwiZmEgZmEtY2hlY2sgbWUtMVwiPjwvaT4gWWVzPC9hPicrXHJcblx0XHQnICAgICAgICAgICAgPC9kaXY+JytcclxuXHRcdCcgICAgICAgIDwvZGl2PicrXHJcblx0XHQnICAgIDwvZGl2PicrXHJcblx0XHQnPC9kaXY+JztcclxuXHJcblx0XHQkKCdib2R5JykuYXBwZW5kKHRhcmdldE1vZGFsSHRtbCk7XHJcblx0XHQkKCdbZGF0YS1tb2RhbC1pZD1cIicrIGFwcC5wYW5lbC5sb2NhbFN0b3JhZ2UucmVzZXQubW9kYWwuaWQgKydcIl0nKS5tb2RhbCgnc2hvdycpO1xyXG5cdH0pO1xyXG5cdCQoZG9jdW1lbnQpLm9uKGFwcC5ib290c3RyYXAubW9kYWwuZXZlbnQuaGlkZGVuLCAnW2RhdGEtbW9kYWwtaWQ9XCInKyBhcHAucGFuZWwubG9jYWxTdG9yYWdlLnJlc2V0Lm1vZGFsLmlkICsnXCJdJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0JCgnW2RhdGEtbW9kYWwtaWQ9XCInKyBhcHAucGFuZWwubG9jYWxTdG9yYWdlLnJlc2V0Lm1vZGFsLmlkICsnXCJdJykucmVtb3ZlKCk7XHJcblx0fSk7XHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAucGFuZWwubG9jYWxTdG9yYWdlLnJlc2V0Lm1vZGFsLmNvbmZpcm1SZXNldEF0dHIgKyddJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0dmFyIGxvY2FsU3RvcmFnZU5hbWUgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuXHRcdGxvY2FsU3RvcmFnZU5hbWUgPSBsb2NhbFN0b3JhZ2VOYW1lLnNwbGl0KCc/Jyk7XHJcblx0XHRsb2NhbFN0b3JhZ2VOYW1lID0gbG9jYWxTdG9yYWdlTmFtZVswXTtcclxuXHRcdGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGxvY2FsU3RvcmFnZU5hbWUpO1xyXG5cclxuXHRcdGxvY2F0aW9uLnJlbG9hZCgpO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuXHJcbi8qIDE1LiBIYW5kbGUgVW5saW1pdGVkIE5hdiBUYWJzXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgaGFuZGxlVW5saW1pdGVkVGFic1JlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcblx0Ly8gZnVuY3Rpb24gaGFuZGxlIHRhYiBvdmVyZmxvdyBzY3JvbGwgd2lkdGggXHJcblx0ZnVuY3Rpb24gaGFuZGxlVGFiT3ZlcmZsb3dTY3JvbGxXaWR0aChvYmosIGFuaW1hdGlvblNwZWVkKSB7XHJcblx0XHR2YXIgdGFyZ2V0RWxtID0gJy4nKyBhcHAuYm9vdHN0cmFwLm5hdi50YWJzLml0ZW1DbGFzcyArICcgLicrIGFwcC5ib290c3RyYXAubmF2LnRhYnMuYWN0aXZlQ2xhc3M7XHJcblxyXG5cdFx0aWYgKCQob2JqKS5maW5kKCcgPiAuJysgYXBwLmJvb3RzdHJhcC5uYXYudGFicy5pdGVtQ2xhc3MpLmZpcnN0KCkpIHtcclxuXHRcdFx0dGFyZ2V0RWxtID0gJChvYmopLmZpbmQoJy4nKyBhcHAuYm9vdHN0cmFwLm5hdi50YWJzLml0ZW1DbGFzcyArICcgLicrIGFwcC5ib290c3RyYXAubmF2LnRhYnMuYWN0aXZlQ2xhc3MpLmNsb3Nlc3QoJy4nKyBhcHAuYm9vdHN0cmFwLm5hdi50YWJzLml0ZW1DbGFzcyk7XHJcblx0XHR9XHJcblx0XHR2YXIgdGFyZ2V0Q3NzID0gKCQoJ2JvZHknKS5jc3MoJ2RpcmVjdGlvbicpID09ICdydGwnKSA/ICdtYXJnaW4tcmlnaHQnIDogJ21hcmdpbi1sZWZ0JztcclxuXHRcdHZhciBtYXJnaW5MZWZ0ID0gcGFyc2VJbnQoJChvYmopLmNzcyh0YXJnZXRDc3MpKTsgIFxyXG5cdFx0dmFyIHZpZXdXaWR0aCA9ICQob2JqKS53aWR0aCgpO1xyXG5cdFx0dmFyIHByZXZXaWR0aCA9ICQob2JqKS5maW5kKHRhcmdldEVsbSkud2lkdGgoKTtcclxuXHRcdHZhciBzcGVlZCA9IChhbmltYXRpb25TcGVlZCA+IC0xKSA/IGFuaW1hdGlvblNwZWVkIDogMTUwO1xyXG5cdFx0dmFyIGZ1bGxXaWR0aCA9IDA7XHJcblxyXG5cdFx0JChvYmopLmZpbmQodGFyZ2V0RWxtKS5wcmV2QWxsKCkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0cHJldldpZHRoICs9ICQodGhpcykud2lkdGgoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQob2JqKS5maW5kKCcuJysgYXBwLmJvb3RzdHJhcC5uYXYudGFicy5pdGVtQ2xhc3MpLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdGZ1bGxXaWR0aCArPSAkKHRoaXMpLndpZHRoKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAocHJldldpZHRoID49IHZpZXdXaWR0aCkge1xyXG5cdFx0XHR2YXIgZmluYWxTY3JvbGxXaWR0aCA9IHByZXZXaWR0aCAtIHZpZXdXaWR0aDtcclxuXHRcdFx0aWYgKGZ1bGxXaWR0aCAhPSBwcmV2V2lkdGgpIHtcclxuXHRcdFx0XHRmaW5hbFNjcm9sbFdpZHRoICs9IDQwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICgkKCdib2R5JykuY3NzKCdkaXJlY3Rpb24nKSA9PSAncnRsJykge1xyXG5cdFx0XHRcdCQob2JqKS5maW5kKCcuJysgYXBwLmJvb3RzdHJhcC5uYXYudGFicy5jbGFzcykuYW5pbWF0ZSh7IG1hcmdpblJpZ2h0OiAnLScgKyBmaW5hbFNjcm9sbFdpZHRoICsgJ3B4J30sIHNwZWVkKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKG9iaikuZmluZCgnLicrIGFwcC5ib290c3RyYXAubmF2LnRhYnMuY2xhc3MpLmFuaW1hdGUoeyBtYXJnaW5MZWZ0OiAnLScgKyBmaW5hbFNjcm9sbFdpZHRoICsgJ3B4J30sIHNwZWVkKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChwcmV2V2lkdGggIT0gZnVsbFdpZHRoICYmIGZ1bGxXaWR0aCA+PSB2aWV3V2lkdGgpIHtcclxuXHRcdFx0JChvYmopLmFkZENsYXNzKGFwcC51bmxpbWl0ZWRUYWJzLm92ZXJmbG93UmlnaHQuY2xhc3MpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JChvYmopLnJlbW92ZUNsYXNzKGFwcC51bmxpbWl0ZWRUYWJzLm92ZXJmbG93UmlnaHQuY2xhc3MpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChwcmV2V2lkdGggPj0gdmlld1dpZHRoICYmIGZ1bGxXaWR0aCA+PSB2aWV3V2lkdGgpIHtcclxuXHRcdFx0JChvYmopLmFkZENsYXNzKGFwcC51bmxpbWl0ZWRUYWJzLm92ZXJmbG93TGVmdC5jbGFzcyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKG9iaikucmVtb3ZlQ2xhc3MoYXBwLnVubGltaXRlZFRhYnMub3ZlcmZsb3dMZWZ0LmNsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcbiAgICBcclxuXHQvLyBmdW5jdGlvbiBoYW5kbGUgdGFiIGJ1dHRvbiBhY3Rpb24gLSBuZXh0IC8gcHJldlxyXG5cdGZ1bmN0aW9uIGhhbmRsZVRhYkJ1dHRvbkFjdGlvbihlbGVtZW50LCBkaXJlY3Rpb24pIHtcclxuXHRcdHZhciBvYmogPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJy4nICsgYXBwLnVubGltaXRlZFRhYnMuY2xhc3MpO1xyXG5cdFx0dmFyIHRhcmdldENzcyA9ICgkKCdib2R5JykuY3NzKCdkaXJlY3Rpb24nKSA9PSAncnRsJykgPyAnbWFyZ2luLXJpZ2h0JyA6ICdtYXJnaW4tbGVmdCc7XHJcblx0XHR2YXIgbWFyZ2luTGVmdCA9IHBhcnNlSW50KCQob2JqKS5maW5kKCcuJysgYXBwLmJvb3RzdHJhcC5uYXYudGFicy5jbGFzcykuY3NzKHRhcmdldENzcykpOyAgXHJcblx0XHR2YXIgY29udGFpbmVyV2lkdGggPSAkKG9iaikud2lkdGgoKTtcclxuXHRcdHZhciB0b3RhbFdpZHRoID0gMDtcclxuXHRcdHZhciBmaW5hbFNjcm9sbFdpZHRoID0gMDtcclxuXHJcblx0XHQkKG9iaikuZmluZCgnbGknKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoISQodGhpcykuaGFzQ2xhc3MoYXBwLnVubGltaXRlZFRhYnMuYnV0dG9uTmV4dC5jbGFzcykgJiYgISQodGhpcykuaGFzQ2xhc3MoYXBwLnVubGltaXRlZFRhYnMuYnV0dG9uUHJldi5jbGFzcykpIHtcclxuXHRcdFx0XHR0b3RhbFdpZHRoICs9ICQodGhpcykud2lkdGgoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0c3dpdGNoIChkaXJlY3Rpb24pIHtcclxuXHRcdFx0Y2FzZSAnbmV4dCc6XHJcblx0XHRcdFx0dmFyIHdpZHRoTGVmdCA9IHRvdGFsV2lkdGggKyBtYXJnaW5MZWZ0IC0gY29udGFpbmVyV2lkdGg7XHJcblx0XHRcdFx0aWYgKHdpZHRoTGVmdCA8PSBjb250YWluZXJXaWR0aCkge1xyXG5cdFx0XHRcdFx0ZmluYWxTY3JvbGxXaWR0aCA9IHdpZHRoTGVmdCAtIG1hcmdpbkxlZnQ7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHQkKG9iaikucmVtb3ZlQ2xhc3MoYXBwLnVubGltaXRlZFRhYnMub3ZlcmZsb3dSaWdodC5jbGFzcyk7XHJcblx0XHRcdFx0XHR9LCAxNTApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRmaW5hbFNjcm9sbFdpZHRoID0gY29udGFpbmVyV2lkdGggLSBtYXJnaW5MZWZ0IC0gODA7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoZmluYWxTY3JvbGxXaWR0aCAhPT0gMCkge1xyXG5cdFx0XHRcdFx0aWYgKCQoJ2JvZHknKS5jc3MoJ2RpcmVjdGlvbicpICE9ICdydGwnKSB7XHJcblx0XHRcdFx0XHRcdCQob2JqKS5maW5kKCcuJysgYXBwLmJvb3RzdHJhcC5uYXYudGFicy5jbGFzcykuYW5pbWF0ZSh7IG1hcmdpbkxlZnQ6ICctJyArIGZpbmFsU2Nyb2xsV2lkdGggKyAncHgnfSwgMTUwLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHQkKG9iaikuYWRkQ2xhc3MoYXBwLnVubGltaXRlZFRhYnMub3ZlcmZsb3dMZWZ0LmNsYXNzKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQkKG9iaikuZmluZCgnLicrIGFwcC5ib290c3RyYXAubmF2LnRhYnMuY2xhc3MpLmFuaW1hdGUoeyBtYXJnaW5SaWdodDogJy0nICsgZmluYWxTY3JvbGxXaWR0aCArICdweCd9LCAxNTAsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdCQob2JqKS5hZGRDbGFzcyhhcHAudW5saW1pdGVkVGFicy5vdmVyZmxvd0xlZnQuY2xhc3MpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAncHJldic6XHJcblx0XHRcdHZhciB3aWR0aExlZnQgPSAtbWFyZ2luTGVmdDtcclxuXHJcblx0XHRcdGlmICh3aWR0aExlZnQgPD0gY29udGFpbmVyV2lkdGgpIHtcclxuXHRcdFx0XHQkKG9iaikucmVtb3ZlQ2xhc3MoYXBwLnVubGltaXRlZFRhYnMub3ZlcmZsb3dMZWZ0LmNsYXNzKTtcclxuXHRcdFx0XHRmaW5hbFNjcm9sbFdpZHRoID0gMDtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRmaW5hbFNjcm9sbFdpZHRoID0gd2lkdGhMZWZ0IC0gY29udGFpbmVyV2lkdGggKyA4MDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoJCgnYm9keScpLmNzcygnZGlyZWN0aW9uJykgIT0gJ3J0bCcpIHtcclxuXHRcdFx0XHQkKG9iaikuZmluZCgnLicrIGFwcC5ib290c3RyYXAubmF2LnRhYnMuY2xhc3MpLmFuaW1hdGUoeyBtYXJnaW5MZWZ0OiAnLScgKyBmaW5hbFNjcm9sbFdpZHRoICsgJ3B4J30sIDE1MCwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHQkKG9iaikuYWRkQ2xhc3MoYXBwLnVubGltaXRlZFRhYnMub3ZlcmZsb3dSaWdodC5jbGFzcyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JChvYmopLmZpbmQoJy4nKyBhcHAuYm9vdHN0cmFwLm5hdi50YWJzLmNsYXNzKS5hbmltYXRlKHsgbWFyZ2luUmlnaHQ6ICctJyArIGZpbmFsU2Nyb2xsV2lkdGggKyAncHgnfSwgMTUwLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCQob2JqKS5hZGRDbGFzcyhhcHAudW5saW1pdGVkVGFicy5vdmVyZmxvd1JpZ2h0LmNsYXNzKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIGhhbmRsZSBwYWdlIGxvYWQgYWN0aXZlIHRhYiBmb2N1c1xyXG5cdGZ1bmN0aW9uIGhhbmRsZVBhZ2VMb2FkVGFiRm9jdXMoKSB7XHJcblx0XHQkKCcuJyArIGFwcC51bmxpbWl0ZWRUYWJzLmNsYXNzKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRoYW5kbGVUYWJPdmVyZmxvd1Njcm9sbFdpZHRoKHRoaXMsIDApO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvLyBoYW5kbGUgdGFiIG5leHQgYnV0dG9uIGNsaWNrIGFjdGlvblxyXG5cdCQoJ1snKyBhcHAudW5saW1pdGVkVGFicy5idXR0b25OZXh0LnRvZ2dsZUF0dHIgKyAnXScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGhhbmRsZVRhYkJ1dHRvbkFjdGlvbih0aGlzLCduZXh0Jyk7XHJcblx0fSk7XHJcblxyXG5cdC8vIGhhbmRsZSB0YWIgcHJldiBidXR0b24gY2xpY2sgYWN0aW9uXHJcblx0JCgnWycrIGFwcC51bmxpbWl0ZWRUYWJzLmJ1dHRvblByZXYudG9nZ2xlQXR0ciArICddJykuY2xpY2soZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0aGFuZGxlVGFiQnV0dG9uQWN0aW9uKHRoaXMsJ3ByZXYnKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gaGFuZGxlIHVubGltaXRlZCB0YWJzIHJlc3BvbnNpdmUgc2V0dGluZ1xyXG5cdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XHJcblx0XHQkKCcuJysgYXBwLnVubGltaXRlZFRhYnMuY2xhc3MgKycgLicrIGFwcC5ib290c3RyYXAubmF2LnRhYnMuY2xhc3MpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcblx0XHRoYW5kbGVQYWdlTG9hZFRhYkZvY3VzKCk7XHJcblx0fSk7XHJcblxyXG5cdGhhbmRsZVBhZ2VMb2FkVGFiRm9jdXMoKTtcclxufTtcclxuXHJcblxyXG4vKiAxNi4gSGFuZGxlIFRvcCBNZW51IC0gVW5saW1pdGVkIFRvcCBNZW51IFJlbmRlclxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVVubGltaXRlZFRvcE1lbnVSZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHQvLyBmdW5jdGlvbiBoYW5kbGUgbWVudSBidXR0b24gYWN0aW9uIC0gbmV4dCAvIHByZXZcclxuXHRmdW5jdGlvbiBoYW5kbGVNZW51QnV0dG9uQWN0aW9uKGVsZW1lbnQsIGRpcmVjdGlvbikge1xyXG5cdFx0dmFyIG9iaiA9ICQoZWxlbWVudCkuY2xvc2VzdCgnLicgKyBhcHAudG9wTWVudS5tZW51LmNsYXNzKTtcclxuXHRcdHZhciB0YXJnZXRDc3MgPSAoJCgnYm9keScpLmNzcygnZGlyZWN0aW9uJykgPT0gJ3J0bCcpID8gJ21hcmdpbi1yaWdodCcgOiAnbWFyZ2luLWxlZnQnO1xyXG5cdFx0dmFyIG1hcmdpbkxlZnQgPSBwYXJzZUludCgkKG9iaikuY3NzKHRhcmdldENzcykpOyAgXHJcblx0XHR2YXIgY29udGFpbmVyV2lkdGggPSAkKCcuJysgYXBwLnRvcE1lbnUuY2xhc3MpLndpZHRoKCkgLSA4ODtcclxuXHRcdHZhciB0b3RhbFdpZHRoID0gMDtcclxuXHRcdHZhciBmaW5hbFNjcm9sbFdpZHRoID0gMDtcclxuXHJcblx0XHQkKG9iaikuZmluZCgnLicgKyBhcHAudG9wTWVudS5tZW51Lml0ZW1DbGFzcykuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCEkKHRoaXMpLmhhc0NsYXNzKGFwcC50b3BNZW51LmNvbnRyb2wuY2xhc3MpKSB7XHJcblx0XHRcdFx0dG90YWxXaWR0aCArPSAkKHRoaXMpLndpZHRoKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcblx0XHRcdGNhc2UgJ25leHQnOlxyXG5cdFx0XHRcdHZhciB3aWR0aExlZnQgPSB0b3RhbFdpZHRoICsgbWFyZ2luTGVmdCAtIGNvbnRhaW5lcldpZHRoO1xyXG5cdFx0XHRcdGlmICh3aWR0aExlZnQgPD0gY29udGFpbmVyV2lkdGgpIHtcclxuXHRcdFx0XHRcdGZpbmFsU2Nyb2xsV2lkdGggPSB3aWR0aExlZnQgLSBtYXJnaW5MZWZ0ICsgMTI4O1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0JChvYmopLmZpbmQoJy4nKyBhcHAudG9wTWVudS5jb250cm9sLmNsYXNzICsnLicrIGFwcC50b3BNZW51LmNvbnRyb2wuYnV0dG9uTmV4dC5jbGFzcykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcclxuXHRcdFx0XHRcdH0sIDE1MCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGZpbmFsU2Nyb2xsV2lkdGggPSBjb250YWluZXJXaWR0aCAtIG1hcmdpbkxlZnQgLSAxMjg7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoZmluYWxTY3JvbGxXaWR0aCAhPT0gMCkge1xyXG5cdFx0XHRcdFx0aWYgKCQoJ2JvZHknKS5jc3MoJ2RpcmVjdGlvbicpICE9ICdydGwnKSB7IFxyXG5cdFx0XHRcdFx0XHQkKG9iaikuYW5pbWF0ZSh7IG1hcmdpbkxlZnQ6ICctJyArIGZpbmFsU2Nyb2xsV2lkdGggKyAncHgnfSwgMTUwLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHQkKG9iaikuZmluZCgnLicrIGFwcC50b3BNZW51LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE1lbnUuY29udHJvbC5idXR0b25QcmV2LmNsYXNzKS5hZGRDbGFzcygnc2hvdycpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdCQob2JqKS5hbmltYXRlKHsgbWFyZ2luUmlnaHQ6ICctJyArIGZpbmFsU2Nyb2xsV2lkdGggKyAncHgnfSwgMTUwLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHQkKG9iaikuZmluZCgnLicrIGFwcC50b3BNZW51LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE1lbnUuY29udHJvbC5idXR0b25QcmV2LmNsYXNzKS5hZGRDbGFzcygnc2hvdycpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3ByZXYnOlxyXG5cdFx0XHRcdHZhciB3aWR0aExlZnQgPSAtbWFyZ2luTGVmdDtcclxuXHJcblx0XHRcdFx0aWYgKHdpZHRoTGVmdCA8PSBjb250YWluZXJXaWR0aCkge1xyXG5cdFx0XHRcdFx0JChvYmopLmZpbmQoJy4nKyBhcHAudG9wTWVudS5jb250cm9sLmNsYXNzICsnLicrIGFwcC50b3BNZW51LmNvbnRyb2wuYnV0dG9uUHJldi5jbGFzcykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcclxuXHRcdFx0XHRcdGZpbmFsU2Nyb2xsV2lkdGggPSAwO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRmaW5hbFNjcm9sbFdpZHRoID0gd2lkdGhMZWZ0IC0gY29udGFpbmVyV2lkdGggKyA4ODtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCQoJ2JvZHknKS5jc3MoJ2RpcmVjdGlvbicpICE9ICdydGwnKSB7IFxyXG5cdFx0XHRcdFx0JChvYmopLmFuaW1hdGUoeyBtYXJnaW5MZWZ0OiAnLScgKyBmaW5hbFNjcm9sbFdpZHRoICsgJ3B4J30sIDE1MCwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdCQob2JqKS5maW5kKCcuJysgYXBwLnRvcE1lbnUuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTWVudS5jb250cm9sLmJ1dHRvbk5leHQuY2xhc3MpLmFkZENsYXNzKCdzaG93Jyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JChvYmopLmFuaW1hdGUoeyBtYXJnaW5SaWdodDogJy0nICsgZmluYWxTY3JvbGxXaWR0aCArICdweCd9LCAxNTAsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHQkKG9iaikuZmluZCgnLicrIGFwcC50b3BNZW51LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE1lbnUuY29udHJvbC5idXR0b25OZXh0LmNsYXNzKS5hZGRDbGFzcygnc2hvdycpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBoYW5kbGUgcGFnZSBsb2FkIGFjdGl2ZSBtZW51IGZvY3VzXHJcblx0ZnVuY3Rpb24gaGFuZGxlUGFnZUxvYWRNZW51Rm9jdXMoKSB7XHJcblx0XHR2YXIgdGFyZ2V0TWVudSA9ICQoJy4nKyBhcHAudG9wTWVudS5jbGFzcyArJyAuJysgYXBwLnRvcE1lbnUubWVudS5jbGFzcyk7XHJcblx0XHR2YXIgdGFyZ2V0TGlzdCA9ICQoJy4nKyBhcHAudG9wTWVudS5jbGFzcyArJyAuJysgYXBwLnRvcE1lbnUubWVudS5jbGFzcyArICcgPiAuJyArIGFwcC50b3BNZW51Lm1lbnUuaXRlbUNsYXNzKTtcclxuXHRcdHZhciB0YXJnZXRBY3RpdmVMaXN0ID0gJCgnLicrIGFwcC50b3BNZW51LmNsYXNzICsnIC4nKyBhcHAudG9wTWVudS5tZW51LmNsYXNzICsgJyA+IC4nKyBhcHAudG9wTWVudS5tZW51Lml0ZW1DbGFzcyArJy5hY3RpdmUnKTtcclxuXHRcdHZhciB0YXJnZXRDb250YWluZXIgPSAkKCcuJysgYXBwLnRvcE1lbnUuY2xhc3MgKycnKTtcclxuXHRcdHZhciB0YXJnZXRDc3MgPSAoJCgnYm9keScpLmNzcygnZGlyZWN0aW9uJykgPT0gJ3J0bCcpID8gJ21hcmdpbi1yaWdodCcgOiAnbWFyZ2luLWxlZnQnO1xyXG5cdFx0dmFyIG1hcmdpbkxlZnQgPSBwYXJzZUludCgkKHRhcmdldE1lbnUpLmNzcyh0YXJnZXRDc3MpKTsgIFxyXG5cdFx0dmFyIHZpZXdXaWR0aCA9ICQodGFyZ2V0Q29udGFpbmVyKS53aWR0aCgpIC0gMTI4O1xyXG5cdFx0dmFyIHByZXZXaWR0aCA9ICQoJy4nKyBhcHAudG9wTWVudS5jbGFzcyArJyAuJysgYXBwLnRvcE1lbnUubWVudS5jbGFzcyArICcgPiAuJysgYXBwLnRvcE1lbnUubWVudS5pdGVtQ2xhc3MgKycuYWN0aXZlJykud2lkdGgoKTtcclxuXHRcdHZhciBzcGVlZCA9IDA7XHJcblx0XHR2YXIgZnVsbFdpZHRoID0gMDtcclxuXHJcblx0XHQkKHRhcmdldEFjdGl2ZUxpc3QpLnByZXZBbGwoKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRwcmV2V2lkdGggKz0gJCh0aGlzKS53aWR0aCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCh0YXJnZXRMaXN0KS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoISQodGhpcykuaGFzQ2xhc3MoYXBwLnRvcE1lbnUuY29udHJvbC5jbGFzcykpIHtcclxuXHRcdFx0XHRmdWxsV2lkdGggKz0gJCh0aGlzKS53aWR0aCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAocHJldldpZHRoID49IHZpZXdXaWR0aCkge1xyXG5cdFx0XHR2YXIgZmluYWxTY3JvbGxXaWR0aCA9IHByZXZXaWR0aCAtIHZpZXdXaWR0aCArIDEyODtcclxuXHRcdFx0aWYgKCQoJ2JvZHknKS5jc3MoJ2RpcmVjdGlvbicpICE9ICdydGwnKSB7IFxyXG5cdFx0XHRcdCQodGFyZ2V0TWVudSkuYW5pbWF0ZSh7IG1hcmdpbkxlZnQ6ICctJyArIGZpbmFsU2Nyb2xsV2lkdGggKyAncHgnfSwgc3BlZWQpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQodGFyZ2V0TWVudSkuYW5pbWF0ZSh7IG1hcmdpblJpZ2h0OiAnLScgKyBmaW5hbFNjcm9sbFdpZHRoICsgJ3B4J30sIHNwZWVkKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChwcmV2V2lkdGggIT0gZnVsbFdpZHRoICYmIGZ1bGxXaWR0aCA+PSB2aWV3V2lkdGgpIHtcclxuXHRcdFx0JCh0YXJnZXRNZW51KS5maW5kKCcuJysgYXBwLnRvcE1lbnUuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTWVudS5jb250cm9sLmJ1dHRvbk5leHQuY2xhc3MpLmFkZENsYXNzKGFwcC50b3BNZW51LmNvbnRyb2wuc2hvd0NsYXNzKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQodGFyZ2V0TWVudSkuZmluZCgnLicrIGFwcC50b3BNZW51LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE1lbnUuY29udHJvbC5idXR0b25OZXh0LmNsYXNzKS5yZW1vdmVDbGFzcyhhcHAudG9wTWVudS5jb250cm9sLnNob3dDbGFzcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHByZXZXaWR0aCA+PSB2aWV3V2lkdGggJiYgZnVsbFdpZHRoID49IHZpZXdXaWR0aCkge1xyXG5cdFx0XHQkKHRhcmdldE1lbnUpLmZpbmQoJy4nKyBhcHAudG9wTWVudS5jb250cm9sLmNsYXNzICsnLicrIGFwcC50b3BNZW51LmNvbnRyb2wuYnV0dG9uUHJldi5jbGFzcykuYWRkQ2xhc3MoYXBwLnRvcE1lbnUuY29udHJvbC5zaG93Q2xhc3MpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCh0YXJnZXRNZW51KS5maW5kKCcuJysgYXBwLnRvcE1lbnUuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTWVudS5jb250cm9sLmJ1dHRvblByZXYuY2xhc3MpLnJlbW92ZUNsYXNzKGFwcC50b3BNZW51LmNvbnRyb2wuc2hvd0NsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIGhhbmRsZSBtZW51IG5leHQgYnV0dG9uIGNsaWNrIGFjdGlvblxyXG5cdCQoJ1snKyBhcHAudG9wTWVudS5jb250cm9sLmJ1dHRvbk5leHQudG9nZ2xlQXR0ciArJ10nKS5jbGljayhmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRoYW5kbGVNZW51QnV0dG9uQWN0aW9uKHRoaXMsJ25leHQnKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gaGFuZGxlIG1lbnUgcHJldiBidXR0b24gY2xpY2sgYWN0aW9uXHJcblx0JCgnWycrIGFwcC50b3BNZW51LmNvbnRyb2wuYnV0dG9uUHJldi50b2dnbGVBdHRyICsnXScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGhhbmRsZU1lbnVCdXR0b25BY3Rpb24odGhpcywncHJldicpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBoYW5kbGUgdW5saW1pdGVkIG1lbnUgcmVzcG9uc2l2ZSBzZXR0aW5nXHJcblx0JCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcclxuXHRcdGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDc2Nykge1xyXG5cdFx0XHQkKCcuJysgYXBwLnRvcE1lbnUuY2xhc3MgKycgLicrIGFwcC50b3BNZW51Lm1lbnUuY2xhc3MpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcblx0XHRcdGhhbmRsZVBhZ2VMb2FkTWVudUZvY3VzKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKCcuJysgYXBwLnRvcE1lbnUuY2xhc3MgKycgLicrIGFwcC50b3BNZW51Lm1lbnUuY2xhc3MpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGhhbmRsZVBhZ2VMb2FkTWVudUZvY3VzKCk7XHJcbn07XHJcblxyXG5cclxuLyogMTcuIEhhbmRsZSBUb3AgTWVudSAtIFN1YiBNZW51IFRvZ2dsZVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVRvcE1lbnVTdWJNZW51ID0gZnVuY3Rpb24oKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0XHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy4nKyBhcHAudG9wTWVudS5jbGFzcyArJyAuJysgYXBwLnRvcE1lbnUubWVudS5zdWJtZW51LmNsYXNzICsnIC4nKyBhcHAudG9wTWVudS5tZW51Lmhhc1N1YkNsYXNzICsnID4gLicrIGFwcC50b3BNZW51Lm1lbnUubGlua0NsYXNzLCBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLmNsb3Nlc3QoJy4nICsgYXBwLnRvcE1lbnUubWVudS5pdGVtQ2xhc3MpLmZpbmQoJy4nICsgYXBwLnRvcE1lbnUubWVudS5zdWJtZW51LmNsYXNzKS5maXJzdCgpO1xyXG5cdFx0dmFyIG90aGVyTWVudSA9ICQodGhpcykuY2xvc2VzdCgnLicrIGFwcC50b3BNZW51Lm1lbnUuaXRlbUNsYXNzKS5maW5kKCcuJysgYXBwLnRvcE1lbnUubWVudS5zdWJtZW51LmNsYXNzKS5ub3QodGFyZ2V0KTtcclxuXHRcdCQob3RoZXJNZW51KS5ub3QodGFyZ2V0KS5zbGlkZVVwKDI1MCwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQodGhpcykuY2xvc2VzdCgnLicrIGFwcC50b3BNZW51Lm1lbnUuaXRlbUNsYXNzKS5yZW1vdmVDbGFzcyhhcHAudG9wTWVudS5tZW51LmV4cGFuZENsYXNzKTtcclxuXHRcdH0pO1xyXG5cdFx0JCh0YXJnZXQpLnNsaWRlVG9nZ2xlKDI1MCwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB0YXJnZXRNZW51ID0gJCh0aGlzKS5jbG9zZXN0KCcuJysgYXBwLnRvcE1lbnUubWVudS5pdGVtQ2xhc3MpO1xyXG5cdFx0XHRpZiAoJCh0YXJnZXRNZW51KS5oYXNDbGFzcyhhcHAudG9wTWVudS5tZW51LmV4cGFuZENsYXNzKSkge1xyXG5cdFx0XHRcdCQodGFyZ2V0TWVudSkucmVtb3ZlQ2xhc3MoYXBwLnRvcE1lbnUubWVudS5leHBhbmRDbGFzcyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCh0YXJnZXRNZW51KS5hZGRDbGFzcyhhcHAudG9wTWVudS5tZW51LmV4cGFuZENsYXNzKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuLyogMTguIEhhbmRsZSBUb3AgTWVudSAtIE1vYmlsZSBTdWIgTWVudSBUb2dnbGVcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVNb2JpbGVUb3BNZW51U3ViTWVudSA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuJysgYXBwLnRvcE1lbnUuY2xhc3MgKycgLicrIGFwcC50b3BNZW51Lm1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnRvcE1lbnUubWVudS5pdGVtQ2xhc3MgKycuJysgYXBwLnRvcE1lbnUubWVudS5oYXNTdWJDbGFzcyArJyA+IC4nKyBhcHAudG9wTWVudS5tZW51LmxpbmtDbGFzcyArJycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2Nykge1xyXG5cdFx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzKS5jbG9zZXN0KCcuJyArIGFwcC50b3BNZW51Lm1lbnUuaXRlbUNsYXNzKS5maW5kKCcuJyArIGFwcC50b3BNZW51Lm1lbnUuc3VibWVudS5jbGFzcykuZmlyc3QoKTtcclxuXHRcdFx0dmFyIG90aGVyTWVudSA9ICQodGhpcykuY2xvc2VzdCgnLicrIGFwcC50b3BNZW51Lm1lbnUuY2xhc3MpLmZpbmQoJy4nICsgYXBwLnRvcE1lbnUubWVudS5oYXNTdWJDbGFzcyArICcgLicrIGFwcC50b3BNZW51Lm1lbnUuc3VibWVudS5jbGFzcykubm90KHRhcmdldCk7XHJcblx0XHRcdCQob3RoZXJNZW51KS5ub3QodGFyZ2V0KS5zbGlkZVVwKDI1MCwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuJyArIGFwcC50b3BNZW51Lm1lbnUuaXRlbUNsYXNzKS5yZW1vdmVDbGFzcygnZXhwYW5kJyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQkKHRhcmdldCkuc2xpZGVUb2dnbGUoMjUwLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0SXRlbSA9ICQodGhpcykuY2xvc2VzdCgnLicrIGFwcC50b3BNZW51Lm1lbnUuaXRlbUNsYXNzKTtcclxuXHRcdFx0XHRpZiAoJCh0YXJnZXRJdGVtKS5oYXNDbGFzcyhhcHAudG9wTWVudS5tZW51LmV4cGFuZENsYXNzKSkge1xyXG5cdFx0XHRcdFx0JCh0YXJnZXRJdGVtKS5yZW1vdmVDbGFzcyhhcHAudG9wTWVudS5tZW51LmV4cGFuZENsYXNzKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JCh0YXJnZXRJdGVtKS5hZGRDbGFzcyhhcHAudG9wTWVudS5tZW51LmV4cGFuZENsYXNzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuXHJcbi8qIDE5LiBIYW5kbGUgVG9wIE1lbnUgLSBNb2JpbGUgVG9wIE1lbnUgVG9nZ2xlXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgaGFuZGxlVG9wTWVudU1vYmlsZVRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnRvcE1lbnUubW9iaWxlLnRvZ2dsZUF0dHIgKyddJywgZnVuY3Rpb24oKSB7XHJcblx0XHQkKCcuJysgYXBwLnRvcE1lbnUuY2xhc3MpLnNsaWRlVG9nZ2xlKDI1MCk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuLyogMjAuIEhhbmRsZSBQYWdlIFNjcm9sbCBDbGFzc1xyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVBhZ2VTY3JvbGxDbGFzcyA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBjaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDApIHtcclxuXHRcdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5oZWFkZXIuaGFzU2Nyb2xsQ2xhc3MpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JChhcHAuaWQpLnJlbW92ZUNsYXNzKGFwcC5oZWFkZXIuaGFzU2Nyb2xsQ2xhc3MpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0Y2hlY2tTY3JvbGwoKTtcclxuXHR9KTtcclxuXHRcclxuXHRjaGVja1Njcm9sbCgpO1xyXG59O1xyXG5cclxuXHJcbi8qIDIxLiBIYW5kbGUgVG9nZ2xlIE5hdmJhciBQcm9maWxlXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgaGFuZGxlVG9nZ2xlTmF2UHJvZmlsZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBleHBhbmRUaW1lID0gKCQoJy4nKyBhcHAuc2lkZWJhci5jbGFzcykuYXR0cihhcHAuc2lkZWJhci5tZW51LmRpc2FibGVBbmltYXRpb25BdHRyKSkgPyAwIDogYXBwLnNpZGViYXIubWVudS5hbmltYXRpb25UaW1lO1xyXG5cclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnWycrIGFwcC5zaWRlYmFyLnByb2ZpbGUudG9nZ2xlQXR0ciArJ10nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0dmFyIHRhcmdldE1lbnUgPSAkKHRoaXMpLmNsb3Nlc3QoJy4nKyBhcHAuc2lkZWJhci5wcm9maWxlLmNsYXNzKTtcclxuXHRcdHZhciB0YXJnZXRQcm9maWxlID0gJCh0aGlzKS5hdHRyKGFwcC5zaWRlYmFyLnByb2ZpbGUudGFyZ2V0QXR0cik7XHJcblxyXG5cdFx0aWYgKCQodGFyZ2V0UHJvZmlsZSkuaXMoJzp2aXNpYmxlJykpIHtcclxuXHRcdFx0JCh0YXJnZXRNZW51KS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmFjdGl2ZUNsYXNzKTtcclxuXHRcdFx0JCh0YXJnZXRQcm9maWxlKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmNsb3NpbmdDbGFzcyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKHRhcmdldE1lbnUpLmFkZENsYXNzKGFwcC5zaWRlYmFyLm1lbnUuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0XHQkKHRhcmdldFByb2ZpbGUpLmFkZENsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kaW5nQ2xhc3MpO1xyXG5cdFx0fVxyXG5cdFx0JCh0YXJnZXRQcm9maWxlKS5zbGlkZVRvZ2dsZShleHBhbmRUaW1lLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCEkKHRhcmdldFByb2ZpbGUpLmlzKCc6dmlzaWJsZScpKSB7XHJcblx0XHRcdFx0JCh0YXJnZXRQcm9maWxlKS5hZGRDbGFzcyhhcHAuc2lkZWJhci5tZW51LmNsb3NlZENsYXNzKTtcclxuXHRcdFx0XHQkKHRhcmdldFByb2ZpbGUpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQodGFyZ2V0UHJvZmlsZSkuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcyk7XHJcblx0XHRcdFx0JCh0YXJnZXRQcm9maWxlKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmNsb3NlZENsYXNzKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkKHRhcmdldFByb2ZpbGUpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kaW5nQ2xhc3MgKyAnICcgKyBhcHAuc2lkZWJhci5tZW51LmNsb3NpbmdDbGFzcyk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiAyMi4gSGFuZGxlIFNpZGViYXIgU2Nyb2xsIE1lbW9yeVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVNpZGViYXJTY3JvbGxNZW1vcnkgPSBmdW5jdGlvbigpIHtcclxuXHRpZiAoIWFwcC5pc01vYmlsZSkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0aWYgKHR5cGVvZihTdG9yYWdlKSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mKGxvY2FsU3RvcmFnZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0JCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnOm5vdCguJysgYXBwLnNpZGViYXJFbmQuY2xhc3MgKycpIFsnKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyddJykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oYXBwLnNpZGViYXIuc2Nyb2xsQmFyLmxvY2FsU3RvcmFnZSwgJCh0aGlzKS5zY3JvbGxUb3AoKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHJcblx0XHRcdFx0dmFyIGRlZmF1bHRTY3JvbGwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShhcHAuc2lkZWJhci5zY3JvbGxCYXIubG9jYWxTdG9yYWdlKTtcclxuXHRcdFx0XHRpZiAoZGVmYXVsdFNjcm9sbCkge1xyXG5cdFx0XHRcdFx0JCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnOm5vdCguJysgYXBwLnNpZGViYXJFbmQuY2xhc3MgKycpIFsnKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyddJykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogZGVmYXVsdFNjcm9sbCArICdweCd9LCAwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5cclxuLyogMjMuIEhhbmRsZSBTaWRlYmFyIE1pbmlmeSBTdWIgTWVudVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZU1vdXNlb3ZlckZsb2F0U3ViTWVudSA9IGZ1bmN0aW9uKGVsbSkge1xyXG5cdGNsZWFyVGltZW91dChhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUudGltZW91dCk7XHJcbn07XHJcbnZhciBoYW5kbGVNb3VzZW91dEZsb2F0U3ViTWVudSA9IGZ1bmN0aW9uKGVsbSkge1xyXG5cdGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmlkKS5yZW1vdmUoKTtcclxuXHR9LCAxNTApO1xyXG59O1xyXG52YXIgaGFuZGxlR2V0SGlkZGVuTWVudUhlaWdodCA9IGZ1bmN0aW9uKGVsbSkge1xyXG5cdHZhciBwcmV2U3R5bGUgPSAkKGVsbSkuYXR0cignc3R5bGUnKTtcclxuXHQkKGVsbSkuYXR0cignc3R5bGUnLCAncG9zaXRpb246IGFic29sdXRlOyB2aXNpYmlsaXR5OiBoaWRkZW47IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQnKTtcclxuXHR2YXIgdGFyZ2V0SGVpZ2h0ICA9ICQoZWxtKS5oZWlnaHQoKTtcclxuXHQkKGVsbSkuYXR0cignc3R5bGUnLCAnJyk7XHJcblx0XHJcblx0cmV0dXJuIHRhcmdldEhlaWdodDtcclxufVxyXG52YXIgaGFuZGxlU2lkZWJhck1pbmlmeUZsb2F0TWVudSA9IGZ1bmN0aW9uKCkge1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5pZCArJyAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKycuJysgYXBwLnNpZGViYXIubWVudS5oYXNTdWJDbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1MaW5rQ2xhc3MgKycnLCBmdW5jdGlvbihlKSB7XHJcblx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzKS5uZXh0KCcuJyArIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcyk7XHJcblx0XHR2YXIgdGFyZ2V0SXRlbSA9ICQodGFyZ2V0KS5jbG9zZXN0KCcuJyArIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzKTtcclxuXHRcdHZhciBjbG9zZSA9IGZhbHNlO1xyXG5cdFx0dmFyIGV4cGFuZCA9IGZhbHNlO1xyXG5cdFx0aWYgKCQodGFyZ2V0KS5pcygnOnZpc2libGUnKSkge1xyXG5cdFx0XHQkKHRhcmdldEl0ZW0pLmFkZENsYXNzKCdjbG9zaW5nJyk7XHJcblx0XHRcdGNsb3NlID0gdHJ1ZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQodGFyZ2V0SXRlbSkuYWRkQ2xhc3MoJ2V4cGFuZGluZycpO1xyXG5cdFx0XHRleHBhbmQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0JCh0YXJnZXQpLnNsaWRlVG9nZ2xlKHtcclxuXHRcdFx0ZHVyYXRpb246IGFwcC5zaWRlYmFyLm1lbnUuYW5pbWF0aW9uVGltZSxcclxuXHRcdFx0cHJvZ3Jlc3M6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciB0YXJnZXRNZW51ID0gJChhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuaWQpO1xyXG5cdFx0XHRcdHZhciB0YXJnZXRIZWlnaHQgPSAkKHRhcmdldE1lbnUpLmhlaWdodCgpO1xyXG5cdFx0XHRcdHZhciB0YXJnZXRPZmZzZXQgPSAkKHRhcmdldE1lbnUpLm9mZnNldCgpO1xyXG5cdFx0XHRcdHZhciB0YXJnZXRPcmlUb3AgPSAkKHRhcmdldE1lbnUpLmF0dHIoJ2RhdGEtb2Zmc2V0LXRvcCcpO1xyXG5cdFx0XHRcdHZhciB0YXJnZXRNZW51VG9wID0gJCh0YXJnZXRNZW51KS5hdHRyKCdkYXRhLW1lbnUtb2Zmc2V0LXRvcCcpO1xyXG5cdFx0XHRcdHZhciB0YXJnZXRUb3AgXHQgPSB0YXJnZXRPZmZzZXQudG9wIC0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG5cdFx0XHRcdHZhciB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcblx0XHRcdFx0aWYgKGNsb3NlKSB7XHJcblx0XHRcdFx0XHRpZiAodGFyZ2V0VG9wID4gdGFyZ2V0T3JpVG9wKSB7XHJcblx0XHRcdFx0XHRcdHRhcmdldFRvcCA9ICh0YXJnZXRUb3AgPiB0YXJnZXRPcmlUb3ApID8gdGFyZ2V0T3JpVG9wIDogdGFyZ2V0VG9wO1xyXG5cdFx0XHRcdFx0XHQkKGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5pZCkuY3NzKHsgJ3RvcCc6IHRhcmdldFRvcCArICdweCcsICdib3R0b20nOiAnYXV0bycgfSk7XHJcblx0XHRcdFx0XHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmFycm93LmlkKS5jc3MoeyAndG9wJzogJzIwcHgnLCAnYm90dG9tJzogJ2F1dG8nIH0pO1xyXG5cdFx0XHRcdFx0XHQkKGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5saW5lLmlkKS5jc3MoeyAndG9wJzogJzIwcHgnLCAnYm90dG9tJzogJ2F1dG8nIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoZXhwYW5kKSB7XHJcblx0XHRcdFx0XHRpZiAoKHdpbmRvd0hlaWdodCAtIHRhcmdldFRvcCkgPCB0YXJnZXRIZWlnaHQpIHtcclxuXHRcdFx0XHRcdFx0dmFyIGFycm93Qm90dG9tID0gKHdpbmRvd0hlaWdodCAtIHRhcmdldE1lbnVUb3ApIC0gMjI7XHJcblx0XHRcdFx0XHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmlkKS5jc3MoeyAndG9wJzogJ2F1dG8nLCAnYm90dG9tJzogMCB9KTtcclxuXHRcdFx0XHRcdFx0JChhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuYXJyb3cuaWQpLmNzcyh7ICd0b3AnOiAnYXV0bycsICdib3R0b20nOiBhcnJvd0JvdHRvbSArICdweCcgfSk7XHJcblx0XHRcdFx0XHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmxpbmUuaWQpLmNzcyh7ICd0b3AnOiAnMjBweCcsICdib3R0b20nOiBhcnJvd0JvdHRvbSArICdweCcgfSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCQodGFyZ2V0KS5pcygnOnZpc2libGUnKSkge1xyXG5cdFx0XHRcdFx0JCh0YXJnZXRJdGVtKS5hZGRDbGFzcygnZXhwYW5kJyk7XHJcblx0XHRcdFx0XHQkKHRhcmdldEl0ZW0pLnJlbW92ZUNsYXNzKCdjbG9zZWQnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JCh0YXJnZXRJdGVtKS5hZGRDbGFzcygnY2xvc2VkJyk7XHJcblx0XHRcdFx0XHQkKHRhcmdldEl0ZW0pLnJlbW92ZUNsYXNzKCdleHBhbmQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JCh0YXJnZXRJdGVtKS5yZW1vdmVDbGFzcygnY2xvc2luZyBleHBhbmRpbmcnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcblx0JChkb2N1bWVudCkub24oe1xyXG5cdFx0bW91c2VlbnRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKGFwcC5pZCkuaGFzQ2xhc3MoYXBwLnNpZGViYXIubWluaWZ5LnRvZ2dsZWRDbGFzcykpIHtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LnRpbWVvdXQpO1xyXG5cclxuXHRcdFx0XHR2YXIgdGFyZ2V0TWVudSA9ICQodGhpcykuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzKS5maW5kKCcuJyArIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcykuZmlyc3QoKTtcclxuXHRcdFx0XHRpZiAoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmRvbSA9PSB0aGlzICYmICQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmlkKS5sZW5ndGggIT09IDApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0YXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmRvbSA9IHRoaXM7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHZhciB0YXJnZXRNZW51SHRtbCA9ICQodGFyZ2V0TWVudSkuaHRtbCgpO1xyXG5cdFx0XHRcdGlmICh0YXJnZXRNZW51SHRtbCkge1xyXG5cdFx0XHRcdFx0dmFyIHNpZGViYXJPZmZzZXQgPSAkKGFwcC5zaWRlYmFyLmlkKS5vZmZzZXQoKTtcclxuXHRcdFx0XHRcdHZhciBzaWRlYmFyV2lkdGggID0gcGFyc2VJbnQoJChhcHAuc2lkZWJhci5pZCkud2lkdGgoKSk7XHJcblx0XHRcdFx0XHR2YXIgc2lkZWJhclggICAgICA9ICghJChhcHAuaWQpLmhhc0NsYXNzKGFwcC5zaWRlYmFyRW5kLmNsYXNzKSAmJiAkKCdib2R5JykuY3NzKCdkaXJlY3Rpb24nKSAhPSAncnRsJykgPyAoc2lkZWJhck9mZnNldC5sZWZ0ICsgc2lkZWJhcldpZHRoKSA6ICgkKHdpbmRvdykud2lkdGgoKSAtIHNpZGViYXJPZmZzZXQubGVmdCk7XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0SGVpZ2h0ICA9IGhhbmRsZUdldEhpZGRlbk1lbnVIZWlnaHQodGFyZ2V0TWVudSk7XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0T2Zmc2V0ICA9ICQodGhpcykub2Zmc2V0KCk7XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0VG9wICAgICA9IHRhcmdldE9mZnNldC50b3AgLSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0TGVmdCAgICA9ICghJChhcHAuaWQpLmhhc0NsYXNzKGFwcC5zaWRlYmFyRW5kLmNsYXNzKSAmJiAkKCdib2R5JykuY3NzKCdkaXJlY3Rpb24nKSAhPSAncnRsJykgPyBzaWRlYmFyWCA6ICdhdXRvJztcclxuXHRcdFx0XHRcdHZhciB0YXJnZXRSaWdodCAgID0gKCEkKGFwcC5pZCkuaGFzQ2xhc3MoYXBwLnNpZGViYXJFbmQuY2xhc3MpICYmICQoJ2JvZHknKS5jc3MoJ2RpcmVjdGlvbicpICE9ICdydGwnKSA/ICdhdXRvJyA6IHNpZGViYXJYO1xyXG5cdFx0XHRcdFx0dmFyIHdpbmRvd0hlaWdodCAgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoJChhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuaWQpLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHR2YXIgb3ZlcmZsb3dDbGFzcyA9ICcnO1xyXG5cdFx0XHRcdFx0XHRpZiAodGFyZ2V0SGVpZ2h0ID4gd2luZG93SGVpZ2h0KSB7XHJcblx0XHRcdFx0XHRcdFx0b3ZlcmZsb3dDbGFzcyA9IGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5vdmVyZmxvdy5jbGFzcztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR0YXJnZXRNZW51SHRtbCA9ICcnK1xyXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIicrIGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5jb250YWluZXIuY2xhc3MgKydcIiBpZD1cIicrIGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5pZC5yZXBsYWNlKCcjJywnJykgKydcIiBkYXRhLW9mZnNldC10b3A9XCInKyB0YXJnZXRUb3AgKydcIiBkYXRhLW1lbnUtb2Zmc2V0LXRvcD1cIicrIHRhcmdldFRvcCArJ1wiIG9ubW91c2VvdmVyPVwiaGFuZGxlTW91c2VvdmVyRmxvYXRTdWJNZW51KHRoaXMpXCIgb25tb3VzZW91dD1cImhhbmRsZU1vdXNlb3V0RmxvYXRTdWJNZW51KHRoaXMpXCI+JytcclxuXHRcdFx0XHRcdFx0J1x0PGRpdiBjbGFzcz1cIicrIGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5hcnJvdy5jbGFzcyArJ1wiIGlkPVwiJysgYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmFycm93LmlkLnJlcGxhY2UoJyMnLCAnJykgKydcIj48L2Rpdj4nK1xyXG5cdFx0XHRcdFx0XHQnXHQ8ZGl2IGNsYXNzPVwiJysgYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmxpbmUuY2xhc3MgKydcIiBpZD1cIicrIGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5saW5lLmlkLnJlcGxhY2UoJyMnLCAnJykgKydcIj48L2Rpdj4nK1xyXG5cdFx0XHRcdFx0XHQnXHQ8ZGl2IGNsYXNzPVwiJysgYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmNsYXNzICsnICcrIG92ZXJmbG93Q2xhc3MgKydcIj4nKyB0YXJnZXRNZW51SHRtbCArICc8L2Rpdj4nK1xyXG5cdFx0XHRcdFx0XHQnPC9kaXY+JztcclxuXHRcdFx0XHRcdFx0JChhcHAuaWQpLmFwcGVuZCh0YXJnZXRNZW51SHRtbCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpZiAodGFyZ2V0SGVpZ2h0ID4gd2luZG93SGVpZ2h0KSB7XHJcblx0XHRcdFx0XHRcdFx0JChhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuaWQgKyAnIC4nKyBhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuY2xhc3MpLmFkZENsYXNzKGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5vdmVyZmxvdy5jbGFzcyk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0JChhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuaWQgKyBhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuY2xhc3MpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5vdmVyZmxvdy5jbGFzcyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0JChhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuaWQpLmF0dHIoJ2RhdGEtb2Zmc2V0LXRvcCcsIHRhcmdldFRvcCk7XHJcblx0XHRcdFx0XHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmlkKS5hdHRyKCdkYXRhLW1lbnUtb2Zmc2V0LXRvcCcsIHRhcmdldFRvcCk7XHJcblx0XHRcdFx0XHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmlkICsgJyAuJyArIGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5jbGFzcykuaHRtbCh0YXJnZXRNZW51SHRtbCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0SGVpZ2h0ID0gJChhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuaWQpLmhlaWdodCgpO1xyXG5cdFx0XHRcdFx0aWYgKCh3aW5kb3dIZWlnaHQgLSB0YXJnZXRUb3ApID4gdGFyZ2V0SGVpZ2h0KSB7XHJcblx0XHRcdFx0XHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmlkKS5jc3Moe1xyXG5cdFx0XHRcdFx0XHRcdCd0b3AnOiB0YXJnZXRUb3AsXHJcblx0XHRcdFx0XHRcdFx0J2xlZnQnOiB0YXJnZXRMZWZ0LFxyXG5cdFx0XHRcdFx0XHRcdCdib3R0b20nOiAnYXV0bycsXHJcblx0XHRcdFx0XHRcdFx0J3JpZ2h0JzogdGFyZ2V0UmlnaHRcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmFycm93LmlkKS5jc3MoeyAndG9wJzogJzIwcHgnLCAnYm90dG9tJzogJ2F1dG8nIH0pO1xyXG5cdFx0XHRcdFx0XHQkKGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5saW5lLmlkKS5jc3MoeyAndG9wJzogJzIwcHgnLCAnYm90dG9tJzogJ2F1dG8nIH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0JChhcHAuc2lkZWJhci5mbG9hdFN1Ym1lbnUuaWQpLmNzcyh7XHJcblx0XHRcdFx0XHRcdFx0J2JvdHRvbSc6IDAsXHJcblx0XHRcdFx0XHRcdFx0J3RvcCc6ICdhdXRvJyxcclxuXHRcdFx0XHRcdFx0XHQnbGVmdCc6IHRhcmdldExlZnQsXHJcblx0XHRcdFx0XHRcdFx0J3JpZ2h0JzogdGFyZ2V0UmlnaHRcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdHZhciBhcnJvd0JvdHRvbSA9ICh3aW5kb3dIZWlnaHQgLSB0YXJnZXRUb3ApIC0gMjE7XHJcblx0XHRcdFx0XHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmFycm93LmlkKS5jc3MoeyAndG9wJzogJ2F1dG8nLCAnYm90dG9tJzogYXJyb3dCb3R0b20gKyAncHgnIH0pO1xyXG5cdFx0XHRcdFx0XHQkKGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5saW5lLmlkKS5jc3MoeyAndG9wJzogJzIwcHgnLCAnYm90dG9tJzogYXJyb3dCb3R0b20gKyAncHgnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5saW5lLmlkKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS5kb20gPSAnJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRtb3VzZWxlYXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQoYXBwLmlkKS5oYXNDbGFzcyhhcHAuc2lkZWJhci5taW5pZnkudG9nZ2xlZENsYXNzKSkge1xyXG5cdFx0XHRcdGFwcC5zaWRlYmFyLmZsb2F0U3VibWVudS50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmxpbmUuaWQpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0YXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmRvbSA9ICcnO1xyXG5cdFx0XHRcdH0sIDI1MCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LCAnLicgKyBhcHAuc2lkZWJhci5jbGFzcyArICcgLicrIGFwcC5zaWRlYmFyLm1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKycuJysgYXBwLnNpZGViYXIubWVudS5oYXNTdWJDbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1MaW5rQ2xhc3MgKycnKTtcclxufTtcclxuXHJcblxyXG4vKiAyNC4gSGFuZGxlIEFqYXggTW9kZVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZUFqYXhNb2RlID0gZnVuY3Rpb24oc2V0dGluZykge1xyXG5cdHZhciBlbXB0eUh0bWwgPSAoc2V0dGluZy5lbXB0eUh0bWwpID8gIHNldHRpbmcuZW1wdHlIdG1sIDogYXBwLmFqYXguZXJyb3IuaHRtbDtcclxuXHR2YXIgZGVmYXVsdFVybCA9IChzZXR0aW5nLmFqYXhEZWZhdWx0VXJsKSA/IHNldHRpbmcuYWpheERlZmF1bHRVcmwgOiAnJztcclxuXHQgICAgZGVmYXVsdFVybCA9ICh3aW5kb3cubG9jYXRpb24uaGFzaCkgPyB3aW5kb3cubG9jYXRpb24uaGFzaCA6IGRlZmF1bHRVcmw7XHJcblx0XHJcblx0aWYgKGRlZmF1bHRVcmwgPT09ICcnKSB7XHJcblx0XHQkKGFwcC5jb250ZW50LmlkKS5odG1sKGVtcHR5SHRtbCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJlbmRlckFqYXgoZGVmYXVsdFVybCwgJycsIHRydWUpO1xyXG5cdH1cclxuICAgIFxyXG5cdGZ1bmN0aW9uIGVtcHR5RWxlbWVudCgpIHtcclxuXHRcdCQoYXBwLmFqYXguZW1wdHlFbGVtZW50KS5lbXB0eSgpO1xyXG5cdH1cclxuICAgIFxyXG5cdGZ1bmN0aW9uIGNsZWFyRWxlbWVudCgpIHtcclxuXHRcdCQoYXBwLmFqYXguY2xlYXJFbGVtZW50KS5yZW1vdmUoKTtcclxuXHRcdCQoYXBwLnNpZGViYXIuZmxvYXRTdWJtZW51LmlkKS5yZW1vdmUoKTtcclxuXHRcdGlmICgkLmZuLkRhdGFUYWJsZSkge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdCQoJy5kYXRhVGFibGUnKS5EYXRhVGFibGUoKS5kZXN0cm95KCk7XHJcblx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZiAoJChhcHAuaWQpLmhhc0NsYXNzKGFwcC5zaWRlYmFyLm1vYmlsZS50b2dnbGVkQ2xhc3MpKSB7XHJcblx0XHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tb2JpbGUudG9nZ2xlZENsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gY2hlY2tTaWRlYmFyQWN0aXZlKHVybCkge1xyXG5cdFx0dmFyIHRhcmdldEVsbSA9IGFwcC5zaWRlYmFyLmlkICsnIFsnKyBhcHAuYWpheC5hdHRyICsnXVtocmVmPVwiJysgdXJsICsnXCJdJztcclxuXHRcdGlmICgkKHRhcmdldEVsbSkubGVuZ3RoICE9PSAwKSB7XHJcblx0XHRcdCQoYXBwLnNpZGViYXIuaWQgKyAnIC4nICsgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1lbnUuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0XHQkKHRhcmdldEVsbSkuY2xvc2VzdCgnLicgKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcykuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWVudS5hY3RpdmVDbGFzcyk7XHJcblx0XHRcdCQodGFyZ2V0RWxtKS5wYXJlbnRzKCcuJyArIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzKS5hZGRDbGFzcyhhcHAuc2lkZWJhci5tZW51LmFjdGl2ZUNsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gY2hlY2tQdXNoU3RhdGUodXJsKSB7XHJcblx0XHR2YXIgdGFyZ2V0VXJsID0gdXJsLnJlcGxhY2UoJyMnLCcnKTtcclxuXHRcdHZhciB0YXJnZXRVc2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuXHRcdHZhciBpc0lFID0gdGFyZ2V0VXNlckFnZW50LmluZGV4T2YoJ01TSUUgJyk7XHJcblx0XHJcblx0XHRpZiAoaXNJRSAmJiAoaXNJRSA+IDAgJiYgaXNJRSA8IDkpKSB7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGFyZ2V0VXJsO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aGlzdG9yeS5wdXNoU3RhdGUoJycsICcnLCAnIycgKyB0YXJnZXRVcmwpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBjaGVja0NsZWFyT3B0aW9uKCkge1xyXG5cdFx0aWYgKGFwcC5hamF4LmNsZWFyT3B0aW9uKSB7XHJcblx0XHRcdEFwcC5jbGVhclBhZ2VPcHRpb24oYXBwLmFqYXguY2xlYXJPcHRpb24pO1xyXG5cdFx0XHRhcHAuYWpheC5jbGVhck9wdGlvbiA9ICcnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBjaGVja0xvYWRpbmcobG9hZCkge1xyXG5cdFx0aWYgKCFsb2FkKSB7XHJcblx0XHRcdGlmICgkKGFwcC5hamF4LmxvYWRlci5pZCkubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0JCgnYm9keScpLmFkZENsYXNzKGFwcC5hamF4LmxvYWRlci5jbGFzcyk7XHJcblx0XHRcdFx0JChjb250ZW50LmlkKS5hcHBlbmQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JChhcHAuYWpheC5sb2FkZXIuaWQpLnJlbW92ZSgpO1xyXG5cdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoYXBwLmFqYXgubG9hZGVyLmNsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gcmVuZGVyQWpheCh1cmwsIGVsbSwgZGlzYWJsZVB1c2hTdGF0ZSkge1xyXG5cdFx0UGFjZS5yZXN0YXJ0KCk7XHJcblx0XHRcclxuXHRcdGNoZWNrTG9hZGluZyhmYWxzZSk7XHJcblx0XHRjbGVhckVsZW1lbnQoKTtcclxuXHRcdGVtcHR5RWxlbWVudCgpO1xyXG5cdFx0Y2hlY2tTaWRlYmFyQWN0aXZlKHVybCk7XHJcblx0XHRjaGVja0NsZWFyT3B0aW9uKCk7XHJcblx0XHRpZiAoIWRpc2FibGVQdXNoU3RhdGUpIHtcclxuXHRcdFx0Y2hlY2tQdXNoU3RhdGUodXJsKTtcclxuXHRcdH1cclxuICAgIFxyXG5cdFx0dmFyIHRhcmdldENvbnRhaW5lcj0gYXBwLmNvbnRlbnQuaWQ7XHJcblx0XHR2YXIgdGFyZ2V0VXJsIFx0ICAgPSB1cmwucmVwbGFjZSgnIycsJycpO1xyXG5cdFx0dmFyIHRhcmdldFR5cGUgXHQgICA9IChzZXR0aW5nLmFqYXhUeXBlKSA/IHNldHRpbmcuYWpheFR5cGUgOiAnR0VUJztcclxuXHRcdHZhciB0YXJnZXREYXRhVHlwZSA9IChzZXR0aW5nLmFqYXhEYXRhVHlwZSkgPyBzZXR0aW5nLmFqYXhEYXRhVHlwZSA6ICdodG1sJztcclxuXHRcdGlmIChlbG0pIHtcclxuXHRcdFx0dGFyZ2V0RGF0YVR5cGUgPSAoJChlbG0pLmF0dHIoJ2RhdGEtdHlwZScpKSA/ICQoZWxtKS5hdHRyKCdkYXRhLXR5cGUnKSA6IHRhcmdldERhdGFUeXBlO1xyXG5cdFx0XHR0YXJnZXREYXRhRGF0YVR5cGUgPSAoJChlbG0pLmF0dHIoJ2RhdGEtZGF0YS10eXBlJykpID8gJChlbG0pLmF0dHIoJ2RhdGEtZGF0YS10eXBlJykgOiB0YXJnZXREYXRhVHlwZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0JC5hamF4KHtcclxuXHRcdFx0dXJsOiB0YXJnZXRVcmwsXHJcblx0XHRcdHR5cGU6IHRhcmdldFR5cGUsXHJcblx0XHRcdGRhdGFUeXBlOiB0YXJnZXREYXRhVHlwZSxcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRcdCQodGFyZ2V0Q29udGFpbmVyKS5odG1sKGRhdGEpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcblx0XHRcdFx0JCh0YXJnZXRDb250YWluZXIpLmh0bWwoZW1wdHlIdG1sKTtcclxuXHRcdFx0fVxyXG5cdFx0fSkuZG9uZShmdW5jdGlvbigpIHtcclxuXHRcdFx0Y2hlY2tMb2FkaW5nKHRydWUpO1xyXG5cdFx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogMCB9LCAwKTtcclxuXHRcdFx0QXBwLmluaXRDb21wb25lbnQoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHQkKHdpbmRvdykub24oJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuXHRcdGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCkge1xyXG5cdFx0XHRyZW5kZXJBamF4KHdpbmRvdy5sb2NhdGlvbi5oYXNoLCAnJywgdHJ1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZW5kZXJBamF4KGRlZmF1bHRVcmwsICcnLCB0cnVlKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnWycrIGFwcC5hamF4LmF0dHIgKyddJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0cmVuZGVyQWpheCgkKHRoaXMpLmF0dHIoJ2hyZWYnKSwgdGhpcyk7XHJcblx0fSk7XHJcbn07XHJcbnZhciBoYW5kbGVTZXRQYWdlT3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uKSB7XHJcblx0aWYgKG9wdGlvbi5hcHBDb250ZW50RnVsbEhlaWdodCkge1xyXG5cdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5jb250ZW50LmZ1bGxIZWlnaHQuY2xhc3MpO1xyXG5cdH1cclxuXHRpZiAob3B0aW9uLmFwcFNpZGViYXJMaWdodCkge1xyXG5cdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5sYXlvdXQuc2lkZWJhckxpZ2h0LmNsYXNzKTtcclxuXHR9XHJcblx0aWYgKG9wdGlvbi5hcHBTaWRlYmFyRW5kKSB7XHJcblx0XHQkKGFwcC5pZCkuYWRkQ2xhc3MoYXBwLmxheW91dC5zaWRlYmFyRW5kLmNsYXNzKTtcclxuXHR9XHJcblx0aWYgKG9wdGlvbi5hcHBTaWRlYmFyV2lkZSkge1xyXG5cdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5sYXlvdXQuc2lkZWJhcldpZGUuY2xhc3MpO1xyXG5cdH1cclxuXHRpZiAob3B0aW9uLmFwcFNpZGViYXJNaW5pZmllZCkge1xyXG5cdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5sYXlvdXQuc2lkZWJhck1pbmlmaWVkLmNsYXNzKTtcclxuXHR9XHJcblx0aWYgKG9wdGlvbi5hcHBTaWRlYmFyVHdvKSB7XHJcblx0XHQkKGFwcC5oZWFkZXIuaWQgKyAnIFsnKyBhcHAuc2lkZWJhckVuZC5tb2JpbGUudG9nZ2xlQXR0ciArJ10nKS5yZW1vdmVDbGFzcyhhcHAuaGVscGVyLmRpc3BsYXkubm9uZSk7XHJcblx0XHQkKGFwcC5oZWFkZXIuaWQgKyAnIC4nKyBhcHAuaGVhZGVyLmJyYW5kLmNsYXNzKS5yZW1vdmVDbGFzcyhhcHAuaGVscGVyLm1hcmdpbi5sZWZ0WzBdKTtcclxuXHRcdCQoYXBwLmlkKS5hZGRDbGFzcyhhcHAubGF5b3V0LnNpZGViYXJUd28uY2xhc3MpO1xyXG5cdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5zaWRlYmFyRW5kLnRvZ2dsZWRDbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwU2lkZWJhclRyYW5zcGFyZW50KSB7XHJcblx0XHQkKGFwcC5zaWRlYmFyLmlkKS5hZGRDbGFzcyhhcHAuc2lkZWJhci50cmFuc3BhcmVudC5jbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwU2lkZWJhclNlYXJjaCkge1xyXG5cdFx0JChhcHAuc2lkZWJhci5pZCArICcgLicrIGFwcC5zaWRlYmFyLnNlYXJjaC5jbGFzcykucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXIuc2VhcmNoLmhpZGVDbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwVG9wTWVudSkge1xyXG5cdFx0JChhcHAuaGVhZGVyLmlkICsgJyBbJysgYXBwLnRvcE1lbnUubW9iaWxlLnRvZ2dsZUF0dHIgKyddJykucmVtb3ZlQ2xhc3MoYXBwLmhlbHBlci5kaXNwbGF5Lm5vbmUpO1xyXG5cdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5sYXlvdXQudG9wTWVudS5jbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwV2l0aG91dEhlYWRlcikge1xyXG5cdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5sYXlvdXQud2l0aG91dEhlYWRlci5jbGFzcyk7XHJcblx0XHQkKGFwcC5oZWFkZXIuaWQpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwV2l0aG91dFNpZGViYXIpIHtcclxuXHRcdCQoYXBwLmlkKS5hZGRDbGFzcyhhcHAubGF5b3V0LndpdGhvdXRTaWRlYmFyLmNsYXNzKTtcclxuXHRcdCQoYXBwLmhlYWRlci5pZCArICcgWycrIGFwcC5zaWRlYmFyLm1vYmlsZS50b2dnbGVBdHRyICsnXScpLmFkZENsYXNzKGFwcC5oZWxwZXIuZGlzcGxheS5ub25lKTtcclxuXHRcdCQoYXBwLnNpZGViYXIuaWQgKyAnLCAuJyArIGFwcC5zaWRlYmFyLmJnLmNsYXNzICsgJywgLicrIGFwcC5zaWRlYmFyLm1vYmlsZS5iYWNrZHJvcC5jbGFzcykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHR9XHJcblx0aWYgKG9wdGlvbi5hcHBIZWFkZXJJbnZlcnNlKSB7XHJcblx0XHQkKGFwcC5oZWFkZXIuaWQpLmFkZENsYXNzKGFwcC5oZWFkZXIuaW52ZXJzZS5jbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24ucGFnZUNvbnRlbnRGdWxsV2lkdGgpIHtcclxuXHRcdCQoYXBwLmNvbnRlbnQuaWQpLmFkZENsYXNzKGFwcC5jb250ZW50LmZ1bGxXaWR0aC5jbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwQ2xhc3MpIHtcclxuXHRcdCQoYXBwLmlkKS5hZGRDbGFzcyhvcHRpb24uYXBwQ2xhc3MpO1xyXG5cdH1cclxuXHRpZiAob3B0aW9uLmFwcENvbnRlbnRDbGFzcykge1xyXG5cdFx0JChhcHAuY29udGVudC5pZCkuYWRkQ2xhc3Mob3B0aW9uLmFwcENvbnRlbnRDbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYm9keUNsYXNzKSB7XHJcblx0XHQkKCdib2R5JykuYWRkQ2xhc3Mob3B0aW9uLmJvZHlDbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwQm94ZWRMYXlvdXQpIHtcclxuXHRcdCQoJ2JvZHknKS5hZGRDbGFzcyhhcHAubGF5b3V0LmJveGVkTGF5b3V0LmNsYXNzKTtcclxuXHR9XHJcblx0aWYgKG9wdGlvbi5jbGVhck9wdGlvbk9uTGVhdmUpIHtcclxuXHRcdGFwcC5hamF4LmNsZWFyT3B0aW9uID0gb3B0aW9uO1xyXG5cdH1cclxufTtcclxudmFyIGhhbmRsZUNsZWFyUGFnZU9wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvbikge1xyXG5cdGlmIChvcHRpb24uYXBwQ29udGVudEZ1bGxIZWlnaHQpIHtcclxuXHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAuY29udGVudC5mdWxsSGVpZ2h0LmNsYXNzKTtcclxuXHR9XHJcblx0aWYgKG9wdGlvbi5hcHBTaWRlYmFyTGlnaHQpIHtcclxuXHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAubGF5b3V0LnNpZGViYXJMaWdodC5jbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwU2lkZWJhckVuZCkge1xyXG5cdFx0JChhcHAuaWQpLnJlbW92ZUNsYXNzKGFwcC5sYXlvdXQuc2lkZWJhckVuZC5jbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwU2lkZWJhcldpZGUpIHtcclxuXHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAubGF5b3V0LnNpZGViYXJXaWRlLmNsYXNzKTtcclxuXHR9XHJcblx0aWYgKG9wdGlvbi5hcHBTaWRlYmFyTWluaWZpZWQpIHtcclxuXHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAubGF5b3V0LnNpZGViYXJNaW5pZmllZC5jbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwU2lkZWJhclR3bykge1xyXG5cdFx0JChhcHAuaGVhZGVyLmlkICsgJyBbJysgYXBwLnNpZGViYXJFbmQubW9iaWxlLnRvZ2dsZUF0dHIgKyddJykuYWRkQ2xhc3MoYXBwLmhlbHBlci5kaXNwbGF5Lm5vbmUpO1xyXG5cdFx0JChhcHAuaGVhZGVyLmlkICsgJyAuJysgYXBwLmhlYWRlci5icmFuZC5jbGFzcykuYWRkQ2xhc3MoYXBwLmhlbHBlci5tYXJnaW4ubGVmdFswXSk7XHJcblx0XHQkKGFwcC5pZCkucmVtb3ZlQ2xhc3MoYXBwLmxheW91dC5zaWRlYmFyVHdvLmNsYXNzKTtcclxuXHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhckVuZC50b2dnbGVkQ2xhc3MpO1xyXG5cdH1cclxuXHRpZiAob3B0aW9uLmFwcFNpZGViYXJUcmFuc3BhcmVudCkge1xyXG5cdFx0JChhcHAuc2lkZWJhci5pZCkucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXIudHJhbnNwYXJlbnQuY2xhc3MpO1xyXG5cdH1cclxuXHRpZiAob3B0aW9uLmFwcFNpZGViYXJTZWFyY2gpIHtcclxuXHRcdCQoYXBwLnNpZGViYXIuaWQgKyAnIC4nKyBhcHAuc2lkZWJhci5zZWFyY2guY2xhc3MpLmFkZENsYXNzKGFwcC5zaWRlYmFyLnNlYXJjaC5oaWRlQ2xhc3MpO1xyXG5cdH1cclxuXHRpZiAob3B0aW9uLmFwcFRvcE1lbnUpIHtcclxuXHRcdCQoYXBwLmhlYWRlci5pZCArICcgWycrIGFwcC50b3BNZW51Lm1vYmlsZS50b2dnbGVBdHRyICsnXScpLmFkZENsYXNzKGFwcC5oZWxwZXIuZGlzcGxheS5ub25lKTtcclxuXHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAubGF5b3V0LnRvcE1lbnUuY2xhc3MpO1xyXG5cdH1cclxuXHRpZiAob3B0aW9uLmFwcEhlYWRlckludmVyc2UpIHtcclxuXHRcdCQoYXBwLmhlYWRlci5pZCkucmVtb3ZlQ2xhc3MoYXBwLmhlYWRlci5pbnZlcnNlLmNsYXNzKTtcclxuXHR9XHJcblx0aWYgKG9wdGlvbi5hcHBXaXRob3V0U2lkZWJhcikge1xyXG5cdFx0JChhcHAuaWQpLnJlbW92ZUNsYXNzKGFwcC5sYXlvdXQud2l0aG91dFNpZGViYXIuY2xhc3MpO1xyXG5cdFx0JChhcHAuaGVhZGVyLmlkICsgJyBbJysgYXBwLnNpZGViYXIubW9iaWxlLnRvZ2dsZUF0dHIgKyddJykucmVtb3ZlQ2xhc3MoYXBwLmhlbHBlci5kaXNwbGF5Lm5vbmUpO1xyXG5cdFx0JChhcHAuc2lkZWJhci5pZCArICcsIC4nICsgYXBwLnNpZGViYXIuYmcuY2xhc3MgKyAnLCAuJysgYXBwLnNpZGViYXIubW9iaWxlLmJhY2tkcm9wLmNsYXNzKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG5cdH1cclxuXHRpZiAob3B0aW9uLmFwcFdpdGhvdXRIZWFkZXIpIHtcclxuXHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAubGF5b3V0LndpdGhvdXRIZWFkZXIuY2xhc3MpO1xyXG5cdFx0JChhcHAuaGVhZGVyLmlkKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG5cdH1cclxuXHRpZiAob3B0aW9uLmFwcENvbnRlbnRGdWxsV2lkdGgpIHtcclxuXHRcdCQoYXBwLmNvbnRlbnQuaWQpLnJlbW92ZUNsYXNzKGFwcC5jb250ZW50LmZ1bGxXaWR0aC5jbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwQ29udGVudENsYXNzKSB7XHJcblx0XHQkKGFwcC5jb250ZW50LmlkKS5yZW1vdmVDbGFzcyhvcHRpb24uYXBwQ29udGVudENsYXNzKTtcclxuXHR9XHJcblx0aWYgKG9wdGlvbi5hcHBDbGFzcykge1xyXG5cdFx0JChhcHAuaWQpLnJlbW92ZUNsYXNzKG9wdGlvbi5hcHBDbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYm9keUNsYXNzKSB7XHJcblx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3Mob3B0aW9uLmJvZHlDbGFzcyk7XHJcblx0fVxyXG5cdGlmIChvcHRpb24uYXBwQm94ZWRMYXlvdXQpIHtcclxuXHRcdCQoJ2JvZHknKS5yZW1vdmVDbGFzcyhhcHAubGF5b3V0LmJveGVkTGF5b3V0LmNsYXNzKTtcclxuXHR9XHJcbn07XHJcblxyXG5cclxuLyogMjUuIEhhbmRsZSBGbG9hdCBOYXZiYXIgU2VhcmNoXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgaGFuZGxlVG9nZ2xlTmF2YmFyU2VhcmNoID0gZnVuY3Rpb24oKSB7XHJcblx0JCgnWycrIGFwcC5oZWFkZXIuZmxvYXRpbmdGb3JtLnRvZ2dsZUF0dHIgKyddJykuY2xpY2soZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0JCgnLicrIGFwcC5oZWFkZXIuY2xhc3MpLmFkZENsYXNzKGFwcC5oZWFkZXIuZmxvYXRpbmdGb3JtLnRvZ2dsZWRDbGFzcyk7XHJcblx0fSk7XHJcblxyXG5cdCQoJ1snKyBhcHAuaGVhZGVyLmZsb2F0aW5nRm9ybS5kaXNtaXNzQXR0ciArJ10nKS5jbGljayhmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHQkKCcuJysgYXBwLmhlYWRlci5jbGFzcykucmVtb3ZlQ2xhc3MoYXBwLmhlYWRlci5mbG9hdGluZ0Zvcm0udG9nZ2xlZENsYXNzKTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiAyNi4gSGFuZGxlIEFuaW1hdGlvblxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGNvbnZlcnROdW1iZXJXaXRoQ29tbWFzID0gZnVuY3Rpb24oeCkge1xyXG5cdHJldHVybiB4LnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIsXCIpO1xyXG59O1xyXG52YXIgY2hlY2tJc0Zsb2F0ID0gZnVuY3Rpb24oeCl7XHJcblx0cmV0dXJuIE51bWJlcih4KSA9PT0geCAmJiB4ICUgMSAhPT0gMDtcclxufTtcclxudmFyIGNoZWNrSXNJbnQgPSBmdW5jdGlvbih4KXtcclxuXHRyZXR1cm4gTnVtYmVyKHgpID09PSB4ICYmIHggJSAxID09PSAwO1xyXG59O1xyXG52YXIgY291bnREZWNpbWFscyA9IGZ1bmN0aW9uKHgpIHtcclxuXHR2YXIgc3BsaXQgPSB4LnRvU3RyaW5nKCkuc3BsaXQoJy4nKTtcclxuXHQgXHJcbiAgcmV0dXJuIChzcGxpdFsxXSkgPyBzcGxpdFsxXS5sZW5ndGggOiAwOyBcclxufTtcclxudmFyIGhhbmRsZUFuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdCQoJ1snKyBhcHAuYW5pbWF0aW9uLmF0dHIgKyddJykuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0YXJnZXRBbmltYXRlID0gJCh0aGlzKS5hdHRyKGFwcC5hbmltYXRpb24uYXR0cik7XHJcblx0XHR2YXIgdGFyZ2V0VmFsdWUgPSAkKHRoaXMpLmF0dHIoYXBwLmFuaW1hdGlvbi52YWx1ZUF0dHIpO1xyXG5cdFx0XHJcblx0XHRzd2l0Y2ggKHRhcmdldEFuaW1hdGUpIHtcclxuXHRcdFx0Y2FzZSAnd2lkdGgnOlxyXG5cdFx0XHRcdCQodGhpcykuY3NzKCd3aWR0aCcsIHRhcmdldFZhbHVlKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnaGVpZ2h0JzpcclxuXHRcdFx0XHQkKHRoaXMpLmNzcygnaGVpZ2h0JywgdGFyZ2V0VmFsdWUpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdudW1iZXInOlxyXG5cdFx0XHRcdHZhciB0YXJnZXRFbG0gPSB0aGlzO1xyXG5cdFx0XHRcdHZhciBkZWNpbWFsID0gY291bnREZWNpbWFscyh0YXJnZXRWYWx1ZSk7XHJcblx0XHRcdFx0dmFyIGRpdmlkZSA9IDE7XHJcblx0XHRcdFx0dmFyIHggPSBkZWNpbWFsO1xyXG5cdFx0XHRcdHdoaWxlICh4ID4gMCkge1xyXG5cdFx0XHRcdFx0ZGl2aWRlICo9IDEwO1xyXG5cdFx0XHRcdFx0eC0tO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQkKHthbmltYXRlTnVtYmVyOiAwfSkuYW5pbWF0ZSh7YW5pbWF0ZU51bWJlcjogdGFyZ2V0VmFsdWV9LCB7XHJcblx0XHRcdFx0XHRkdXJhdGlvbjogYXBwLmFuaW1hdGlvbi5zcGVlZCxcclxuXHRcdFx0XHRcdGVhc2luZzogYXBwLmFuaW1hdGlvbi5lZmZlY3QsXHJcblx0XHRcdFx0XHRzdGVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0dmFyIG51bWJlciA9IChNYXRoLmNlaWwodGhpcy5hbmltYXRlTnVtYmVyICogZGl2aWRlKSAvIGRpdmlkZSkudG9GaXhlZChkZWNpbWFsKTtcclxuXHRcdFx0XHRcdFx0dmFyIG51bWJlciA9IGNvbnZlcnROdW1iZXJXaXRoQ29tbWFzKG51bWJlcik7XHJcblx0XHRcdFx0XHRcdCQodGFyZ2V0RWxtKS50ZXh0KG51bWJlcik7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZG9uZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdCQodGFyZ2V0RWxtKS50ZXh0KGNvbnZlcnROdW1iZXJXaXRoQ29tbWFzKHRhcmdldFZhbHVlKSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ2NsYXNzJzpcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKHRhcmdldFZhbHVlKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiAyNy4gSGFuZGxlIFNpZGViYXIgU2VhcmNoXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgaGFuZGxlU2lkZWJhclNlYXJjaCA9IGZ1bmN0aW9uKCkge1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsICdbJysgYXBwLnNpZGViYXIuc2VhcmNoLnRvZ2dsZUF0dHIgKyAnXScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRhcmdldFZhbHVlID0gJCh0aGlzKS52YWwoKTtcclxuXHRcdFx0XHR0YXJnZXRWYWx1ZSA9IHRhcmdldFZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcclxuXHRcdGlmICh0YXJnZXRWYWx1ZSkge1xyXG5cdFx0XHQkKCcuJysgYXBwLnNpZGViYXIuY2xhc3MgKyc6bm90KC4nKyBhcHAuc2lkZWJhckVuZC5jbGFzcyArJykgLicrIGFwcC5zaWRlYmFyLm1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKyc6bm90KC4nKyBhcHAuc2lkZWJhci5wcm9maWxlLmNsYXNzICsnKTpub3QoLicrIGFwcC5zaWRlYmFyLm1lbnUuaGVhZGVyQ2xhc3MgKycpOm5vdCguJysgYXBwLnNpZGViYXIuc2VhcmNoLmNsYXNzICsnKSwgLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnOm5vdCguJysgYXBwLnNpZGViYXJFbmQuY2xhc3MgKycpIC4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MpLmFkZENsYXNzKGFwcC5zaWRlYmFyLnNlYXJjaC5oaWRlQ2xhc3MpO1xyXG5cdFx0XHQkKCcuJysgYXBwLnNpZGViYXIuY2xhc3MgKyc6bm90KC4nKyBhcHAuc2lkZWJhckVuZC5jbGFzcyArJykgLicrIGFwcC5zaWRlYmFyLnNlYXJjaC5mb3VuZENsYXNzKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5zZWFyY2guZm91bmRDbGFzcyk7XHJcblx0XHRcdCQoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJzpub3QoLicrIGFwcC5zaWRlYmFyRW5kLmNsYXNzICsnKSAuJysgYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcykucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcyk7XHJcblx0XHRcdCQoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJzpub3QoLicrIGFwcC5zaWRlYmFyRW5kLmNsYXNzICsnKSAuJysgYXBwLnNpZGViYXIubWVudS5jbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJzpub3QoLicrIGFwcC5zaWRlYmFyLnByb2ZpbGUuY2xhc3MgKycpOm5vdCguJysgYXBwLnNpZGViYXIubWVudS5oZWFkZXJDbGFzcyArJyk6bm90KC4nKyBhcHAuc2lkZWJhci5zZWFyY2guY2xhc3MgKycpID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUxpbmtDbGFzcyArJywgLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtTGlua0NsYXNzICsnJykuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0VGV4dCA9ICQodGhpcykudGV4dCgpO1xyXG5cdFx0XHRcdFx0XHR0YXJnZXRUZXh0ID0gdGFyZ2V0VGV4dC50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRcdGlmICh0YXJnZXRUZXh0LnNlYXJjaCh0YXJnZXRWYWx1ZSkgPiAtMSkge1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuJyArIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5zZWFyY2guaGlkZUNsYXNzKTtcclxuXHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLicgKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcykuYWRkQ2xhc3MoYXBwLnNpZGViYXIuc2VhcmNoLmZvdW5kQ2xhc3MpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoJCh0aGlzKS5jbG9zZXN0KCcuJyArIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzICsgJy4nKyBhcHAuc2lkZWJhci5tZW51Lmhhc1N1YkNsYXNzKS5sZW5ndGggIT0gMCkge1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy4nICsgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKyAnLicrIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3MpLmZpbmQoJy4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MgKycgLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzICsgJy4nKyBhcHAuc2lkZWJhci5zZWFyY2guaGlkZUNsYXNzKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5zZWFyY2guaGlkZUNsYXNzKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICgkKHRoaXMpLmNsb3Nlc3QoJy4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MpLmxlbmd0aCAhPSAwKSB7XHJcblx0XHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XHJcblx0XHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3MpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLnNlYXJjaC5oaWRlQ2xhc3MpLmFkZENsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpO1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MpLmZpbmQoJy4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJzpub3QoLicrIGFwcC5zaWRlYmFyLnNlYXJjaC5mb3VuZENsYXNzICsnKScpLmFkZENsYXNzKGFwcC5zaWRlYmFyLnNlYXJjaC5oaWRlQ2xhc3MpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJzpub3QoLicrIGFwcC5zaWRlYmFyRW5kLmNsYXNzICsnKSAuJysgYXBwLnNpZGViYXIubWVudS5jbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJzpub3QoLicrIGFwcC5zaWRlYmFyLnByb2ZpbGUuY2xhc3MgKycpOm5vdCguJysgYXBwLnNpZGViYXIubWVudS5oZWFkZXJDbGFzcyArJyk6bm90KC4nKyBhcHAuc2lkZWJhci5zZWFyY2guY2xhc3MgKycpLicrIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3MgKycgLicrIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcyArJycpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcblx0XHRcdCQoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJzpub3QoLicrIGFwcC5zaWRlYmFyRW5kLmNsYXNzICsnKSAuJysgYXBwLnNpZGViYXIubWVudS5jbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJzpub3QoLicrIGFwcC5zaWRlYmFyLnByb2ZpbGUuY2xhc3MgKycpOm5vdCguJysgYXBwLnNpZGViYXIubWVudS5oZWFkZXJDbGFzcyArJyk6bm90KC4nKyBhcHAuc2lkZWJhci5zZWFyY2guY2xhc3MgKycpLCAuJysgYXBwLnNpZGViYXIuY2xhc3MgKyc6bm90KC4nKyBhcHAuc2lkZWJhckVuZC5jbGFzcyArJykgLicrIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJycpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLnNlYXJjaC5oaWRlQ2xhc3MpO1xyXG5cdFx0XHQkKCcuJysgYXBwLnNpZGViYXIuY2xhc3MgKyc6bm90KC4nKyBhcHAuc2lkZWJhckVuZC5jbGFzcyArJykgLicrIGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpO1xyXG5cdFx0fVxyXG5cdH0pXHJcbn07XHJcblxyXG5cclxuLyogMjguIEhhbmRsZSBUb2dnbGUgQ2xhc3NcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVUb2dnbGVDbGFzcyA9IGZ1bmN0aW9uKCkge1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnRvZ2dsZUNsYXNzLnRvZ2dsZUF0dHIgKyAnXScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFxyXG5cdFx0dmFyIHRhcmdldCA9ICgkKHRoaXMpLmF0dHIoYXBwLnRvZ2dsZUNsYXNzLnRhcmdldEF0dHIpKSA/ICQodGhpcykuYXR0cihhcHAudG9nZ2xlQ2xhc3MudGFyZ2V0QXR0cikgOiAnJztcclxuXHRcdHZhciB0YXJnZXRDbGFzcyA9ICQodGhpcykuYXR0cihhcHAudG9nZ2xlQ2xhc3MudG9nZ2xlQXR0cik7XHJcblx0XHRcclxuXHRcdGlmICh0YXJnZXQpIHtcclxuXHRcdFx0JCh0YXJnZXQpLnRvZ2dsZUNsYXNzKHRhcmdldENsYXNzKTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiAyOS4gSGFuZGxlIERpc21pc3MgQ2xhc3NcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVEaXNtaXNzQ2xhc3MgPSBmdW5jdGlvbigpIHtcclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnWycrIGFwcC5kaXNtaXNzQ2xhc3MudG9nZ2xlQXR0ciArJ10nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcclxuXHRcdHZhciB0YXJnZXQgPSAoJCh0aGlzKS5hdHRyKGFwcC5kaXNtaXNzQ2xhc3MudGFyZ2V0QXR0cikpID8gJCh0aGlzKS5hdHRyKGFwcC5kaXNtaXNzQ2xhc3MudGFyZ2V0QXR0cikgOiAnJztcclxuXHRcdHZhciB0YXJnZXRDbGFzcyA9ICQodGhpcykuYXR0cihhcHAuZGlzbWlzc0NsYXNzLnRvZ2dsZUF0dHIpO1xyXG5cdFx0XHJcblx0XHRpZiAodGFyZ2V0KSB7XHJcblx0XHRcdCQodGFyZ2V0KS5yZW1vdmVDbGFzcyh0YXJnZXRDbGFzcyk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuLyogMzAuIEhhbmRsZSBIZXggVG8gUmdiYVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIHN0cmluZ1RvQ29sb3IgPSBmdW5jdGlvbihzdHIpIHtcclxuICB2YXIgaGFzaCA9IDA7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgIGhhc2ggPSBzdHIuY2hhckNvZGVBdChpKSArICgoaGFzaCA8PCA1KSAtIGhhc2gpO1xyXG4gIH1cclxuICB2YXIgY29sb3IgPSAnIyc7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcclxuICAgIHZhciB2YWx1ZSA9IChoYXNoID4+IChpICogOCkpICYgMHhGRjtcclxuICAgIGNvbG9yICs9ICgnMDAnICsgdmFsdWUudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTIpO1xyXG4gIH1cclxuICByZXR1cm4gY29sb3I7XHJcbn07XHJcbnZhciBoZXhUb1JnYmEgPSBmdW5jdGlvbihoZXgsIHRyYW5zcGFyZW50ID0gMSwgcmVwZWF0ID0gZmFsc2UpIHtcclxuXHR2YXIgYztcclxuXHRpZigvXiMoW0EtRmEtZjAtOV17M30pezEsMn0kLy50ZXN0KGhleCkpe1xyXG5cdFx0XHRjPSBoZXguc3Vic3RyaW5nKDEpLnNwbGl0KCcnKTtcclxuXHRcdFx0aWYoYy5sZW5ndGg9PSAzKXtcclxuXHRcdFx0XHRcdGM9IFtjWzBdLCBjWzBdLCBjWzFdLCBjWzFdLCBjWzJdLCBjWzJdXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjPSAnMHgnK2Muam9pbignJyk7XHJcblx0XHRcdHJldHVybiAncmdiYSgnK1soYz4+MTYpJjI1NSwgKGM+PjgpJjI1NSwgYyYyNTVdLmpvaW4oJywnKSsnLCcrIHRyYW5zcGFyZW50ICsnKSc7XHJcblx0fVxyXG5cdGlmICghcmVwZWF0KSB7XHJcblx0XHRoZXggPSBzdHJpbmdUb0NvbG9yKGhleCk7XHJcblx0XHRyZXR1cm4gaGV4VG9SZ2JhKGhleCwgdHJhbnNwYXJlbnQsIHRydWUpO1xyXG5cdH1cclxuICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCBIZXgnKTtcclxufTtcclxuXHJcblxyXG4vKiAzMS4gSGFuZGxlIEdldCBDc3MgVmFyaWFibGVcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBnZXRDc3NWYXJpYWJsZSA9IGZ1bmN0aW9uKHZhcmlhYmxlKSB7XHJcblx0cmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUodmFyaWFibGUpLnRyaW0oKTtcclxufTtcclxuXHJcblxyXG4vKiBBcHBsaWNhdGlvbiBDb250cm9sbGVyXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgQXBwID0gZnVuY3Rpb24gKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdFxyXG5cdHZhciBzZXR0aW5nO1xyXG5cdFxyXG5cdHJldHVybiB7XHJcblx0XHQvL21haW4gZnVuY3Rpb25cclxuXHRcdGluaXQ6IGZ1bmN0aW9uIChvcHRpb24pIHtcclxuXHRcdFx0aWYgKG9wdGlvbikge1xyXG5cdFx0XHRcdHNldHRpbmcgPSBvcHRpb247XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5pbml0TG9jYWxTdG9yYWdlKCk7XHJcblx0XHRcdHRoaXMuaW5pdFRvcE1lbnUoKTtcclxuXHRcdFx0dGhpcy5pbml0Q29tcG9uZW50KCk7XHJcblx0XHRcdHRoaXMuaW5pdFBhZ2VMb2FkKCk7XHJcblx0XHRcdHRoaXMuaW5pdFNpZGViYXIoKTtcclxuXHRcdFx0dGhpcy5pbml0VGhlbWVQYW5lbCgpO1xyXG5cdFx0XHR0aGlzLmluaXRWYXJpYWJsZSgpO1xyXG5cdFx0XHQkKHdpbmRvdykudHJpZ2dlcignbG9hZCcpO1xyXG5cclxuXHRcdFx0aWYgKHNldHRpbmcgJiYgc2V0dGluZy5hamF4TW9kZSkge1xyXG5cdFx0XHRcdHRoaXMuaW5pdEFqYXgoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHNldHRpbmdzOiBmdW5jdGlvbiAob3B0aW9uKSB7XHJcblx0XHRcdGlmIChvcHRpb24pIHtcclxuXHRcdFx0XHRzZXR0aW5nID0gb3B0aW9uO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0aW5pdFNpZGViYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRoYW5kbGVTaWRlYmFyTWVudSgpO1xyXG5cdFx0XHRoYW5kbGVTaWRlYmFyVG9nZ2xlKCk7XHJcblx0XHRcdGhhbmRsZVNpZGViYXJFbmRUb2dnbGUoKTtcclxuXHRcdFx0aGFuZGxlU2lkZWJhck1pbmlmeSgpO1xyXG5cdFx0XHRoYW5kbGVTaWRlYmFyTWluaWZ5RmxvYXRNZW51KCk7XHJcblx0XHRcdGhhbmRsZVRvZ2dsZU5hdlByb2ZpbGUoKTtcclxuXHRcdFx0aGFuZGxlVG9nZ2xlTmF2YmFyU2VhcmNoKCk7XHJcblx0XHRcdGhhbmRsZVNpZGViYXJTZWFyY2goKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghc2V0dGluZyB8fCAoc2V0dGluZyAmJiAhc2V0dGluZy5kaXNhYmxlU2lkZWJhclNjcm9sbE1lbW9yeSkpIHtcclxuXHRcdFx0XHRoYW5kbGVTaWRlYmFyU2Nyb2xsTWVtb3J5KCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRpbml0VG9wTWVudTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGhhbmRsZVVubGltaXRlZFRvcE1lbnVSZW5kZXIoKTtcclxuXHRcdFx0aGFuZGxlVG9wTWVudVN1Yk1lbnUoKTtcclxuXHRcdFx0aGFuZGxlTW9iaWxlVG9wTWVudVN1Yk1lbnUoKTtcclxuXHRcdFx0aGFuZGxlVG9wTWVudU1vYmlsZVRvZ2dsZSgpO1xyXG5cdFx0fSxcclxuXHRcdGluaXRQYWdlTG9hZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGhhbmRsZVBhZ2VMb2FkZXIoKTtcclxuXHRcdH0sXHJcblx0XHRpbml0Q29tcG9uZW50OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5nIHx8IChzZXR0aW5nICYmICFzZXR0aW5nLmRpc2FibGVEcmFnZ2FibGVQYW5lbCkpIHtcclxuXHRcdFx0XHRoYW5kbGVQYW5lbERyYWdnYWJsZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGhhbmRsZVNjcm9sbGJhcigpO1xyXG5cdFx0XHRoYW5kbGVVbmxpbWl0ZWRUYWJzUmVuZGVyKCk7XHJcblx0XHRcdGhhbmRsZVBhbmVsQWN0aW9uKCk7XHJcblx0XHRcdGhhbmRsZVNjcm9sbFRvVG9wQnV0dG9uKCk7XHJcblx0XHRcdGhhbmRsZVBhZ2VTY3JvbGxDbGFzcygpO1xyXG5cdFx0XHRoYW5kbGVBbmltYXRpb24oKTtcclxuXHRcdFx0aGFuZGxlVG9nZ2xlQ2xhc3MoKTtcclxuXHRcdFx0aGFuZGxlRGlzbWlzc0NsYXNzKCk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA3NjcpIHtcclxuXHRcdFx0XHRoYW5kZWxUb29sdGlwUG9wb3ZlckFjdGl2YXRpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGluaXRMb2NhbFN0b3JhZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIXNldHRpbmcgfHwgKHNldHRpbmcgJiYgIXNldHRpbmcuZGlzYWJsZUxvY2FsU3RvcmFnZSkpIHtcclxuXHRcdFx0XHRoYW5kbGVMb2NhbFN0b3JhZ2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGluaXRUaGVtZVBhbmVsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aGFuZGxlVGhlbWVQYW5lbCgpO1xyXG5cdFx0XHRoYW5kbGVSZXNldExvY2FsU3RvcmFnZSgpO1xyXG5cdFx0fSxcclxuXHRcdGluaXRBamF4OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aGFuZGxlQWpheE1vZGUoc2V0dGluZyk7XHJcblx0XHRcdCQuYWpheFNldHVwKHtcclxuXHRcdFx0XHRjYWNoZTogdHJ1ZVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRpbml0VmFyaWFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRhcHAuY29sb3IudGhlbWUgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1hcHAtdGhlbWUnKTtcclxuXHRcdFx0YXBwLmZvbnQuZmFtaWx5ICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtYm9keS1mb250LWZhbWlseScpO1xyXG5cdFx0XHRhcHAuZm9udC5zaXplICAgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ib2R5LWZvbnQtc2l6ZScpO1xyXG5cdFx0XHRhcHAuZm9udC53ZWlnaHQgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ib2R5LWZvbnQtd2VpZ2h0Jyk7XHJcblx0XHRcdGFwcC5jb2xvci5jb21wb25lbnRDb2xvciA9IGdldENzc1ZhcmlhYmxlKCctLWFwcC1jb21wb25lbnQtY29sb3InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmNvbXBvbmVudEJnICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYXBwLWNvbXBvbmVudC1iZycpO1xyXG5cdFx0XHRhcHAuY29sb3IuZGFyayAgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1kYXJrJyk7XHJcblx0XHRcdGFwcC5jb2xvci5saWdodCAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWxpZ2h0Jyk7XHJcblx0XHRcdGFwcC5jb2xvci5ibHVlICAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWJsdWUnKTtcclxuXHRcdFx0YXBwLmNvbG9yLmluZGlnbyAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtaW5kaWdvJyk7XHJcblx0XHRcdGFwcC5jb2xvci5wdXJwbGUgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLXB1cnBsZScpO1xyXG5cdFx0XHRhcHAuY29sb3IucGluayAgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1waW5rJyk7XHJcblx0XHRcdGFwcC5jb2xvci5yZWQgICAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLXJlZCcpO1xyXG5cdFx0XHRhcHAuY29sb3Iub3JhbmdlICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1vcmFuZ2UnKTtcclxuXHRcdFx0YXBwLmNvbG9yLnllbGxvdyAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMteWVsbG93Jyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmVlbiAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWdyZWVuJyk7XHJcblx0XHRcdGFwcC5jb2xvci5zdWNjZXNzICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLXN1Y2Nlc3MnKTtcclxuXHRcdFx0YXBwLmNvbG9yLnRlYWwgICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtdGVhbCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuY3lhbiAgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1jeWFuJyk7XHJcblx0XHRcdGFwcC5jb2xvci53aGl0ZSAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLXdoaXRlJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmF5ICAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXknKTtcclxuXHRcdFx0YXBwLmNvbG9yLmxpbWUgICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtbGltZScpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTEwMCAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTEwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTIwMCAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTIwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTMwMCAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTMwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTQwMCAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTQwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTUwMCAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTUwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTYwMCAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTYwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTcwMCAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTcwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTgwMCAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTgwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTkwMCAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTkwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuYmxhY2sgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ibGFjaycpO1xyXG5cdFx0XHRcclxuXHRcdFx0YXBwLmNvbG9yLnRoZW1lUmdiICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYXBwLXRoZW1lLXJnYicpO1xyXG5cdFx0XHRhcHAuZm9udC5mYW1pbHlSZ2IgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ib2R5LWZvbnQtZmFtaWx5LXJnYicpO1xyXG5cdFx0XHRhcHAuZm9udC5zaXplUmdiICAgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ib2R5LWZvbnQtc2l6ZS1yZ2InKTtcclxuXHRcdFx0YXBwLmZvbnQud2VpZ2h0UmdiICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtYm9keS1mb250LXdlaWdodC1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmNvbXBvbmVudENvbG9yUmdiID0gZ2V0Q3NzVmFyaWFibGUoJy0tYXBwLWNvbXBvbmVudC1jb2xvci1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmNvbXBvbmVudEJnUmdiICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYXBwLWNvbXBvbmVudC1iZy1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmRhcmtSZ2IgICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZGFyay1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmxpZ2h0UmdiICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtbGlnaHQtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ibHVlUmdiICAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWJsdWUtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5pbmRpZ29SZ2IgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWluZGlnby1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLnB1cnBsZVJnYiAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtcHVycGxlLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IucGlua1JnYiAgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1waW5rLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IucmVkUmdiICAgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1yZWQtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5vcmFuZ2VSZ2IgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLW9yYW5nZS1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLnllbGxvd1JnYiAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMteWVsbG93LXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JlZW5SZ2IgICAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmVlbi1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLnN1Y2Nlc3NSZ2IgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtc3VjY2Vzcy1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLnRlYWxSZ2IgICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtdGVhbC1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmN5YW5SZ2IgICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtY3lhbi1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLndoaXRlUmdiICAgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtd2hpdGUtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmF5UmdiICAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5saW1lUmdiICAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWxpbWUtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmF5MTAwUmdiICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktMTAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTIwMFJnYiAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTIwMC1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmdyYXkzMDBSZ2IgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS0zMDAtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmF5NDAwUmdiICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktNDAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTUwMFJnYiAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTUwMC1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmdyYXk2MDBSZ2IgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS02MDAtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmF5NzAwUmdiICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktNzAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTgwMFJnYiAgICAgICAgPSBnZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTgwMC1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmdyYXk5MDBSZ2IgICAgICAgID0gZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS05MDAtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ibGFja1JnYiAgICAgICAgICA9IGdldENzc1ZhcmlhYmxlKCctLWJzLWJsYWNrLXJnYicpO1xyXG5cdFx0fSxcclxuXHRcdHNldFBhZ2VUaXRsZTogZnVuY3Rpb24ocGFnZVRpdGxlKSB7XHJcblx0XHRcdGRvY3VtZW50LnRpdGxlID0gcGFnZVRpdGxlO1xyXG5cdFx0fSxcclxuXHRcdHNldFBhZ2VPcHRpb246IGZ1bmN0aW9uKG9wdGlvbikge1xyXG5cdFx0XHRoYW5kbGVTZXRQYWdlT3B0aW9uKG9wdGlvbik7XHJcblx0XHR9LFxyXG5cdFx0Y2xlYXJQYWdlT3B0aW9uOiBmdW5jdGlvbihvcHRpb24pIHtcclxuXHRcdFx0aGFuZGxlQ2xlYXJQYWdlT3B0aW9uKG9wdGlvbik7XHJcblx0XHR9LFxyXG5cdFx0cmVzdGFydEdsb2JhbEZ1bmN0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCgnLmp2ZWN0b3JtYXAtdGlwLCAuZGF0ZXJhbmdlcGlja2VyJykucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMuaW5pdExvY2FsU3RvcmFnZSgpO1xyXG5cdFx0XHR0aGlzLmluaXRDb21wb25lbnQoKTtcclxuXHRcdH0sXHJcblx0XHRzY3JvbGxUb3A6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcblx0XHRcdFx0c2Nyb2xsVG9wOiAkKCdib2R5Jykub2Zmc2V0KCkudG9wXHJcblx0XHRcdH0sIDApO1xyXG5cdFx0fVxyXG4gIH07XHJcbn0oKTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cdEFwcC5pbml0KCk7XHJcbn0pOyJdfQ==
